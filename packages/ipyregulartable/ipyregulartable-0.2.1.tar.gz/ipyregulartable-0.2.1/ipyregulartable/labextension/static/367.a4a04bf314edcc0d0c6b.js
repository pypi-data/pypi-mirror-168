"use strict";(self.webpackChunkipyregulartable=self.webpackChunkipyregulartable||[]).push([[367],{9118:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegularTableModel=void 0;var a=r(5651),l=r(8657);class s extends a.DOMWidgetModel{static serializers={...a.DOMWidgetModel.serializers};static modelName="RegularTableModel";static modelModule="ipyregulartable";static modelModuleVersion=l.MODULE_VERSION;static viewName="RegularTableView";static viewModule="ipyregulartable";static viewModuleVersion=l.MODULE_VERSION;defaults(){return{...super.defaults(),_model_name:s.modelName,_model_module:s.modelModule,_model_module_version:s.modelModuleVersion,_view_name:s.viewName,_view_module:s.viewModule,_view_module_version:s.viewModuleVersion,virtual_mode:"both",height:"250px",css:{table:"",thead:"",theadtr:"",theadth:"",tbody:"",tbodytr:"",tbodyth:"",tbodytd:""},styler:{table:{expression:[],style:[]},thead:{expression:[],style:[]},tr:{expression:[],style:[]},th:{expression:[],style:[]},td:{expression:[],style:[]},theadtr:{expression:[],style:[]},theadth:{expression:[],style:[]},tbody:{expression:[],style:[]},tbodytr:{expression:[],style:[]},tbodyth:{expression:[],style:[]}},_data:{},_editable:!1}}}t.RegularTableModel=s},8657:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_VERSION=void 0;const a=r(4147).version;t.MODULE_VERSION=a},553:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegularTableView=void 0;var a=r(5651),l=r(7263);r(6529),r(2980),r(7549);class s extends a.DOMWidgetView{table;resolve=void 0;reject=void 0;editable_resolve=void 0;editable_target=void 0;selected={x:0,y:0};rows=0;columns=0;render(){this.model.on("msg:custom",this._handle_msg,this),this.el.classList.add("ipyregulartable"),this.model.on("change:height",this._handle_height,this),this.model.on("change:styler",this._handle_styler,this),this.model.on("change:css",this._handle_css,this),this.displayed.then((()=>{this._render()}))}processPhosphorMessage(e){switch(super.processPhosphorMessage(e),e.type){case"resize":case"after-show":if(this.pWidget.isVisible){this._handle_height();break}}}_handle_styler(){const e=this.model.get("styler");this.table.addStyleListener((()=>{let t,r="";Object.keys(e).forEach((a=>{switch(a){case"table":case"thead":case"tbody":case"tr":case"th":case"td":t=a;break;case"theadtr":t="thead tr";break;case"theadth":t="thead th";break;case"tbodytr":t="tbody tr";break;case"tbodyth":t="tbody th"}e[a].expression&&this.table.querySelectorAll(t).forEach((s=>{let i=0;for(;e[a].expression[i];){const o="table"!==t?this.table.getMeta(s):{x:0,y:0},n=e[a].expression[i].replace(/x/g,o.x).replace(/y/g,o.y).replace(/data/g,`"${s.textContent}"`);try{(0,l.evaluate)(n)&&(s.style.cssText||(s.style.cssText=""),s.style.cssText+=e[a].style[i])}catch(e){r+=`Expression: ${n}\n`,r+=`${e}\n`}i++}}))})),""!==r&&(console.log(r),this.send({event:"errors",value:r}))})),this.table.draw()}_handle_css(){const e=this.model.get("css");let t,r="";Object.keys(e).forEach((a=>{switch(a){case"table":case"thead":case"tbody":case"tr":case"th":case"td":t=a;break;case"theadtr":t="thead tr";break;case"theadth":t="thead th";break;case"tbodytr":t="tbody tr";break;case"tbodyth":t="tbody th"}e[a]&&t&&this.table.querySelectorAll(t).forEach((t=>{try{t.style.cssText=e[a]}catch(e){r+=`${e}\n`}}))})),this.table.draw(),""!==r&&(console.log(r),this.send({event:"errors",value:r}))}_handle_data(){if(void 0!==this.resolve&&this.model.get("_data")){const e=this.model.get("_data");this.resolve(e),this.rows=e.num_rows,this.columns=e.num_columns,this.resolve=void 0,this.reject=void 0}else void 0!==this.reject&&this.reject(),this.resolve=void 0,this.reject=void 0}_handle_editable(){if(void 0!==this.editable_resolve&&this.model.get("_editable")){this.editable_resolve(!0),this.editable_resolve=void 0;const e=this.editable_target;!0===this.model.get("_editable")&&(e.setAttribute("contenteditable","true"),e.addEventListener("focusout",(()=>{const t=this.table.getMeta(e);"true"===e.getAttribute("contenteditable")&&this.send({event:"write",value:[t.x,t.y,e.textContent]}),e.setAttribute("contenteditable","false")})),e.addEventListener("keydown",(t=>{if(13===t.keyCode&&!t.shiftKey){t.preventDefault(),t.stopPropagation();const r=this.table.getMeta(e);"true"===e.getAttribute("contenteditable")&&this.send({event:"write",value:[r.x,r.y,e.textContent]}),e.setAttribute("contenteditable","false")}}))),this.editable_target=void 0}else this.editable_resolve(!1),this.editable_resolve=void 0,this.editable_target=void 0}_handle_height(){this.el.style.height=this.model.get("height"),this.table.style.height=this.model.get("height"),this._handle_draw()}_handle_msg(e){"draw"===e.type?this._handle_draw():"data"===e.type?this._handle_data():"editable"===e.type&&this._handle_editable()}_handle_draw(){this.table.draw()}_render(){this.table=document.createElement("regular-table"),this.el.appendChild(this.table),this.table.setDataListener(((e,t,r,a)=>new Promise(((l,s)=>{void 0!==this.resolve&&(void 0!==this.reject&&this.reject(),this.resolve=void 0,this.reject=void 0),this.resolve=l,this.reject=s,this.send({event:"dataslice",value:[e,t,r,a]})}))),{virtual_mode:this.model.get("virtual_mode")}),this.table.addEventListener("click",(e=>{const t=this.table.getMeta(e.target);void 0!==t&&(this.selected.x=t.x,this.selected.y=t.y,this.updateFocus(),this.send({event:"click",value:[t.x,t.y]}))})),this.table.addEventListener("dblclick",(e=>{const t=this.table.getMeta(e.target);return e.preventDefault(),e.stopPropagation(),new Promise((r=>{void 0!==this.editable_resolve&&(this.editable_resolve(!1),this.editable_resolve=void 0,this.editable_target=void 0),this.editable_resolve=r,this.editable_target=e.target,this.send({event:"editable",value:[t.x,t.y]})}))})),this.table.addEventListener("keydown",(e=>{switch(e.keyCode){case 9:e.preventDefault(),e.shiftKey?this.moveSelection(-1,0):this.moveSelection(1,0);break;case 37:e.preventDefault(),this.moveSelection(-1,0);break;case 38:e.preventDefault(),this.moveSelection(0,-1);break;case 39:e.preventDefault(),this.moveSelection(1,0);break;case 40:e.preventDefault(),this.moveSelection(0,1)}})),this.table.addEventListener("keyup",(e=>{this.updateFocus(),e.preventDefault()}))}moveSelection(e,t){const r=this.findActive();if(!r)return;const a=this.table.getMeta(r);"true"===r.getAttribute("contenteditable")&&r.setAttribute("contenteditable","false"),0!==e&&(a.x+e<this.columns&&a.x+e>=0&&(this.selected.x=a.x+e),a.x1<=this.selected.x+4?this.table.scrollToCell(a.x0+2,a.y0,this.columns,this.rows):this.selected.x-4<a.x0&&(a.x0-1>0?this.table.scrollToCell(a.x0-1,a.y0,this.columns,this.rows):this.table.scrollToCell(0,a.y0,this.columns,this.rows))),0!==t&&(a.y+t<this.rows&&a.y+t>=0&&(this.selected.y=a.y+t),a.y1<=this.selected.y+4?this.table.scrollToCell(a.x0,a.y0+1,this.columns,this.rows):this.selected.y-4+2<a.y0&&(a.y0-1>0?this.table.scrollToCell(a.x0,a.y0-1,this.columns,this.rows):this.table.scrollToCell(a.x0,0,this.columns,this.rows)))}findActive(){let e;return this.table.querySelectorAll("td").forEach((t=>{const r=this.table.getMeta(t);r.x===this.selected.x&&r.y===this.selected.y&&(e=t)})),e}updateFocus(){this.table.querySelectorAll("td").forEach((e=>{const t=this.table.getMeta(e);t.x===this.selected.x&&t.y===this.selected.y?(e.focus(),e.classList.add("highlight")):e.classList.remove("highlight")}))}}t.RegularTableView=s},1367:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RegularTableModel",{enumerable:!0,get:function(){return a.RegularTableModel}}),Object.defineProperty(t,"RegularTableView",{enumerable:!0,get:function(){return l.RegularTableView}}),r(7549);var a=r(9118),l=r(553)},6535:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(8081),l=r.n(a),s=r(3645),i=r.n(s)()(l());i.push([e.id,"@import url(https://fonts.googleapis.com/css?family=Open+Sans);"]),i.push([e.id,"@import url(https://fonts.googleapis.com/css?family=Material+Icons);"]),i.push([e.id,"@import url(https://fonts.googleapis.com/css?family=Roboto+Mono);"]),i.push([e.id,"regular-table tbody td,regular-table thead th:not(.rt-group-corner){transform:translate(var(--regular-table--transform-x,0))}regular-table tbody{transform:translateY(var(--regular-table--transform-y,0))}regular-table tbody tr:first-child td,regular-table tbody tr:first-child th{clip-path:polygon(0 var(--regular-table--clip-y,0),0 100%,100% 100%,100% var(--regular-table--clip-y,0))}regular-table tbody tr td:first-of-type{clip-path:polygon(var(--regular-table--clip-x,0) 0,var(--regular-table--clip-x,0) 100%,100% 100%,100% 0)}regular-table tbody tr:first-child td:first-of-type{clip-path:polygon(var(--regular-table--clip-x,0) var(--regular-table--clip-y,0),var(--regular-table--clip-x,0) 100%,100% 100%,100% var(--regular-table--clip-y,0))}regular-table{padding:12px 0 0 12px;scrollbar-color:transparent transparent;scrollbar-width:thin;outline:none}regular-table:hover{scrollbar-color:rgba(0,0,0,.3) transparent}regular-table{font-family:Open Sans}regular-table div[tabindex]{outline:none}regular-table>div{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden}regular-table th{text-align:center}regular-table thead tr:not(:last-child) th{overflow:hidden;max-width:0}regular-table tbody .rt-float,regular-table thead tr:last-child .rt-float{text-align:right}regular-table tbody .rt-integer,regular-table thead .rt-integer{text-align:right}regular-table tbody th{text-align:left}regular-table span.rt-tree-container{display:flex;align-items:center;height:100%}regular-table tbody .rt-date,regular-table tbody .rt-datetime,regular-table tbody .rt-string,regular-table thead .rt-date,regular-table thead .rt-datetime,regular-table thead .rt-string{text-align:left}regular-table thead tr:last-child th{border-bottom:1px solid #ddd}regular-table th{position:relative}regular-table tr th span.rt-tree-group{margin-left:5px;margin-right:15px;border-left:1px solid #eee;height:100%}regular-table td,regular-table th{white-space:nowrap;font-size:12px;padding:0 5px;height:19px}regular-table tr:hover td{background:#eee;opacity:1}regular-table tr:hover{color:#333}regular-table table *{box-sizing:border-box}regular-table table{position:absolute;overflow:hidden;color:#666;outline:none}regular-table span.rt-row-header-icon{color:#aaa;padding-right:4px;font-family:Material Icons}regular-table span.rt-column-header-icon{font-size:10px;padding-left:3px;display:inline-block;width:10px;font-family:Material Icons}regular-table span.rt-row-header-icon:hover{color:#1a7da1;text-shadow:0 0 3px #1a7da1}regular-table .rt-selected td{background-color:#eee}regular-table .rt-cell-clip{overflow:hidden;text-overflow:ellipsis}regular-table td span.rt-group-name,regular-table th span.rt-group-name{margin-right:-5px;padding-right:5px;padding-left:8px;flex:1;height:100%}regular-table th span.rt-group-name{text-align:left}regular-table td th span.rt-group-leaf,regular-table th span.rt-group-leaf{margin-left:16px;height:100%}regular-table .rt-column-resize{height:100%;width:10px;position:absolute;top:0;right:0;cursor:col-resize}regular-table::-webkit-scrollbar,regular-table::-webkit-scrollbar-corner{background-color:transparent;height:12px;width:12px}regular-table::-webkit-scrollbar-thumb{background-clip:content-box;background-color:transparent;border-radius:5px}regular-table::-webkit-scrollbar-thumb:horizontal{border-bottom:2px solid transparent;border-top:2px solid transparent}regular-table::-webkit-scrollbar-thumb:vertical{border-left:2px solid transparent;border-right:2px solid transparent}regular-table:hover::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.15)}regular-table::-webkit-scrollbar-thumb:hover{background-color:rgba(0,0,0,.3)}",""]);const o=i},2760:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(8081),l=r.n(a),s=r(3645),i=r.n(s)()(l());i.push([e.id,"\ndiv.ipyregulartable {\n  min-height: 200px;\n  /* resize: both; */\n}\n\ndiv.ipyregulartable table th {\n  font-weight: bold;\n  background-color: rgba(0, 0, 0, .1);\n}\n\ndiv.ipyregulartable table td.highlight {\n  background-color: rgba(0, 0, 155, 0.1);\n}\n",""]);const o=i},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",a=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),a&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),a&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,a,l,s){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(a)for(var o=0;o<this.length;o++){var n=this[o][0];null!=n&&(i[n]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);a&&i[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),l&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=l):c[4]="".concat(l)),t.push(c))}},t}},8081:e=>{e.exports=function(e){return e[1]}},2980:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var a=r(3379),l=r.n(a),s=r(7795),i=r.n(s),o=r(569),n=r.n(o),d=r(3565),c=r.n(d),h=r(9216),b=r.n(h),u=r(4589),p=r.n(u),g=r(6535),v={};v.styleTagTransform=p(),v.setAttributes=c(),v.insert=n().bind(null,"head"),v.domAPI=i(),v.insertStyleElement=b(),l()(g.Z,v);const y=g.Z&&g.Z.locals?g.Z.locals:void 0},7549:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var a=r(3379),l=r.n(a),s=r(7795),i=r.n(s),o=r(569),n=r.n(o),d=r(3565),c=r.n(d),h=r(9216),b=r.n(h),u=r(4589),p=r.n(u),g=r(2760),v={};v.styleTagTransform=p(),v.setAttributes=c(),v.insert=n().bind(null,"head"),v.domAPI=i(),v.insertStyleElement=b(),l()(g.Z,v);const y=g.Z&&g.Z.locals?g.Z.locals:void 0},3379:e=>{var t=[];function r(e){for(var r=-1,a=0;a<t.length;a++)if(t[a].identifier===e){r=a;break}return r}function a(e,a){for(var s={},i=[],o=0;o<e.length;o++){var n=e[o],d=a.base?n[0]+a.base:n[0],c=s[d]||0,h="".concat(d," ").concat(c);s[d]=c+1;var b=r(h),u={css:n[1],media:n[2],sourceMap:n[3],supports:n[4],layer:n[5]};if(-1!==b)t[b].references++,t[b].updater(u);else{var p=l(u,a);a.byIndex=o,t.splice(o,0,{identifier:h,updater:p,references:1})}i.push(h)}return i}function l(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,l){var s=a(e=e||[],l=l||{});return function(e){e=e||[];for(var i=0;i<s.length;i++){var o=r(s[i]);t[o].references--}for(var n=a(e,l),d=0;d<s.length;d++){var c=r(s[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}s=n}}},569:e=>{var t={};e.exports=function(e,r){var a=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(r)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var a="";r.supports&&(a+="@supports (".concat(r.supports,") {")),r.media&&(a+="@media ".concat(r.media," {"));var l=void 0!==r.layer;l&&(a+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),a+=r.css,l&&(a+="}"),r.media&&(a+="}"),r.supports&&(a+="}");var s=r.sourceMap;s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},4147:e=>{e.exports=JSON.parse('{"name":"ipyregulartable","version":"0.2.1","description":"A Custom Jupyter Widget Library","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/jpmorganchase/ipyregulartable","bugs":{"url":"https://github.com/jpmorganchase/ipyregulartable/issues"},"license":"Apache-2.0","author":{"name":"Tim Paine","email":"t.paine154@gmail.com"},"main":"lib/index.js","repository":{"type":"git","url":"https://github.com/jpmorganchase/ipyregulartable"},"scripts":{"build:babel":"babel src/ --source-maps --out-dir lib/","build:labextension":"jupyter labextension build .","build:nbextension":"webpack --mode=production","build":"npm-run-all clean build:*","clean":"npm run clean:lib && npm run clean:nbextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ../ipyregulartable/labextension","clean:nbextension":"rimraf ../ipyregulartable/nbextension/static/index.js","fix":"yarn lint --fix","lint":"eslint -c .eslintrc.js --ext .js src/ tests/","prepack":"npm run build:lib","test":"jest --coverage --collectCoverageFrom=src/*.{js}","watch":"npm-run-all -p watch:*","watch:lib":"yarn build:lib --watch","watch:nbextension":"webpack --watch"},"jupyterlab":{"extension":"lib/plugin.js","outputDir":"../ipyregulartable/labextension","discovery":{"server":{"base":{"name":"ipyregulartable"},"managers":["pip"]}}},"dependencies":{"@jupyter-widgets/base":"^6.0.1","mathjs":"^11.2.1","regular-table":"^0.5.6"},"devDependencies":{"@babel/cli":"^7.18.10","@babel/core":"^7.19.1","@babel/eslint-parser":"^7.19.1","@babel/preset-env":"^7.19.1","@jupyterlab/builder":"^3.3.2","@lumino/application":"^1.29.3","@lumino/widgets":"^1.34.0","babel-jest":"^29.0.3","css-loader":"^6.7.1","eslint":"^8.23.1","eslint-config-airbnb":"^19.0.2","eslint-config-airbnb-base":"^15.0.0","eslint-config-prettier":"^8.5.0","eslint-plugin-import":"^2.26.0","eslint-plugin-jest":"^27.0.4","eslint-plugin-jsdoc":"^39.3.6","eslint-plugin-json":"^3.1.0","eslint-plugin-prefer-arrow":"^1.2.3","eslint-plugin-prettier":"^4.2.1","eslint-plugin-unicorn":"^43.0.2","expect.js":"^0.3.1","fs-extra":"^10.1.0","isomorphic-fetch":"^3.0.0","jest":"^29.0.3","jest-environment-jsdom":"^29.0.3","jest-transform-css":"^5.0.0","mkdirp":"^1.0.4","mocha":"^10.0.0","npm-run-all":"^4.1.3","prettier":"^2.7.1","rimraf":"^3.0.2","source-map-loader":"^4.0.0","style-loader":"^3.2.1","webpack":"^5.74.0","webpack-cli":"^4.10.0"},"resolutions":{"kind-of":"^6.0.3"}}')}}]);