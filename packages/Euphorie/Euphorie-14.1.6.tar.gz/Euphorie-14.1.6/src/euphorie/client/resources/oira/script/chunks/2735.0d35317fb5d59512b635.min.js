"use strict";(self.webpackChunkoira_prototype=self.webpackChunkoira_prototype||[]).push([[2735],{72735:function(t,e,s){s.r(e),s.d(e,{parser:function(){return p}});s(35666),s(53273);var o=s(19755),i=s.n(o),l=s(39191),r=s(54593),n=s(89867),a=s(40705),c=s(19513);const h=n.Z.getLogger("pat.scroll"),p=new a.Z("scroll");p.addArgument("trigger","click",["click","auto","manual"]),p.addArgument("direction","top",["top","left"]),p.addArgument("selector"),p.addArgument("offset",0),p.addArgument("delay"),e.default=l.Z.extend({name:"scroll",trigger:".pat-scroll",jquery_plugin:!0,async init(t,e){if(this.options=p.parse(this.$el,e),this.options.delay&&(this.options.delay=c.Z.parseTime(this.options.delay)),"auto"===this.options.trigger){(0,(await s.e(7564).then(s.t.bind(s,77564,23))).default)(document.body,(()=>this.smoothScroll()))}"auto"!==this.options.trigger&&"click"!==this.options.trigger||this.el.addEventListener("click",this.onClick.bind(this)),this.$el.on("pat-update",this.onPatternsUpdate.bind(this)),this.markBasedOnFragment(),this.on("hashchange",this.clearIfHidden.bind(this)),i()(window).scroll(c.Z.debounce(this.markIfVisible.bind(this),50))},onClick(){history.pushState({},null,this.$el.attr("href")),this.smoothScroll(),this.markBasedOnFragment(),i()("a.pat-scroll").trigger("hashchange")},markBasedOnFragment(){const t=window.location.hash.substr(1);if(t){const e=i()("#"+t);this.$el.addClass("current"),e.addClass("current")}},clearIfHidden(){const t="#"+window.location.hash.substr(1),e=i()(t),s="#"+this.$el[0].href.split("#").pop();if(e.length>0&&t!=s){i()("#"+this.$el[0].href.split("#").pop()).removeClass("current"),this.$el.removeClass("current")}},markIfVisible(){if(this.$el.hasClass("pat-scroll-animated"))this.$el.removeClass("pat-scroll-animated");else if("A"===this.$el[0].nodeName){const t=this.$el[0].href,e=-1!==t.indexOf("#")&&t.split("#").pop()||void 0;if(e){const t=i()("#"+e);t.length&&(c.Z.isElementInViewport(t[0],!0,this.options.offset)&&(t.addClass("current"),this.$el.addClass("current")),i()(this.$el).trigger("pat-update",{pattern:"scroll"}))}}},onPatternsUpdate(t,e){if("stacks"===e?.pattern)e.originalEvent&&"click"===e.originalEvent.type&&this.smoothScroll();else if("scroll"===e?.pattern){const t=this.$el[0].href,e=-1!==t.indexOf("#")&&t.split("#").pop()||void 0;if(e){const t=i()("#"+e);t.length&&(c.Z.isElementInViewport(t[0],!0,this.options.offset)||(t.removeClass("current"),i()(this.$el).removeClass("current")))}}},_get_selector_target(){const t=this.options.selector;return!t&&this.el.href?.includes("#")?document.querySelector(`#${this.el.href.split("#").pop()}`):t&&"self"!==t?document.querySelector(t):this.el},async smoothScroll(){this.options.delay&&await c.Z.timeout(this.options.delay);const t="top"==this.options.direction?"scrollTop":"scrollLeft",e={};let s;if("top"===this.options.selector)s=i()(r.Z.find_scroll_container(this.el.parentElement,"top"===this.options.direction?"y":"x")),e[t]=0;else if("bottom"===this.options.selector)s=i()(r.Z.find_scroll_container(this.el.parentElement,"top"===this.options.direction?"y":"x")),"scrollTop"===t?e.scrollTop=s[0].scrollHeight:e.scrollLeft=s[0].scrollWidth;else{const o=i()(this._get_selector_target());if(!o.length)return;s=i()(r.Z.find_scroll_container(o[0].parentElement,"top"===this.options.direction?"y":"x")),s[0]===document.body?e[t]="scrollTop"===t?Math.floor(o.safeOffset().top):Math.floor(o.safeOffset().left):e[t]="scrollTop"===t?Math.floor(s.scrollTop()+o.safeOffset().top-s.safeOffset().top):Math.floor(s.scrollLeft()+o.safeOffset().left-s.safeOffset().left)}e[t]-=this.options.offset,s[0]===document.body&&(s=i()("html")),await s.animate(e,{duration:500,start:()=>{i()(".pat-scroll").addClass("pat-scroll-animated"),h.debug("scrolling.")}}).promise()}})}}]);
//# sourceMappingURL=2735.0d35317fb5d59512b635.min.js.map