{% extends 'adminvisualsortable/sort-base.html' %}
{% load static %}

{% load admin_utils %}

{% block main %}
<div class="sorter-cont">
    <div>
        <a class="back-btn" href="{{ parent_instance|get_parent_admin_url_detail }}">
            <i class="fa-solid fa-arrow-left-long"></i> Back
        </a>
        <h1 class="visual-sort-title">{{ parent_instance }}</h1>
    </div>
    <div>
        {% for r in res %}
        <div class="dropzone" data-ord="{{r.ord}}">
            <div data-id="{{r.obj.id}}" data-ord="{{r.ord}}" class="drag-drop">
                <div id="bg-image-{{ r.obj.id }}" class="cover">
                </div>
                <div class="item-title">
                    <div> <b>{{ r.obj }}</b></div>
                    <div class="item-title-action-cont">
                        <span class="idx-cont"><span class="live-ord" data-id="{{ r.obj.id }}">{{ r.ord }}</span></span>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

</div>
{% endblock %}
{% block bottom_script %}
<script>
    (function() {
        let title_height = 0;
        u('.item-title').each(function(node, i){
            let get_height = u(node).size().height;
            if ( get_height > title_height )
                title_height = get_height;
        });
        u('.item-title').each(function(node, i){
            node.style.height = title_height + 'px';
        });
    })();
</script>
{% endblock %}
