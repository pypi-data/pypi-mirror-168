import ho from"./RootQuery.graphql.1ecb0c20.js";import{R as p,c as po,b as yo,a as Qt,r as k,p as D,g as go,s as G,d as X,G as Qe,u as oe,e as Yt,f as Ln,h as Ar,v as Zt,_ as Dr,i as Yn,j as vo,C as Mn,H as Lr,k as mo,l as Mr,m as Mt,n as bo,o as Eo,q as _o,t as Rr,w as ko,x as So,y as Nr,z as be,A as wo,B as xo,S as Co,L as To,D as Oo,E as Zn,F as Ko,I as Io,J as Po,K as Ao,M as Do,N as Lo,O as Mo,P as Ro,Q as No,T as Fo,U as jo,V as Ho,W as Uo}from"./index.4a839f44.js";import{A as Bo,E as Fr,u as $o}from"./generic.8b2bc2c5.js";const _n=({children:e,className:t,...n})=>{const r=[yo,t];return p.createElement("button",{className:po(...r),...n},e)},qo=Qt(k.exports.createElement("path",{d:"M7 10l5 5 5-5z"})),Go=Qt(k.exports.createElement("path",{d:"M7 14l5-5 5 5z"})),zo=Qt(k.exports.createElement("path",{d:"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.41L5.83 13H21V7z"})),Vo=Qt(k.exports.createElement("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})),jr=function(){var e={alias:null,args:null,kind:"ScalarField",name:"colorscale",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RootConfig_query",selections:[{alias:null,args:null,concreteType:"AppConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"colorBy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"colorPool",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"gridZoom",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"loopVideos",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"notebookHeight",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"plugins",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showConfidence",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showIndex",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showLabel",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showSkeletons",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showTooltip",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"timezone",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"useFrameNumber",storageKey:null}],storageKey:null},e],type:"Query",abstractKey:null}}();jr.hash="84d84de0717c65bc7a17e0afd6384e08";const Hr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RootNav_query",selections:[{alias:null,args:null,kind:"ScalarField",name:"teamsSubmission",storageKey:null}],type:"Query",abstractKey:null};Hr.hash="24cca3fbea15640c1527e86151f3899e";const Ur={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RootGA_query",selections:[{alias:null,args:null,kind:"ScalarField",name:"context",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dev",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"doNotTrack",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null}],type:"Query",abstractKey:null};Ur.hash="40d5fec94e7227a5e638ff2fec41458e";const Br=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"search"}],t=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"search",variableName:"search"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"DatasetsPaginationQuery",selections:[{args:null,kind:"FragmentSpread",name:"RootDatasets_query"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"DatasetsPaginationQuery",selections:[{alias:null,args:t,concreteType:"DatasetStrConnection",kind:"LinkedField",name:"datasets",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total",storageKey:null},{alias:null,args:null,concreteType:"DatasetStrEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{alias:null,args:null,concreteType:"Dataset",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"DatasetStrPageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:t,filters:["search"],handle:"connection",key:"DatasetsList_query_datasets",kind:"LinkedHandle",name:"datasets"}]},params:{cacheID:"1e0b621671e78c21b0947dcfa72dd51e",id:null,metadata:{},name:"DatasetsPaginationQuery",operationKind:"query",text:`query DatasetsPaginationQuery(
  $count: Int
  $cursor: String
  $search: String
) {
  ...RootDatasets_query
}

fragment RootDatasets_query on Query {
  datasets(search: $search, first: $count, after: $cursor) {
    total
    edges {
      cursor
      node {
        name
        id
        __typename
      }
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}
`}}}();Br.hash="280afc557752c2245a140c58ccb00248";const $r=function(){var e=["datasets"];return{argumentDefinitions:[{kind:"RootArgument",name:"count"},{kind:"RootArgument",name:"cursor"},{kind:"RootArgument",name:"search"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:e}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:e},fragmentPathInResult:[],operation:Br}},name:"RootDatasets_query",selections:[{alias:"datasets",args:[{kind:"Variable",name:"search",variableName:"search"}],concreteType:"DatasetStrConnection",kind:"LinkedField",name:"__DatasetsList_query_datasets_connection",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total",storageKey:null},{alias:null,args:null,concreteType:"DatasetStrEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{alias:null,args:null,concreteType:"Dataset",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"DatasetStrPageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null}}();$r.hash="280afc557752c2245a140c58ccb00248";function R(e){console.warn("[react-ga]",e)}function Ot(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ot=function(n){return typeof n}:Ot=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ot(e)}function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?er(Object(n),!0).forEach(function(r){Rn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wo(e,t){if(e==null)return{};var n=Jo(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function Jo(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Xo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qo(e,t,n){return t&&nr(e.prototype,t),n&&nr(e,n),e}function Yo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}function kn(e,t){return kn=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},kn(e,t)}function Zo(e){var t=ta();return function(){var r=Rt(e),i;if(t){var o=Rt(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return ea(this,i)}}function ea(e,t){return t&&(Ot(t)==="object"||typeof t=="function")?t:qr(e)}function qr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ta(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Rt(e){return Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Rt(e)}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rr="_blank",na=1,De=function(e){Yo(n,e);var t=Zo(n);function n(){var r;Xo(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=t.call.apply(t,[this].concat(o)),Rn(qr(r),"handleClick",function(s){var u=r.props,l=u.target,c=u.eventLabel,f=u.to,d=u.onClick,h=u.trackerNames,g={label:c},m=l!==rr,b=!(s.ctrlKey||s.shiftKey||s.metaKey||s.button===na);m&&b?(s.preventDefault(),n.trackLink(g,function(){window.location.href=f},h)):n.trackLink(g,function(){},h),d&&d(s)}),r}return Qo(n,[{key:"render",value:function(){var i=this.props,o=i.to,a=i.target,s=Wo(i,["to","target"]),u=tr(tr({},s),{},{target:a,href:o,onClick:this.handleClick});return a===rr&&(u.rel="".concat(u.rel?u.rel:""," noopener noreferrer").trim()),delete u.eventLabel,delete u.trackerNames,p.createElement("a",u)}}]),n}(k.exports.Component);Rn(De,"trackLink",function(){R("ga tracking not enabled")});De.propTypes={eventLabel:D.exports.string.isRequired,target:D.exports.string,to:D.exports.string,onClick:D.exports.func,trackerNames:D.exports.arrayOf(D.exports.string)};De.defaultProps={target:null,to:null,onClick:null,trackerNames:null};function ra(e){return typeof e=="string"&&e.indexOf("@")!==-1}var ia="REDACTED (Potential Email Address)";function oa(e){return ra(e)?(R("This arg looks like an email address, redacting."),ia):e}function en(e){return e&&e.toString().replace(/^\s+|\s+$/g,"")}var aa=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function sa(e){return en(e).replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(t,n,r){return n>0&&n+t.length!==r.length&&t.search(aa)>-1&&r.charAt(n-2)!==":"&&(r.charAt(n+t.length)!=="-"||r.charAt(n-1)==="-")&&r.charAt(n-1).search(/[^\s-]/)<0?t.toLowerCase():t.substr(1).search(/[A-Z]|\../)>-1?t:t.charAt(0).toUpperCase()+t.substr(1)})}function ua(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=e||"";return t&&(r=sa(e)),n&&(r=oa(r)),r}function la(e){return e.substring(0,1)==="/"?e.substring(1):e}var ir=!1;function ca(e){if(!ir){ir=!0;var t="https://www.google-analytics.com/analytics.js";e&&e.gaAddress?t=e.gaAddress:e&&e.debug&&(t="https://www.google-analytics.com/analytics_debug.js");var n=e&&e.onerror;(function(r,i,o,a,s,u,l){r.GoogleAnalyticsObject=s,r[s]=r[s]||function(){(r[s].q=r[s].q||[]).push(arguments)},r[s].l=1*new Date,u=i.createElement(o),l=i.getElementsByTagName(o)[0],u.async=1,u.src=a,u.onerror=n,l.parentNode.insertBefore(u,l)})(window,document,"script",t,"ga")}}function W(e){console.info("[react-ga]",e)}var hn=[];const Nt={calls:hn,ga:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];hn.push([].concat(n))},resetCalls:function(){hn.length=0}};function da(e,t){if(e==null)return{};var n=fa(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function fa(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ha(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?or(Object(n),!0).forEach(function(r){pa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qe(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qe=function(n){return typeof n}:qe=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qe(e)}function ya(e){return ba(e)||ma(e)||va(e)||ga()}function ga(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function va(e,t){if(!!e){if(typeof e=="string")return Sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sn(e,t)}}function ma(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function ba(e){if(Array.isArray(e))return Sn(e)}function Sn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Gr=typeof window>"u"||typeof document>"u",he=!1,zr=!0,Vr=!1,Wr=!0,Jr=!0,Ge=function(){var t;return Vr?Nt.ga.apply(Nt,arguments):Gr?!1:window.ga?(t=window).ga.apply(t,arguments):R("ReactGA.initialize must be called first or GoogleAnalytics should be loaded manually")};function we(e){return ua(e,zr,Jr)}function tn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0];if(typeof Ge=="function"){if(typeof i!="string"){R("ga command must be a string");return}(Wr||!Array.isArray(e))&&Ge.apply(void 0,n),Array.isArray(e)&&e.forEach(function(o){Ge.apply(void 0,ya(["".concat(o,".").concat(i)].concat(n.slice(1))))})}}function ar(e,t){if(!e){R("gaTrackingID is required in initialize()");return}t&&(t.debug&&t.debug===!0&&(he=!0),t.titleCase===!1&&(zr=!1),t.redactEmail===!1&&(Jr=!1),t.useExistingGa)||(t&&t.gaOptions?Ge("create",e,t.gaOptions):Ge("create",e,"auto"))}function Xr(e,t){return Array.isArray(e)?e.forEach(function(n){if(qe(n)!=="object"){R("All configs must be an object");return}ar(n.trackingId,n)}):ar(e,t),!0}function Qr(e,t){if(t&&t.testMode===!0)Vr=!0;else{if(Gr)return;(!t||t.standardImplementation!==!0)&&ca(t)}Wr=t&&typeof t.alwaysSendToDefaultTracker=="boolean"?t.alwaysSendToDefaultTracker:!0,Xr(e,t)}function ne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length>0&&(Ge.apply(void 0,t),he&&(W("called ga('arguments');"),W("with arguments: ".concat(JSON.stringify(t))))),window.ga}function Yr(e,t){if(!e){R("`fieldsObject` is required in .set()");return}if(qe(e)!=="object"){R("Expected `fieldsObject` arg to be an Object");return}Object.keys(e).length===0&&R("empty `fieldsObject` given to .set()"),tn(t,"set",e),he&&(W("called ga('set', fieldsObject);"),W("with fieldsObject: ".concat(JSON.stringify(e))))}function Ye(e,t){tn(t,"send",e),he&&(W("called ga('send', fieldObject);"),W("with fieldObject: ".concat(JSON.stringify(e))),W("with trackers: ".concat(JSON.stringify(t))))}function Zr(e,t,n){if(!e){R("path is required in .pageview()");return}var r=en(e);if(r===""){R("path cannot be an empty string in .pageview()");return}var i={};if(n&&(i.title=n),typeof ne=="function"&&(tn(t,"send",ha({hitType:"pageview",page:r},i)),he)){W("called ga('send', 'pageview', path);");var o="";n&&(o=" and title: ".concat(n)),W("with path: ".concat(r).concat(o))}}function ei(e,t){if(!e){R("modalName is required in .modalview(modalName)");return}var n=la(en(e));if(n===""){R("modalName cannot be an empty string or a single / in .modalview()");return}if(typeof ne=="function"){var r="/modal/".concat(n);tn(t,"send","pageview",r),he&&(W("called ga('send', 'pageview', path);"),W("with path: ".concat(r)))}}function ti(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.category,n=e.variable,r=e.value,i=e.label,o=arguments.length>1?arguments[1]:void 0;if(typeof ne=="function"){if(!t||!n||typeof r!="number"){R("args.category, args.variable AND args.value are required in timing() AND args.value has to be a number");return}var a={hitType:"timing",timingCategory:we(t),timingVar:we(n),timingValue:r};i&&(a.timingLabel=we(i)),Ye(a,o)}}function ni(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.category,n=e.action,r=e.label,i=e.value,o=e.nonInteraction,a=e.transport,s=da(e,["category","action","label","value","nonInteraction","transport"]),u=arguments.length>1?arguments[1]:void 0;if(typeof ne=="function"){if(!t||!n){R("args.category AND args.action are required in event()");return}var l={hitType:"event",eventCategory:we(t),eventAction:we(n)};r&&(l.eventLabel=we(r)),typeof i<"u"&&(typeof i!="number"?R("Expected `args.value` arg to be a Number."):l.eventValue=i),typeof o<"u"&&(typeof o!="boolean"?R("`args.nonInteraction` must be a boolean."):l.nonInteraction=o),typeof a<"u"&&(typeof a!="string"?R("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(a)===-1&&R("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),l.transport=a)),Object.keys(s).filter(function(c){return c.substr(0,9)==="dimension"}).forEach(function(c){l[c]=s[c]}),Object.keys(s).filter(function(c){return c.substr(0,6)==="metric"}).forEach(function(c){l[c]=s[c]}),Ye(l,u)}}function ri(e,t){var n=e.description,r=e.fatal;if(typeof ne=="function"){var i={hitType:"exception"};n&&(i.exDescription=we(n)),typeof r<"u"&&(typeof r!="boolean"?R("`args.fatal` must be a boolean."):i.exFatal=r),Ye(i,t)}}var ii={require:function(t,n,r){if(typeof ne=="function"){if(!t){R("`name` is required in .require()");return}var i=en(t);if(i===""){R("`name` cannot be an empty string in .require()");return}var o=r?"".concat(r,".require"):"require";if(n){if(qe(n)!=="object"){R("Expected `options` arg to be an Object");return}Object.keys(n).length===0&&R("Empty `options` given to .require()"),ne(o,i,n),he&&W("called ga('require', '".concat(i,"', ").concat(JSON.stringify(n)))}else ne(o,i),he&&W("called ga('require', '".concat(i,"');"))}},execute:function(t,n){for(var r,i,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];if(a.length===1?r=a[0]:(i=a[0],r=a[1]),typeof ne=="function")if(typeof t!="string")R("Expected `pluginName` arg to be a String.");else if(typeof n!="string")R("Expected `action` arg to be a String.");else{var u="".concat(t,":").concat(n);r=r||null,i&&r?(ne(u,i,r),he&&(W("called ga('".concat(u,"');")),W('actionType: "'.concat(i,'" with payload: ').concat(JSON.stringify(r))))):r?(ne(u,r),he&&(W("called ga('".concat(u,"');")),W("with payload: ".concat(JSON.stringify(r))))):(ne(u),he&&W("called ga('".concat(u,"');")))}}};function Nn(e,t,n){if(typeof t!="function"){R("hitCallback function is required");return}if(typeof ne=="function"){if(!e||!e.label){R("args.label is required in outboundLink()");return}var r={hitType:"event",eventCategory:"Outbound",eventAction:"Click",eventLabel:we(e.label)},i=!1,o=function(){i=!0,t()},a=setTimeout(o,250),s=function(){clearTimeout(a),i||t()};r.hitCallback=s,Ye(r,n)}else setTimeout(t,0)}var Ea=Nt;const _a={initialize:Qr,ga:ne,set:Yr,send:Ye,pageview:Zr,modalview:ei,timing:ti,event:ni,exception:ri,plugin:ii,outboundLink:Nn,testModeAPI:Nt},ka=Object.freeze(Object.defineProperty({__proto__:null,addTrackers:Xr,initialize:Qr,ga:ne,set:Yr,send:Ye,pageview:Zr,modalview:ei,timing:ti,event:ni,exception:ri,plugin:ii,outboundLink:Nn,testModeAPI:Ea,default:_a},Symbol.toStringTag,{value:"Module"}));function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sr(Object(n),!0).forEach(function(r){Sa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}De.origTrackLink=De.trackLink;De.trackLink=Nn;var wa=De;const pn=ur(ur({},ka),{},{OutboundLink:wa}),_t={app_ids:{prod:"UA-141773487-6",dev:"UA-141773487-7"},dimensions:{dev:"dimension1",version:"dimension2",context:"dimension3"}},xa="_page_8fb7q_1",Ca="_rest_8fb7q_8",Ta="_icons_8fb7q_13",Oa={page:xa,rest:Ca,icons:Ta};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var y=function(){return y=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},y.apply(this,arguments)};function Fn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function I(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function q(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var L;(function(e){e.Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose"})(L||(L={}));var Le;(function(e){e.Parent="#_parent",e.Internal="#_internal"})(Le||(Le={}));var Ft=L.Start,nn=L.Stop,vt=L.Raise,mt=L.Send,jn=L.Cancel,oi=L.NullEvent,jt=L.Assign,Ka=L.After,Ia=L.DoneState,rn=L.Log,ai=L.Init,Ht=L.Invoke,Pa=L.ErrorExecution,wn=L.ErrorPlatform,Hn=L.ErrorCustom,on=L.Update,si=L.Choose,ui=L.Pure;const Aa=Object.freeze(Object.defineProperty({__proto__:null,after:Ka,assign:jt,cancel:jn,choose:si,doneState:Ia,error:Hn,errorExecution:Pa,errorPlatform:wn,init:ai,invoke:Ht,log:rn,nullEvent:oi,pure:ui,raise:vt,send:mt,start:Ft,stop:nn,update:on},Symbol.toStringTag,{value:"Module"}));var li=".",lr={},xn="xstate.guard",Da="",_e=!0,kt;function Un(e,t,n){n===void 0&&(n=li);var r=it(e,n),i=it(t,n);return P(i)?P(r)?i===r:!1:P(r)?r in i:Object.keys(r).every(function(o){return o in i?Un(r[o],i[o]):!1})}function ci(e){try{return P(e)||typeof e=="number"?"".concat(e):e.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function Cn(e,t){try{return Ze(e)?e:e.toString().split(t)}catch{throw new Error("'".concat(e,"' is not a valid state path."))}}function La(e){return typeof e=="object"&&"value"in e&&"context"in e&&"event"in e&&"_event"in e}function it(e,t){if(La(e))return e.value;if(Ze(e))return Ut(e);if(typeof e!="string")return e;var n=Cn(e,t);return Ut(n)}function Ut(e){if(e.length===1)return e[0];for(var t={},n=t,r=0;r<e.length-1;r++)r===e.length-2?n[e[r]]=e[r+1]:(n[e[r]]={},n=n[e[r]]);return t}function tt(e,t){for(var n={},r=Object.keys(e),i=0;i<r.length;i++){var o=r[i];n[o]=t(e[o],o,e,i)}return n}function cr(e,t,n){var r,i,o={};try{for(var a=I(Object.keys(e)),s=a.next();!s.done;s=a.next()){var u=s.value,l=e[u];!n(l)||(o[u]=t(l,u,e))}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}var Ma=function(e){return function(t){var n,r,i=t;try{for(var o=I(e),a=o.next();!a.done;a=o.next()){var s=a.value;i=i[s]}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}};function Ra(e,t){return function(n){var r,i,o=n;try{for(var a=I(e),s=a.next();!s.done;s=a.next()){var u=s.value;o=o[t][u]}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}}function Kt(e){if(!e)return[[]];if(P(e))return[[e]];var t=U(Object.keys(e).map(function(n){var r=e[n];return typeof r!="string"&&(!r||!Object.keys(r).length)?[[n]]:Kt(e[n]).map(function(i){return[n].concat(i)})}));return t}function U(e){var t;return(t=[]).concat.apply(t,q([],A(e),!1))}function di(e){return Ze(e)?e:[e]}function de(e){return e===void 0?[]:di(e)}function Bt(e,t,n){var r,i;if(M(e))return e(t,n.data);var o={};try{for(var a=I(Object.keys(e)),s=a.next();!s.done;s=a.next()){var u=s.value,l=e[u];M(l)?o[u]=l(t,n.data):o[u]=l}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}function Na(e){return/^(done|error)\./.test(e)}function dr(e){return!!(e instanceof Promise||e!==null&&(M(e)||typeof e=="object")&&M(e.then))}function Fa(e){return e!==null&&typeof e=="object"&&"transition"in e&&typeof e.transition=="function"}function fi(e,t){var n,r,i=A([[],[]],2),o=i[0],a=i[1];try{for(var s=I(e),u=s.next();!u.done;u=s.next()){var l=u.value;t(l)?o.push(l):a.push(l)}}catch(c){n={error:c}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return[o,a]}function hi(e,t){return tt(e.states,function(n,r){if(!!n){var i=(P(t)?void 0:t[r])||(n?n.current:void 0);if(!!i)return{current:i,states:hi(n,i)}}})}function ja(e,t){return{current:t,states:hi(e,t)}}function fr(e,t,n,r){_e||Ke();var i=e&&n.reduce(function(o,a){var s,u,l=a.assignment,c={state:r,action:a,_event:t},f={};if(M(l))f=l(o,t.data,c);else try{for(var d=I(Object.keys(l)),h=d.next();!h.done;h=d.next()){var g=h.value,m=l[g];f[g]=M(m)?m(o,t.data,c):m}}catch(b){s={error:b}}finally{try{h&&!h.done&&(u=d.return)&&u.call(d)}finally{if(s)throw s.error}}return Object.assign({},o,f)},e);return i}var Ke=function(){};function Ze(e){return Array.isArray(e)}function M(e){return typeof e=="function"}function P(e){return typeof e=="string"}function pi(e,t){if(!!e)return P(e)?{type:xn,name:e,predicate:t?t[e]:void 0}:M(e)?{type:xn,name:e.name,predicate:e}:e}function Ha(e){try{return"subscribe"in e&&M(e.subscribe)}catch{return!1}}var ke=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();kt={},kt[ke]=function(){return this},kt[Symbol.observable]=function(){return this};function Me(e){return!!e&&"__xstatenode"in e}function Ua(e){return!!e&&typeof e.send=="function"}var Ba=function(){var e=0;return function(){return e++,e.toString(16)}}();function Bn(e,t){return P(e)||typeof e=="number"?y({type:e},t):e}function Y(e,t){if(!P(e)&&"$$type"in e&&e.$$type==="scxml")return e;var n=Bn(e);return y({name:n.type,data:n,$$type:"scxml",type:"external"},t)}function Ne(e,t){var n=di(t).map(function(r){return typeof r>"u"||typeof r=="string"||Me(r)?{target:r,event:e}:y(y({},r),{event:e})});return n}function $a(e){if(!(e===void 0||e===Da))return de(e)}function yi(e,t,n,r,i){var o=e.options.guards,a={state:i,cond:t,_event:r};if(t.type===xn)return((o==null?void 0:o[t.name])||t.predicate)(n,r.data,a);var s=o==null?void 0:o[t.type];if(!s)throw new Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return s(n,r.data,a)}function gi(e){return typeof e=="string"?{type:e}:e}function Tn(e,t,n){if(typeof e=="object")return e;var r=function(){};return{next:e,error:t||r,complete:n||r}}function St(e,t){return"".concat(e,":invocation[").concat(t,"]")}var ft=Y({type:ai});function $t(e,t){return t&&t[e]||void 0}function Ve(e,t){var n;if(P(e)||typeof e=="number"){var r=$t(e,t);M(r)?n={type:e,exec:r}:r?n=r:n={type:e,exec:void 0}}else if(M(e))n={type:e.name||e.toString(),exec:e};else{var r=$t(e.type,t);if(M(r))n=y(y({},e),{exec:r});else if(r){var i=r.type||e.type;n=y(y(y({},r),e),{type:i})}else n=e}return n}var ht=function(e,t){if(!e)return[];var n=Ze(e)?e:[e];return n.map(function(r){return Ve(r,t)})};function an(e){var t=Ve(e);return y(y({id:P(e)?e:t.id},t),{type:t.type})}function vi(e){return P(e)?{type:vt,event:e}:Ce(e,{to:Le.Internal})}function mi(e){return{type:vt,_event:Y(e.event)}}function Ce(e,t){return{to:t?t.to:void 0,type:mt,event:M(e)?e:Bn(e),delay:t?t.delay:void 0,id:t&&t.id!==void 0?t.id:M(e)?e.name:ci(e)}}function bi(e,t,n,r){var i={_event:n},o=Y(M(e.event)?e.event(t,n.data,i):e.event),a;if(P(e.delay)){var s=r&&r[e.delay];a=M(s)?s(t,n.data,i):s}else a=M(e.delay)?e.delay(t,n.data,i):e.delay;var u=M(e.to)?e.to(t,n.data,i):e.to;return y(y({},e),{to:u,_event:o,event:o.data,delay:a})}function sn(e,t){return Ce(e,y(y({},t),{to:Le.Parent}))}function qa(e,t,n){return Ce(t,y(y({},n),{to:e}))}function Ga(){return sn(on)}function za(e,t){return Ce(e,y(y({},t),{to:function(n,r,i){var o=i._event;return o.origin}}))}var Va=function(e,t){return{context:e,event:t}};function Wa(e,t){return e===void 0&&(e=Va),{type:rn,label:t,expr:e}}var Ei=function(e,t,n){return y(y({},e),{value:P(e.expr)?e.expr:e.expr(t,n.data,{_event:n})})},_i=function(e){return{type:jn,sendId:e}};function ki(e){var t=an(e);return{type:L.Start,activity:t,exec:void 0}}function Si(e){var t=M(e)?e:an(e);return{type:L.Stop,activity:t,exec:void 0}}function wi(e,t,n){var r=M(e.activity)?e.activity(t,n.data):e.activity,i=typeof r=="string"?{id:r}:r,o={type:L.Stop,activity:i};return o}var xi=function(e){return{type:jt,assignment:e}};function Ja(e){return typeof e=="object"&&"type"in e}function Ci(e,t){var n=t?"#".concat(t):"";return"".concat(L.After,"(").concat(e,")").concat(n)}function nt(e,t){var n="".concat(L.DoneState,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function ot(e,t){var n="".concat(L.DoneInvoke,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function Be(e,t){var n="".concat(L.ErrorPlatform,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function Xa(e){return{type:L.Pure,get:e}}function Qa(e,t){return Ce(function(n,r){return r},y(y({},t),{to:e}))}function Ya(e,t){return sn(function(n,r,i){return{type:Hn,data:M(e)?e(n,r,i):e}},y(y({},t),{to:Le.Parent}))}function Za(e){return{type:L.Choose,conds:e}}function qt(e,t,n,r,i,o){o===void 0&&(o=!1);var a=A(o?[[],i]:fi(i,function(d){return d.type===jt}),2),s=a[0],u=a[1],l=s.length?fr(n,r,s,t):n,c=o?[n]:void 0,f=U(u.map(function(d){var h;switch(d.type){case vt:return mi(d);case mt:var g=bi(d,l,r,e.options.delays);return _e||Ke(!P(d.delay)||typeof g.delay=="number","No delay reference for delay expression '".concat(d.delay,"' was found on machine '").concat(e.id,"'")),g;case rn:return Ei(d,l,r);case si:{var m=d,b=(h=m.conds.find(function($){var Q=pi($.cond,e.options.guards);return!Q||yi(e,Q,l,r,t)}))===null||h===void 0?void 0:h.actions;if(!b)return[];var S=A(qt(e,t,l,r,ht(de(b),e.options.actions),o),2),v=S[0],w=S[1];return l=w,c==null||c.push(l),v}case ui:{var b=d.get(l,r.data);if(!b)return[];var T=A(qt(e,t,l,r,ht(de(b),e.options.actions),o),2),_=T[0],K=T[1];return l=K,c==null||c.push(l),_}case nn:return wi(d,l,r);case jt:{l=fr(l,r,[d],t),c==null||c.push(l);break}default:var x=Ve(d,e.options.actions),E=x.exec;if(E&&c){var O=c.length-1;x=y(y({},x),{exec:function($){for(var Q=[],re=1;re<arguments.length;re++)Q[re-1]=arguments[re];E.apply(void 0,q([c[O]],A(Q),!1))}})}return x}}).filter(function(d){return!!d}));return[f,l]}const $n=Object.freeze(Object.defineProperty({__proto__:null,actionTypes:Aa,after:Ci,assign:xi,cancel:_i,choose:Za,done:nt,doneInvoke:ot,error:Be,escalate:Ya,forwardTo:Qa,getActionFunction:$t,initEvent:ft,isActionObject:Ja,log:Wa,pure:Xa,raise:vi,resolveActions:qt,resolveLog:Ei,resolveRaise:mi,resolveSend:bi,resolveStop:wi,respond:za,send:Ce,sendParent:sn,sendTo:qa,sendUpdate:Ga,start:ki,stop:Si,toActionObject:Ve,toActionObjects:ht,toActivityDefinition:an},Symbol.toStringTag,{value:"Module"}));var Gt=[],rt=function(e,t){Gt.push(e);var n=t(e);return Gt.pop(),n},es=function(e){return e(Gt[Gt.length-1])};function Ti(e){var t;return t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}},t[ke]=function(){return this},t}function ts(e,t,n,r){var i,o=gi(e.src),a=(i=t==null?void 0:t.options.services)===null||i===void 0?void 0:i[o.type],s=e.data?Bt(e.data,n,r):void 0,u=a?Oi(a,e.id,s):Ti(e.id);return u.meta=e,u}function Oi(e,t,n){var r=Ti(t);if(r.deferred=!0,Me(e)){var i=r.state=rt(void 0,function(){return(n?e.withContext(n):e).initialState});r.getSnapshot=function(){return i}}return r}function ns(e){try{return typeof e.send=="function"}catch{return!1}}function rs(e){return ns(e)&&"id"in e}function is(e){var t;return y((t={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},t[ke]=function(){return this},t),e)}var zt=function(e){return e.type==="atomic"||e.type==="final"};function We(e){return Object.keys(e.states).map(function(t){return e.states[t]}).filter(function(t){return t.type!=="history"})}function Ki(e){var t=[e];return zt(e)?t:t.concat(U(We(e).map(Ki)))}function He(e,t){var n,r,i,o,a,s,u,l,c=new Set(e),f=On(c),d=new Set(t);try{for(var h=I(d),g=h.next();!g.done;g=h.next())for(var m=g.value,b=m.parent;b&&!d.has(b);)d.add(b),b=b.parent}catch(O){n={error:O}}finally{try{g&&!g.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}var S=On(d);try{for(var v=I(d),w=v.next();!w.done;w=v.next()){var m=w.value;if(m.type==="compound"&&(!S.get(m)||!S.get(m).length))f.get(m)?f.get(m).forEach(function($){return d.add($)}):m.initialStateNodes.forEach(function($){return d.add($)});else if(m.type==="parallel")try{for(var T=(a=void 0,I(We(m))),_=T.next();!_.done;_=T.next()){var K=_.value;d.has(K)||(d.add(K),f.get(K)?f.get(K).forEach(function($){return d.add($)}):K.initialStateNodes.forEach(function($){return d.add($)}))}}catch($){a={error:$}}finally{try{_&&!_.done&&(s=T.return)&&s.call(T)}finally{if(a)throw a.error}}}}catch(O){i={error:O}}finally{try{w&&!w.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}try{for(var x=I(d),E=x.next();!E.done;E=x.next())for(var m=E.value,b=m.parent;b&&!d.has(b);)d.add(b),b=b.parent}catch(O){u={error:O}}finally{try{E&&!E.done&&(l=x.return)&&l.call(x)}finally{if(u)throw u.error}}return d}function Ii(e,t){var n=t.get(e);if(!n)return{};if(e.type==="compound"){var r=n[0];if(r){if(zt(r))return r.key}else return{}}var i={};return n.forEach(function(o){i[o.key]=Ii(o,t)}),i}function On(e){var t,n,r=new Map;try{for(var i=I(e),o=i.next();!o.done;o=i.next()){var a=o.value;r.has(a)||r.set(a,[]),a.parent&&(r.has(a.parent)||r.set(a.parent,[]),r.get(a.parent).push(a))}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function os(e,t){var n=He([e],t);return Ii(e,On(n))}function It(e,t){return Array.isArray(e)?e.some(function(n){return n===t}):e instanceof Set?e.has(t):!1}function as(e){return q([],A(new Set(U(q([],A(e.map(function(t){return t.ownEvents})),!1)))),!1)}function at(e,t){return t.type==="compound"?We(t).some(function(n){return n.type==="final"&&It(e,n)}):t.type==="parallel"?We(t).every(function(n){return at(e,n)}):!1}function ss(e){return e===void 0&&(e=[]),e.reduce(function(t,n){return n.meta!==void 0&&(t[n.id]=n.meta),t},{})}function hr(e){return new Set(U(e.map(function(t){return t.tags})))}function Pi(e,t){if(e===t)return!0;if(e===void 0||t===void 0)return!1;if(P(e)||P(t))return e===t;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(i){return Pi(e[i],t[i])})}function us(e){return typeof e!="object"||e===null?!1:"value"in e&&"_event"in e}function ls(e,t){var n=e.exec,r=y(y({},e),{exec:n!==void 0?function(){return n(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0});return r}var fe=function(){function e(t){var n=this,r;this.actions=[],this.activities=lr,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||lr,this.meta=ss(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=(r=Array.isArray(t.tags)?new Set(t.tags):t.tags)!==null&&r!==void 0?r:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return as(n.configuration)}})}return e.from=function(t,n){if(t instanceof e)return t.context!==n?new e({value:t.value,context:n,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t;var r=ft;return new e({value:t,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,n){if(t instanceof e){if(!t.actions.length)return t;var r=ft;return new e({value:t.value,context:n,_event:r,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,n)},e.prototype.toStrings=function(t,n){var r=this;if(t===void 0&&(t=this.value),n===void 0&&(n="."),P(t))return[t];var i=Object.keys(t);return i.concat.apply(i,q([],A(i.map(function(o){return r.toStrings(t[o],n).map(function(a){return o+n+a})})),!1))},e.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var n=t.tags;t.machine;var r=Fn(t,["configuration","transitions","tags","machine"]);return y(y({},r),{tags:Array.from(n)})},e.prototype.matches=function(t){return Un(t,this.value)},e.prototype.hasTag=function(t){return this.tags.has(t)},e.prototype.can=function(t){var n;_e&&Ke(!!this.machine);var r=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,t);return!!(r!=null&&r.transitions.length)&&r.transitions.some(function(i){return i.target!==void 0||i.actions.length})},e}(),cs={deferEvents:!1},pr=function(){function e(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=y(y({},cs),t)}return e.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents){this.schedule(t);return}this.process(t)}this.flushEvents()},e.prototype.schedule=function(t){if(!this.initialized||this.processingEvent){this.queue.push(t);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},e.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},e}(),yn=new Map,ds=0,wt={bookId:function(){return"x:".concat(ds++)},register:function(e,t){return yn.set(e,t),e},get:function(e){return yn.get(e)},free:function(e){yn.delete(e)}};function qn(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function fs(){var e=qn();if(e&&"__xstate__"in e)return e.__xstate__}function hs(e){if(!!qn()){var t=fs();t&&t.register(e)}}function ps(e,t){t===void 0&&(t={});var n=e.initialState,r=new Set,i=[],o=!1,a=function(){if(!o){for(o=!0;i.length>0;){var l=i.shift();n=e.transition(n,l,u),r.forEach(function(c){return c.next(n)})}o=!1}},s=is({id:t.id,send:function(l){i.push(l),a()},getSnapshot:function(){return n},subscribe:function(l,c,f){var d=Tn(l,c,f);return r.add(d),d.next(n),{unsubscribe:function(){r.delete(d)}}}}),u={parent:t.parent,self:s,id:t.id||"anonymous",observers:r};return n=e.start?e.start(u):n,s}var Kn={sync:!1,autoForward:!1},ee;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(ee||(ee={}));var ys=function(){function e(t,n){var r=this;n===void 0&&(n=e.defaultOptions),this.machine=t,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=ee.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(c,f){if(Ze(c))return r.batch(c),r.state;var d=Y(Bn(c,f));if(r.status===ee.Stopped)return r.state;if(r.status!==ee.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(d.name,'" was sent to uninitialized service "').concat(r.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(d.data)));return r.scheduler.schedule(function(){r.forward(d);var h=r.nextState(d);r.update(h,d)}),r._state},this.sendTo=function(c,f){var d=r.parent&&(f===Le.Parent||r.parent.id===f),h=d?r.parent:P(f)?r.children.get(f)||wt.get(f):Ua(f)?f:void 0;if(!h){if(!d)throw new Error("Unable to send event to child '".concat(f,"' from service '").concat(r.id,"'."));return}"machine"in h?h.send(y(y({},c),{name:c.name===Hn?"".concat(Be(r.id)):c.name,origin:r.sessionId})):h.send(c.data)};var i=y(y({},e.defaultOptions),n),o=i.clock,a=i.logger,s=i.parent,u=i.id,l=u!==void 0?u:t.id;this.id=l,this.logger=a,this.clock=o,this.parent=s,this.options=i,this.scheduler=new pr({deferEvents:this.options.deferEvents}),this.sessionId=wt.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:rt(this,function(){return t._initialState=t.machine.initialState,t._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(t,n){var r,i;try{for(var o=I(t.actions),a=o.next();!a.done;a=o.next()){var s=a.value;this.exec(s,t,n)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.update=function(t,n){var r,i,o,a,s,u,l,c,f=this;if(t._sessionid=this.sessionId,this._state=t,this.options.execute&&this.execute(this.state),this.children.forEach(function(O){f.state.children[O.id]=O}),this.devTools&&this.devTools.send(n.data,t),t.event)try{for(var d=I(this.eventListeners),h=d.next();!h.done;h=d.next()){var g=h.value;g(t.event)}}catch(O){r={error:O}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}try{for(var m=I(this.listeners),b=m.next();!b.done;b=m.next()){var g=b.value;g(t,t.event)}}catch(O){o={error:O}}finally{try{b&&!b.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}try{for(var S=I(this.contextListeners),v=S.next();!v.done;v=S.next()){var w=v.value;w(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(O){s={error:O}}finally{try{v&&!v.done&&(u=S.return)&&u.call(S)}finally{if(s)throw s.error}}var T=at(t.configuration||[],this.machine);if(this.state.configuration&&T){var _=t.configuration.find(function(O){return O.type==="final"&&O.parent===f.machine}),K=_&&_.doneData?Bt(_.doneData,t.context,n):void 0;try{for(var x=I(this.doneListeners),E=x.next();!E.done;E=x.next()){var g=E.value;g(ot(this.id,K))}}catch(O){l={error:O}}finally{try{E&&!E.done&&(c=x.return)&&c.call(x)}finally{if(l)throw l.error}}this.stop()}},e.prototype.onTransition=function(t){return this.listeners.add(t),this.status===ee.Running&&t(this.state,this.state.event),this},e.prototype.subscribe=function(t,n,r){var i=this;if(!t)return{unsubscribe:function(){}};var o,a=r;return typeof t=="function"?o=t:(o=t.next.bind(t),a=t.complete.bind(t)),this.listeners.add(o),this.status!==ee.NotStarted&&o(this.state),a&&(this.status===ee.Stopped?a():this.onDone(a)),{unsubscribe:function(){o&&i.listeners.delete(o),a&&i.doneListeners.delete(a)}}},e.prototype.onEvent=function(t){return this.eventListeners.add(t),this},e.prototype.onSend=function(t){return this.sendListeners.add(t),this},e.prototype.onChange=function(t){return this.contextListeners.add(t),this},e.prototype.onStop=function(t){return this.stopListeners.add(t),this},e.prototype.onDone=function(t){return this.doneListeners.add(t),this},e.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},e.prototype.start=function(t){var n=this;if(this.status===ee.Running)return this;this.machine._init(),wt.register(this.sessionId,this),this.initialized=!0,this.status=ee.Running;var r=t===void 0?this.initialState:rt(this,function(){return us(t)?n.machine.resolveState(t):n.machine.resolveState(fe.from(t,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(r,ft)}),this},e.prototype.stop=function(){var t,n,r,i,o,a,s,u,l,c,f=this;try{for(var d=I(this.listeners),h=d.next();!h.done;h=d.next()){var g=h.value;this.listeners.delete(g)}}catch(E){t={error:E}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}try{for(var m=I(this.stopListeners),b=m.next();!b.done;b=m.next()){var g=b.value;g(),this.stopListeners.delete(g)}}catch(E){r={error:E}}finally{try{b&&!b.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}try{for(var S=I(this.contextListeners),v=S.next();!v.done;v=S.next()){var g=v.value;this.contextListeners.delete(g)}}catch(E){o={error:E}}finally{try{v&&!v.done&&(a=S.return)&&a.call(S)}finally{if(o)throw o.error}}try{for(var w=I(this.doneListeners),T=w.next();!T.done;T=w.next()){var g=T.value;this.doneListeners.delete(g)}}catch(E){s={error:E}}finally{try{T&&!T.done&&(u=w.return)&&u.call(w)}finally{if(s)throw s.error}}if(!this.initialized)return this;q([],A(this.state.configuration),!1).sort(function(E,O){return O.order-E.order}).forEach(function(E){var O,$;try{for(var Q=I(E.definition.exit),re=Q.next();!re.done;re=Q.next()){var Ee=re.value;f.exec(Ee,f.state)}}catch(Et){O={error:Et}}finally{try{re&&!re.done&&($=Q.return)&&$.call(Q)}finally{if(O)throw O.error}}}),this.children.forEach(function(E){M(E.stop)&&E.stop()}),this.children.clear();try{for(var _=I(Object.keys(this.delayedEventsMap)),K=_.next();!K.done;K=_.next()){var x=K.value;this.clock.clearTimeout(this.delayedEventsMap[x])}}catch(E){l={error:E}}finally{try{K&&!K.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}return this.scheduler.clear(),this.scheduler=new pr({deferEvents:this.options.deferEvents}),this.initialized=!1,this.status=ee.Stopped,this._initialState=void 0,wt.free(this.sessionId),this},e.prototype.batch=function(t){var n=this;if(!(this.status===ee.NotStarted&&this.options.deferEvents)){if(this.status!==ee.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}this.scheduler.schedule(function(){var r,i,o=n.state,a=!1,s=[],u=function(d){var h=Y(d);n.forward(h),o=rt(n,function(){return n.machine.transition(o,h)}),s.push.apply(s,q([],A(o.actions.map(function(g){return ls(g,o)})),!1)),a=a||!!o.changed};try{for(var l=I(t),c=l.next();!c.done;c=l.next()){var f=c.value;u(f)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}o.changed=a,o.actions=s,n.update(o,Y(t[t.length-1]))})},e.prototype.sender=function(t){return this.send.bind(this,t)},e.prototype.nextState=function(t){var n=this,r=Y(t);if(r.name.indexOf(wn)===0&&!this.state.nextEvents.some(function(o){return o.indexOf(wn)===0}))throw r.data.data;var i=rt(this,function(){return n.machine.transition(n.state,r)});return i},e.prototype.forward=function(t){var n,r;try{for(var i=I(this.forwardTo),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.children.get(a);if(!s)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(a,"'."));s.send(t)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.defer=function(t){var n=this;this.delayedEventsMap[t.id]=this.clock.setTimeout(function(){t.to?n.sendTo(t._event,t.to):n.send(t._event)},t.delay)},e.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},e.prototype.exec=function(t,n,r){r===void 0&&(r=this.machine.options.actions);var i=n.context,o=n._event,a=t.exec||$t(t.type,r),s=M(a)?a:a?a.exec:t.exec;if(s)try{return s(i,o.data,{action:t,state:this.state,_event:o})}catch(T){throw this.parent&&this.parent.send({type:"xstate.error",data:T}),T}switch(t.type){case mt:var u=t;if(typeof u.delay=="number"){this.defer(u);return}else u.to?this.sendTo(u._event,u.to):this.send(u._event);break;case jn:this.cancel(t.sendId);break;case Ft:{if(this.status!==ee.Running)return;var l=t.activity;if(!this.state.activities[l.id||l.type])break;if(l.type===L.Invoke){var c=gi(l.src),f=this.machine.options.services?this.machine.options.services[c.type]:void 0,d=l.id,h=l.data,g="autoForward"in l?l.autoForward:!!l.forward;if(!f)return;var m=h?Bt(h,i,o):void 0;if(typeof f=="string")return;var b=M(f)?f(i,o.data,{data:m,src:c,meta:l.meta}):f;if(!b)return;var S=void 0;Me(b)&&(b=m?b.withContext(m):b,S={autoForward:g}),this.spawn(b,d,S)}else this.spawnActivity(l);break}case nn:{this.stopChild(t.activity.id);break}case rn:var v=t.label,w=t.value;v?this.logger(v,w):this.logger(w);break}},e.prototype.removeChild=function(t){var n;this.children.delete(t),this.forwardTo.delete(t),(n=this.state)===null||n===void 0||delete n.children[t]},e.prototype.stopChild=function(t){var n=this.children.get(t);!n||(this.removeChild(t),M(n.stop)&&n.stop())},e.prototype.spawn=function(t,n,r){if(dr(t))return this.spawnPromise(Promise.resolve(t),n);if(M(t))return this.spawnCallback(t,n);if(rs(t))return this.spawnActor(t,n);if(Ha(t))return this.spawnObservable(t,n);if(Me(t))return this.spawnMachine(t,y(y({},r),{id:n}));if(Fa(t))return this.spawnBehavior(t,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof t,'".'))},e.prototype.spawnMachine=function(t,n){var r=this;n===void 0&&(n={});var i=new e(t,y(y({},this.options),{parent:this,id:n.id||t.id})),o=y(y({},Kn),n);o.sync&&i.onTransition(function(s){r.send(on,{state:s,id:i.id})});var a=i;return this.children.set(i.id,a),o.autoForward&&this.forwardTo.add(i.id),i.onDone(function(s){r.removeChild(i.id),r.send(Y(s,{origin:i.id}))}).start(),a},e.prototype.spawnBehavior=function(t,n){var r=ps(t,{id:n,parent:this});return this.children.set(n,r),r},e.prototype.spawnPromise=function(t,n){var r,i=this,o=!1,a;t.then(function(u){o||(a=u,i.removeChild(n),i.send(Y(ot(n,u),{origin:n})))},function(u){if(!o){i.removeChild(n);var l=Be(n,u);try{i.send(Y(l,{origin:n}))}catch{i.devTools&&i.devTools.send(l,i.state),i.machine.strict&&i.stop()}}});var s=(r={id:n,send:function(){},subscribe:function(u,l,c){var f=Tn(u,l,c),d=!1;return t.then(function(h){d||(f.next(h),!d&&f.complete())},function(h){d||f.error(h)}),{unsubscribe:function(){return d=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return a}},r[ke]=function(){return this},r);return this.children.set(n,s),s},e.prototype.spawnCallback=function(t,n){var r,i=this,o=!1,a=new Set,s=new Set,u,l=function(d){u=d,s.forEach(function(h){return h(d)}),!o&&i.send(Y(d,{origin:n}))},c;try{c=t(l,function(d){a.add(d)})}catch(d){this.send(Be(n,d))}if(dr(c))return this.spawnPromise(c,n);var f=(r={id:n,send:function(d){return a.forEach(function(h){return h(d)})},subscribe:function(d){var h=Tn(d);return s.add(h.next),{unsubscribe:function(){s.delete(h.next)}}},stop:function(){o=!0,M(c)&&c()},toJSON:function(){return{id:n}},getSnapshot:function(){return u}},r[ke]=function(){return this},r);return this.children.set(n,f),f},e.prototype.spawnObservable=function(t,n){var r,i=this,o,a=t.subscribe(function(u){o=u,i.send(Y(u,{origin:n}))},function(u){i.removeChild(n),i.send(Y(Be(n,u),{origin:n}))},function(){i.removeChild(n),i.send(Y(ot(n),{origin:n}))}),s=(r={id:n,send:function(){},subscribe:function(u,l,c){return t.subscribe(u,l,c)},stop:function(){return a.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},r[ke]=function(){return this},r);return this.children.set(n,s),s},e.prototype.spawnActor=function(t,n){return this.children.set(n,t),t},e.prototype.spawnActivity=function(t){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(!!n){var r=n(this.state.context,t);this.spawnEffect(t.id,r)}},e.prototype.spawnEffect=function(t,n){var r;this.children.set(t,(r={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}},r[ke]=function(){return this},r))},e.prototype.attachDev=function(){var t=qn();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect(y(y({name:this.id,autoPause:!0,stateSanitizer:function(r){return{value:r.value,context:r.context,actions:r.actions}}},n),{features:y({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}hs(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[ke]=function(){return this},e.prototype.getSnapshot=function(){return this.status===ee.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,n){return setTimeout(t,n)},clearTimeout:function(t){return clearTimeout(t)}},logger:console.log.bind(console),devTools:!1},e.interpret=Ai,e}(),gs=function(e){return P(e)?y(y({},Kn),{name:e}):y(y(y({},Kn),{name:Ba()}),e)};function Ie(e,t){var n=gs(t);return es(function(r){return r?r.spawn(e,n.name,n):Oi(e,n.name)})}function Ai(e,t){var n=new ys(e,t);return n}function vs(e){if(typeof e=="string"){var t={type:e};return t.toString=function(){return e},t}return e}function xt(e){return y(y({type:Ht},e),{toJSON:function(){e.onDone,e.onError;var t=Fn(e,["onDone","onError"]);return y(y({},t),{type:Ht,src:vs(e.src)})}})}var Ue="",In="#",et="*",Fe={},je=function(e){return e[0]===In},ms=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},bs=function(e,t,n){var r=n.slice(0,-1).some(function(o){return!("cond"in o)&&!("in"in o)&&(P(o.target)||Me(o.target))}),i=t===Ue?"the transient event":"event '".concat(t,"'");Ke(!r,"One or more transitions for ".concat(i," on state '").concat(e.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},Es=function(){function e(t,n,r,i){var o=this;r===void 0&&(r="context"in t?t.context:void 0);var a;this.config=t,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(ms(),n),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:li),this.id=this.config.id||q([this.machine.key],A(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(a=this.config.schema)!==null&&a!==void 0?a:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?tt(this.config.states,function(l,c){var f,d=new e(l,{},void 0,{parent:o,key:c});return Object.assign(o.idMap,y((f={},f[d.id]=d,f),d.idMap)),d}):Fe;var s=0;function u(l){var c,f;l.order=s++;try{for(var d=I(We(l)),h=d.next();!h.done;h=d.next()){var g=h.value;u(g)}}catch(m){c={error:m}}finally{try{h&&!h.done&&(f=d.return)&&f.call(d)}finally{if(c)throw c.error}}}u(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(l){var c=l.event;return c===Ue}):Ue in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=de(this.config.entry||this.config.onEntry).map(function(l){return Ve(l)}),this.onExit=de(this.config.exit||this.config.onExit).map(function(l){return Ve(l)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=de(this.config.invoke).map(function(l,c){var f,d;if(Me(l)){var h=St(o.id,c);return o.machine.options.services=y((f={},f[h]=l,f),o.machine.options.services),xt({src:h,id:h})}else if(P(l.src)){var h=l.id||St(o.id,c);return xt(y(y({},l),{id:h,src:l.src}))}else if(Me(l.src)||M(l.src)){var h=l.id||St(o.id,c);return o.machine.options.services=y((d={},d[h]=l.src,d),o.machine.options.services),xt(y(y({id:h},l),{src:h}))}else{var g=l.src;return xt(y(y({id:St(o.id,c)},l),{src:g}))}}),this.activities=de(this.config.activities).concat(this.invoke).map(function(l){return an(l)}),this.transition=this.transition.bind(this),this.tags=de(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||Ki(this).forEach(function(t){return t.on})},e.prototype.withConfig=function(t,n){var r=this.options,i=r.actions,o=r.activities,a=r.guards,s=r.services,u=r.delays;return new e(this.config,{actions:y(y({},i),t.actions),activities:y(y({},o),t.activities),guards:y(y({},a),t.guards),services:y(y({},s),t.services),delays:y(y({},u),t.delays)},n!=null?n:this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return M(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:tt(this.states,function(t){return t.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce(function(n,r){return n[r.eventType]=n[r.eventType]||[],n[r.eventType].push(r),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var n=t===Ue,r=this.transitions.filter(function(i){var o=i.eventType===t;return n?o:o||i.eventType===et});return this.__cache.candidates[t]=r,r},e.prototype.getDelayedTransitions=function(){var t=this,n=this.config.after;if(!n)return[];var r=function(o,a){var s=M(o)?"".concat(t.id,":delay[").concat(a,"]"):o,u=Ci(s,t.id);return t.onEntry.push(Ce(u,{delay:o})),t.onExit.push(_i(u)),u},i=Ze(n)?n.map(function(o,a){var s=r(o.delay,a);return y(y({},o),{event:s})}):U(Object.keys(n).map(function(o,a){var s=n[o],u=P(s)?{target:s}:s,l=isNaN(+o)?o:+o,c=r(l,a);return de(u).map(function(f){return y(y({},f),{event:c,delay:l})})}));return i.map(function(o){var a=o.delay;return y(y({},t.formatTransition(o)),{delay:a})})},e.prototype.getStateNodes=function(t){var n,r=this;if(!t)return[];var i=t instanceof fe?t.value:it(t,this.delimiter);if(P(i)){var o=this.getStateNode(i).initial;return o!==void 0?this.getStateNodes((n={},n[i]=o,n)):[this,this.states[i]]}var a=Object.keys(i),s=[this];return s.push.apply(s,q([],A(U(a.map(function(u){return r.getStateNode(u).getStateNodes(i[u])}))),!1)),s},e.prototype.handles=function(t){var n=ci(t);return this.events.includes(n)},e.prototype.resolveState=function(t){var n=t instanceof fe?t:fe.create(t),r=Array.from(He([],this.getStateNodes(n.value)));return new fe(y(y({},n),{value:this.resolve(n.value),configuration:r,done:at(r,this),tags:hr(r),machine:this.machine}))},e.prototype.transitionLeafNode=function(t,n,r){var i=this.getStateNode(t),o=i.next(n,r);return!o||!o.transitions.length?this.next(n,r):o},e.prototype.transitionCompoundNode=function(t,n,r){var i=Object.keys(t),o=this.getStateNode(i[0]),a=o._transition(t[i[0]],n,r);return!a||!a.transitions.length?this.next(n,r):a},e.prototype.transitionParallelNode=function(t,n,r){var i,o,a={};try{for(var s=I(Object.keys(t)),u=s.next();!u.done;u=s.next()){var l=u.value,c=t[l];if(!!c){var f=this.getStateNode(l),d=f._transition(c,n,r);d&&(a[l]=d)}}}catch(v){i={error:v}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}var h=Object.keys(a).map(function(v){return a[v]}),g=U(h.map(function(v){return v.transitions})),m=h.some(function(v){return v.transitions.length>0});if(!m)return this.next(n,r);var b=U(h.map(function(v){return v.entrySet})),S=U(Object.keys(a).map(function(v){return a[v].configuration}));return{transitions:g,entrySet:b,exitSet:U(h.map(function(v){return v.exitSet})),configuration:S,source:n,actions:U(Object.keys(a).map(function(v){return a[v].actions}))}},e.prototype._transition=function(t,n,r){return P(t)?this.transitionLeafNode(t,n,r):Object.keys(t).length===1?this.transitionCompoundNode(t,n,r):this.transitionParallelNode(t,n,r)},e.prototype.getTransitionData=function(t,n){return this._transition(t.value,t,Y(n))},e.prototype.next=function(t,n){var r,i,o=this,a=n.name,s=[],u=[],l;try{for(var c=I(this.getCandidates(a)),f=c.next();!f.done;f=c.next()){var d=f.value,h=d.cond,g=d.in,m=t.context,b=g?P(g)&&je(g)?t.matches(it(this.getStateNodeById(g).path,this.delimiter)):Un(it(g,this.delimiter),Ma(this.path.slice(0,-2))(t.value)):!0,S=!1;try{S=!h||yi(this.machine,h,m,n,t)}catch(_){throw new Error("Unable to evaluate guard '".concat(h.name||h.type,"' in transition for event '").concat(a,"' in state node '").concat(this.id,`':
`).concat(_.message))}if(S&&b){d.target!==void 0&&(u=d.target),s.push.apply(s,q([],A(d.actions),!1)),l=d;break}}}catch(_){r={error:_}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}if(!!l){if(!u.length)return{transitions:[l],entrySet:[],exitSet:[],configuration:t.value?[this]:[],source:t,actions:s};var v=U(u.map(function(_){return o.getRelativeStateNodes(_,t.historyValue)})),w=!!l.internal,T=w?[]:U(v.map(function(_){return o.nodesFromChild(_)}));return{transitions:[l],entrySet:T,exitSet:w?[]:[this],configuration:v,source:t,actions:s}}},e.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];for(var n=[],r=t;r&&r!==this;)n.push(r),r=r.parent;return n.push(this),n},e.prototype.escapes=function(t){if(this===t)return!1;for(var n=this.parent;n;){if(n===t)return!1;n=n.parent}return!0},e.prototype.getActions=function(t,n,r,i){var o,a,s,u,l=He([],i?this.getStateNodes(i.value):[this]),c=t.configuration.length?He(l,t.configuration):l;try{for(var f=I(c),d=f.next();!d.done;d=f.next()){var h=d.value;It(l,h)||t.entrySet.push(h)}}catch(x){o={error:x}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}try{for(var g=I(l),m=g.next();!m.done;m=g.next()){var h=m.value;(!It(c,h)||It(t.exitSet,h.parent))&&t.exitSet.push(h)}}catch(x){s={error:x}}finally{try{m&&!m.done&&(u=g.return)&&u.call(g)}finally{if(s)throw s.error}}var b=U(t.entrySet.map(function(x){var E=[];if(x.type!=="final")return E;var O=x.parent;if(!O.parent)return E;E.push(nt(x.id,x.doneData),nt(O.id,x.doneData?Bt(x.doneData,n,r):void 0));var $=O.parent;return $.type==="parallel"&&We($).every(function(Q){return at(t.configuration,Q)})&&E.push(nt($.id)),E}));t.exitSet.sort(function(x,E){return E.order-x.order}),t.entrySet.sort(function(x,E){return x.order-E.order});var S=new Set(t.entrySet),v=new Set(t.exitSet),w=A([U(Array.from(S).map(function(x){return q(q([],A(x.activities.map(function(E){return ki(E)})),!1),A(x.onEntry),!1)})).concat(b.map(vi)),U(Array.from(v).map(function(x){return q(q([],A(x.onExit),!1),A(x.activities.map(function(E){return Si(E)})),!1)}))],2),T=w[0],_=w[1],K=ht(_.concat(t.actions).concat(T),this.machine.options.actions);return K},e.prototype.transition=function(t,n,r){t===void 0&&(t=this.initialState);var i=Y(n),o;if(t instanceof fe)o=r===void 0?t:this.resolveState(fe.from(t,r));else{var a=P(t)?this.resolve(Ut(this.getResolvedPath(t))):this.resolve(t),s=r!=null?r:this.machine.context;o=this.resolveState(fe.from(a,s))}if(!_e&&i.name===et)throw new Error("An event cannot have the wildcard type ('".concat(et,"')"));if(this.strict&&!this.events.includes(i.name)&&!Na(i.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(i.name,"'"));var u=this._transition(o.value,o,i)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:o,actions:[]},l=He([],this.getStateNodes(o.value)),c=u.configuration.length?He(l,u.configuration):l;return u.configuration=q([],A(c),!1),this.resolveTransition(u,o,o.context,i)},e.prototype.resolveRaisedTransition=function(t,n,r){var i,o=t.actions;return t=this.transition(t,n),t._event=r,t.event=r.data,(i=t.actions).unshift.apply(i,q([],A(o),!1)),t},e.prototype.resolveTransition=function(t,n,r,i){var o,a,s=this;i===void 0&&(i=ft);var u=t.configuration,l=!n||t.transitions.length>0,c=l?os(this.machine,u):void 0,f=n?n.historyValue?n.historyValue:t.source?this.machine.historyValue(n.value):void 0:void 0,d=this.getActions(t,r,i,n),h=n?y({},n.activities):{};try{for(var g=I(d),m=g.next();!m.done;m=g.next()){var b=m.value;b.type===Ft?h[b.activity.id||b.activity.type]=b:b.type===nn&&(h[b.activity.id||b.activity.type]=!1)}}catch(ie){o={error:ie}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(o)throw o.error}}var S=A(qt(this,n,r,i,d,this.machine.config.preserveActionOrder),2),v=S[0],w=S[1],T=A(fi(v,function(ie){return ie.type===vt||ie.type===mt&&ie.to===Le.Internal}),2),_=T[0],K=T[1],x=v.filter(function(ie){var Re;return ie.type===Ft&&((Re=ie.activity)===null||Re===void 0?void 0:Re.type)===Ht}),E=x.reduce(function(ie,Re){return ie[Re.activity.id]=ts(Re.activity,s.machine,w,i),ie},n?y({},n.children):{}),O=l?t.configuration:n?n.configuration:[],$=at(O,this),Q=new fe({value:c||n.value,context:w,_event:i,_sessionid:n?n._sessionid:null,historyValue:c?f?ja(f,c):void 0:n?n.historyValue:void 0,history:!c||t.source?n:void 0,actions:c?K:[],activities:c?h:n?n.activities:{},events:[],configuration:O,transitions:t.transitions,children:E,done:$,tags:hr(O),machine:this}),re=r!==w;Q.changed=i.name===on||re;var Ee=Q.history;Ee&&delete Ee.history;var Et=!$&&(this._transient||u.some(function(ie){return ie._transient}));if(!l&&(!Et||i.name===Ue))return Q;var le=Q;if(!$)for(Et&&(le=this.resolveRaisedTransition(le,{type:oi},i));_.length;){var co=_.shift();le=this.resolveRaisedTransition(le,co._event,i)}var fo=le.changed||(Ee?!!le.actions.length||re||typeof Ee.value!=typeof le.value||!Pi(le.value,Ee.value):void 0);return le.changed=fo,le.history=Ee,le},e.prototype.getStateNode=function(t){if(je(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[t];if(!n)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return n},e.prototype.getStateNodeById=function(t){var n=je(t)?t.slice(In.length):t;if(n===this.id)return this;var r=this.machine.idMap[n];if(!r)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return r},e.prototype.getStateNodeByPath=function(t){if(typeof t=="string"&&je(t))try{return this.getStateNodeById(t.slice(1))}catch{}for(var n=Cn(t,this.delimiter).slice(),r=this;n.length;){var i=n.shift();if(!i.length)break;r=r.getStateNode(i)}return r},e.prototype.resolve=function(t){var n,r=this;if(!t)return this.initialStateValue||Fe;switch(this.type){case"parallel":return tt(this.initialStateValue,function(o,a){return o?r.getStateNode(a).resolve(t[a]||o):Fe});case"compound":if(P(t)){var i=this.getStateNode(t);return i.type==="parallel"||i.type==="compound"?(n={},n[t]=i.initialStateValue,n):t}return Object.keys(t).length?tt(t,function(o,a){return o?r.getStateNode(a).resolve(o):Fe}):this.initialStateValue||{};default:return t||Fe}},e.prototype.getResolvedPath=function(t){if(je(t)){var n=this.machine.idMap[t.slice(In.length)];if(!n)throw new Error("Unable to find state node '".concat(t,"'"));return n.path}return Cn(t,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=cr(this.states,function(r){return r.initialStateValue||Fe},function(r){return r.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=zt(this.states[this.initial])?this.initial:(t={},t[this.initial]=this.states[this.initial].initialStateValue,t)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(t,n){this._init();var r=this.getStateNodes(t);return this.resolveTransition({configuration:r,entrySet:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n!=null?n:this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var t;if(this.type==="history"){var n=this.config;P(n.target)?t=je(n.target)?Ut(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:t=n.target}return t},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(t,n,r){return r===void 0&&(r=!0),r?t.type==="history"?t.resolveHistory(n):t.initialStateNodes:[t]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var t=this;if(zt(this))return[this];if(this.type==="compound"&&!this.initial)return _e||Ke(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var n=Kt(this.initialStateValue);return U(n.map(function(r){return t.getFromRelativePath(r)}))},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var n=A(t),r=n[0],i=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var o=this.getStateNode(r);if(o.type==="history")return o.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(i)},e.prototype.historyValue=function(t){if(!!Object.keys(this.states).length)return{current:t||this.initialStateValue,states:cr(this.states,function(n,r){if(!t)return n.historyValue();var i=P(t)?void 0:t[r];return n.historyValue(i||n.initialStateValue)},function(n){return!n.history})}},e.prototype.resolveHistory=function(t){var n=this;if(this.type!=="history")return[this];var r=this.parent;if(!t){var i=this.target;return i?U(Kt(i).map(function(a){return r.getFromRelativePath(a)})):r.initialStateNodes}var o=Ra(r.path,"states")(t).current;return P(o)?[r.getStateNode(o)]:U(Kt(o).map(function(a){return n.history==="deep"?r.getFromRelativePath(a):[r.states[a[0]]]}))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var t=this,n=U(Object.keys(this.states).map(function(r){return t.states[r].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var t,n,r,i;if(this.__cache.events)return this.__cache.events;var o=this.states,a=new Set(this.ownEvents);if(o)try{for(var s=I(Object.keys(o)),u=s.next();!u.done;u=s.next()){var l=u.value,c=o[l];if(c.states)try{for(var f=(r=void 0,I(c.events)),d=f.next();!d.done;d=f.next()){var h=d.value;a.add("".concat(h))}}catch(g){r={error:g}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}}catch(g){t={error:g}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(a)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(t)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(t){var n=this;if(t!==void 0)return t.map(function(r){if(!P(r))return r;var i=r[0]===n.delimiter;if(i&&!n.parent)return n.getStateNodeByPath(r.slice(1));var o=i?n.key+r:r;if(n.parent)try{var a=n.parent.getStateNodeByPath(o);return a}catch(s){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(s.message))}else return n.getStateNodeByPath(o)})},e.prototype.formatTransition=function(t){var n=this,r=$a(t.target),i="internal"in t?t.internal:r?r.some(function(u){return P(u)&&u[0]===n.delimiter}):!0,o=this.machine.options.guards,a=this.resolveTarget(r),s=y(y({},t),{actions:ht(de(t.actions)),cond:pi(t.cond,o),target:a,source:this,internal:i,eventType:t.event,toJSON:function(){return y(y({},s),{target:s.target?s.target.map(function(u){return"#".concat(u.id)}):void 0,source:"#".concat(n.id)})}});return s},e.prototype.formatTransitions=function(){var t,n,r=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var o=this.config.on,a=et,s=o[a],u=s===void 0?[]:s,l=Fn(o,[typeof a=="symbol"?a:a+""]);i=U(Object.keys(l).map(function(v){!_e&&v===Ue&&Ke(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(r.id,'".'));var w=Ne(v,l[v]);return _e||bs(r,v,w),w}).concat(Ne(et,u)))}var c=this.config.always?Ne("",this.config.always):[],f=this.config.onDone?Ne(String(nt(this.id)),this.config.onDone):[];_e||Ke(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var d=U(this.invoke.map(function(v){var w=[];return v.onDone&&w.push.apply(w,q([],A(Ne(String(ot(v.id)),v.onDone)),!1)),v.onError&&w.push.apply(w,q([],A(Ne(String(Be(v.id)),v.onError)),!1)),w})),h=this.after,g=U(q(q(q(q([],A(f),!1),A(d),!1),A(i),!1),A(c),!1).map(function(v){return de(v).map(function(w){return r.formatTransition(w)})}));try{for(var m=I(h),b=m.next();!b.done;b=m.next()){var S=b.value;g.push(S)}}catch(v){t={error:v}}finally{try{b&&!b.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}return g},e}();function Gn(e,t,n){return n===void 0&&(n=e.context),new Es(e,t,n)}var N=xi,Te=Ce,$e=sn,Pn;(function(e){e[e.Effect=1]="Effect",e[e.LayoutEffect=2]="LayoutEffect"})(Pn||(Pn={}));var Oe=k.exports.useLayoutEffect;function An(e){var t=k.exports.useRef();return t.current||(t.current={v:e()}),t.current.v}var _s=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},ks=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Ss(e,t){var n,r,i=_s([[],[]],2),o=i[0],a=i[1];try{for(var s=ks(e),u=s.next();!u.done;u=s.next()){var l=u.value;t(l)?o.push(l):a.push(l)}}catch(c){n={error:c}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return[o,a]}var Pt=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},yr=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Pt(arguments[t]));return e};function gr(e,t){var n=e.exec,r=n(t.context,t._event.data,{action:e,state:t,_event:t._event});r()}function ws(e){var t=k.exports.useRef([]),n=k.exports.useRef([]);Oe(function(){var r=e.subscribe(function(i){var o,a;if(i.actions.length){var s=i.actions.filter(function(f){return typeof f.exec=="function"&&"__effect"in f.exec}),u=Pt(Ss(s,function(f){return f.exec.__effect===Pn.Effect}),2),l=u[0],c=u[1];(o=t.current).push.apply(o,yr(l.map(function(f){return[f,i]}))),(a=n.current).push.apply(a,yr(c.map(function(f){return[f,i]})))}});return function(){r.unsubscribe()}},[]),Oe(function(){for(;n.current.length;){var r=Pt(n.current.shift(),2),i=r[0],o=r[1];gr(i,o)}}),k.exports.useEffect(function(){for(;t.current.length;){var r=Pt(t.current.shift(),2),i=r[0],o=r[1];gr(i,o)}})}var st=globalThis&&globalThis.__assign||function(){return st=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},st.apply(this,arguments)},xs=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};globalThis&&globalThis.__read;function Cs(e,t,n){if(typeof e=="object")return e;var r=function(){};return{next:e,error:t||r,complete:n||r}}function Ts(e,t,n){t===void 0&&(t={});var r=An(function(){return typeof e=="function"?e():e}),i=t.context,o=t.guards,a=t.actions,s=t.activities,u=t.services,l=t.delays,c=t.state,f=xs(t,["context","guards","actions","activities","services","delays","state"]),d=An(function(){var h={context:i,guards:o,actions:a,activities:s,services:u,delays:l},g=r.withConfig(h,st(st({},r.context),i));return Ai(g,st({deferEvents:!0},f))});return Oe(function(){var h;return n&&(h=d.subscribe(Cs(n))),function(){h==null||h.unsubscribe()}},[n]),Oe(function(){return d.start(c?fe.create(c):void 0),function(){d.stop()}},[]),Oe(function(){Object.assign(d.machine.options.actions,a)},[a]),Oe(function(){Object.assign(d.machine.options.services,u)},[u]),ws(d),d}var Di=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};globalThis&&globalThis.__spread;function Os(e,t){t===void 0&&(t={});var n=k.exports.useCallback(function(s){var u=s.changed===void 0&&Object.keys(s.children).length;(s.changed||u)&&a(s)},[]),r=Ts(e,t,n),i=Di(k.exports.useState(function(){var s=r.machine.initialState;return t.state?fe.create(t.state):s}),2),o=i[0],a=i[1];return[o,r.send,r]}var Ks=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function Is(e){return"state"in e}function Ps(e){return"deferred"in e}var vr=function(){};function As(e,t){t===void 0&&(t=function(u){return Is(u)?u.state:void 0});var n=k.exports.useRef(e),r=k.exports.useRef([]),i=Ks(k.exports.useState(function(){return t(e)}),2),o=i[0],a=i[1],s=An(function(){return function(u){var l=n.current;Ps(l)&&l.deferred?r.current.push(u):l.send(u)}});return Oe(function(){n.current=e,a(t(e));for(var u=e.subscribe({next:function(c){return a(c)},error:vr,complete:vr});r.current.length>0;){var l=r.current.shift();e.send(l)}return function(){u.unsubscribe()}},[e]),[o,s]}var Ds=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function Ls(e){return("status"in e?e.status:e._status)!==0?e.state:e.machine.initialState}function Je(e){var t=Ds(As(e,Ls),1),n=t[0];return[n,e.send]}var Li={exports:{}};function At(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?At=function(t){return typeof t}:At=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(e)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return t&&mr(e.prototype,t),n&&mr(e,n),e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vt(){return Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vt.apply(this,arguments)}function ue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){J(e,i,n[i])})}return e}function ye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},z(e)}function pt(e,t){return pt=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},pt(e,t)}function Ms(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Dt(e,t,n){return Ms()?Dt=Reflect.construct:Dt=function(i,o,a){var s=[null];s.push.apply(s,o);var u=Function.bind.apply(i,s),l=new u;return a&&pt(l,a.prototype),l},Dt.apply(null,arguments)}function Rs(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Dn(e){var t=typeof Map=="function"?new Map:void 0;return Dn=function(r){if(r===null||!Rs(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return Dt(r,arguments,z(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),pt(i,r)},Dn(e)}function Ns(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function bt(e,t){if(e==null)return{};var n=Ns(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function V(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e,t){return t&&(typeof t=="object"||typeof t=="function")?t:V(e)}function Fs(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=z(e),e!==null););return e}function ve(e,t,n){return typeof Reflect<"u"&&Reflect.get?ve=Reflect.get:ve=function(i,o,a){var s=Fs(i,o);if(!!s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},ve(e,t,n||e)}function te(e){return js(e)||Hs(e)||Us()}function js(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function Hs(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function Us(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Xe(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return e.reduce(function(n,r){return n[r]=t||{value:r},n},{})}var Mi={logLevel:"warn",defaultKeyEvent:"keydown",defaultComponent:"div",defaultTabIndex:"-1",ignoreTags:["input","select","textarea"],enableHardSequences:!1,ignoreKeymapAndHandlerChangesByDefault:!0,ignoreEventsCondition:function(t){var n=t.target;if(n&&n.tagName){var r=n.tagName.toLowerCase();return F.option("_ignoreTagsDict")[r]||n.isContentEditable}return!1},ignoreRepeatedEventsWhenKeyHeldDown:!0,simulateMissingKeyPressEvents:!0,stopEventPropagationAfterHandling:!0,stopEventPropagationAfterIgnoring:!0,allowCombinationSubmatches:!1,customKeyCodes:{}},ut=ue({},Mi);ut._ignoreTagsDict=Xe(ut.ignoreTags,!0);var F=function(){function e(){H(this,e)}return j(e,null,[{key:"init",value:function(n){var r=this,i=n.ignoreTags,o=n.customKeyCodes;i&&(n._ignoreTagsDict=Xe(n.ignoreTags)),o&&(n._customKeyNamesDict=Xe(Object.values(n.customKeyCodes))),["verbose","debug","info"].indexOf(n.logLevel)!==-1&&console.warn("React HotKeys: You have requested log level '".concat(n.logLevel,"' but for performance reasons, logging below severity level 'warning' is disabled in production. Please use the development build for complete logs.")),Object.keys(n).forEach(function(a){r.set(a,n[a])})}},{key:"set",value:function(n,r){ut[n]=r}},{key:"reset",value:function(n){ut[n]=Mi[n]}},{key:"option",value:function(n){return ut[n]}}]),e}(),pe=function(){function e(){var t=this,n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"warn";if(H(this,e),J(this,"verbose",this.noop),J(this,"debug",this.noop),J(this,"info",this.noop),J(this,"warn",this.noop),J(this,"error",this.noop),this.logLevel=this.constructor.levels[n],this.logLevel>=this.constructor.levels.error)this.error=console.error;else return;if(this.logLevel>=this.constructor.levels.warn)this.warn=console.warn;else return;["info","debug","verbose"].some(function(r){return!(t.logLevel>=t.constructor.levels[r])||(t[r]=console.log,!1)})}return j(e,[{key:"noop",value:function(){}}]),e}();J(pe,"logIcons",["\u{1F4D5}","\u{1F4D7}","\u{1F4D8}","\u{1F4D9}"]),J(pe,"componentIcons",["\u{1F53A}","\u2B50\uFE0F","\u{1F537}","\u{1F536}","\u2B1B\uFE0F"]),J(pe,"eventIcons",["\u2764\uFE0F","\u{1F49A}","\u{1F499}","\u{1F49B}","\u{1F49C}","\u{1F9E1}"]),J(pe,"levels",{none:0,error:1,warn:2,info:3,debug:4,verbose:5});var C={keydown:0,keypress:1,keyup:2},gn={Shift:["shiftKey"],Meta:["metaKey"],Control:["ctrlKey"],Alt:["altKey"]},Ri={"`":["~"],1:["!"],2:["@",'"'],3:["#","\xA3"],4:["$"],5:["%"],6:["^"],7:["&"],8:["*"],9:["("],0:[")"],"-":["_"],"=":["plus"],";":[":"],"'":['"',"@"],",":["<"],".":[">"],"/":["?"],"\\":["|"],"[":["{"],"]":["}"],"#":["~"]};function zn(e){return Ri[e]||[e.length===1?e.toUpperCase():e]}function ae(e,t){return e.hasOwnProperty(t)}function un(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(n,r){var i=e[r];return i.forEach(function(o){ae(n,o)||(n[o]=[]),n[o].push(r)}),t.includeOriginal&&(!ae(n,r)&&(n[r]=[]),n[r]=[].concat(te(n[r]),te(i))),n},{})}var Bs=un(Ri);function ln(e){return Bs[e]||[e.length===1?e.toLowerCase():e]}var $s={},Ni=un($s,{includeOriginal:!0});function Fi(e){return typeof e=="string"}function qs(e){return Fi(e)?e.trim().replace(/\s+/g," "):e}var Gs={tab:"Tab",capslock:"CapsLock",shift:"Shift",meta:"Meta",alt:"Alt",ctrl:"Control",space:" ",spacebar:" ",escape:"Escape",esc:"Escape",left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown",return:"Enter",del:"Delete",command:"Meta",option:"Alt",enter:"Enter",backspace:"Backspace",ins:"Insert",pageup:"PageUp",pagedown:"PageDown",end:"End",home:"Home",contextmenu:"ContextMenu",numlock:"Clear"},zs={cmd:"Meta"};function ji(e){var t=e.toLowerCase();return Gs[t]||zs[t]||(e.match(/^f\d+$/)?e.toUpperCase():e)}var Hi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vs=Xe(Object.values(Hi),!0);function Ui(e){return!!Vs[e]}function Ws(e){return F.option("_customKeyNamesDict")[e]}function Bi(e){return Ui(e)||String.fromCharCode(e.charCodeAt(0))===e||Ws(e)}var $i=function(e){function t(){var n,r;H(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=ge(this,(n=z(t)).call.apply(n,[this].concat(o))),J(V(V(r)),"name","InvalidKeyNameError"),r}return ye(t,e),t}(Dn(Error));function br(e){return e.sort().join("+")}var qi=function(){function e(){H(this,e)}return j(e,null,[{key:"parse",value:function(n){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i=qs(n),o=i.split(" ");try{var a=o.slice(0,o.length-1),s=o[o.length-1],u=a.map(function(d){var h=Er(d,r);return br(Object.keys(h))}).join(" "),l=Er(s,r),c=br(Object.keys(l)),f={id:c,keyDictionary:l,keyEventType:r.keyEventType,size:Object.keys(l).length};return{sequence:{prefix:u,size:a.length+1},combination:f}}catch{return{sequence:null,combination:null}}}}]),e}();function Er(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return e.replace(/^\+|(\s|[^+]\+)\+/,"$1plus").split("+").reduce(function(n,r){var i=ji(r);if(t.ensureValidKeys&&!Bi(i))throw new $i;return n[i]=!0,n},{})}var Gi={"`":["`"],1:["\xA1"],2:["\u2122"],3:["\xA3"],4:["\xA2"],5:["\u221E"],6:["\xA7"],7:["\xB6"],8:["\u2022"],9:["\xAA"],0:["\xBA"],"-":["\u2013"],"=":["\u2260"],a:["\xE5"],b:["\u222B"],c:["\xE7"],d:["\u2202"],e:["\xB4"],f:["\u0192"],g:["\xA9"],h:["\u02D9"],i:["\u02C6"],j:["\u2206"],k:["\u02DA"],l:["\xAC"],m:["\xB5"],n:["\u02DC"],o:["\xF8"],p:["\u03C0"],q:["\u0153"],r:["\xAE"],s:["\xDF"],t:["\u2020"],u:["\xA8"],v:["\u221A"],w:["\u2211"],x:["\u2248"],y:["\xA5"],z:["\u03A9"],"[":["\u201C"],"]":["\u2018"],"\\":["\xAB"],"'":["\xE6"],";":["\u2026"],",":["\u2264"],".":["\u2265"],"/":["\xF7"]},Js=un(Gi);function Vn(e){return Js[e]||[e]}function Wn(e){return Gi[e]||[e]}var zi={"`":["`"],1:["\u2044"],2:["\u20AC"],3:["\u2039"],4:["\u203A"],5:["\uFB01"],6:["\uFB02"],7:["\u2021"],8:["\xB0"],9:["\xB7"],0:["\u201A"],"-":["\u2014"],"=":["\xB1"],a:["\xC5"],b:["\u0131"],c:["\xC7"],d:["\xCE"],e:["\xB4"],f:["\xCF"],g:["\u02DD"],h:["\xD3"],i:["\u02C6"],j:["\xD4"],k:["\uF8FF"],l:["\xD2"],m:["\xC2"],n:["\u02DC"],o:["\xD8"],p:["\u03C0"],q:["\u0152"],r:["\u2030"],s:["\xCD"],t:["\xCE"],u:["\xA8"],v:["\u25CA"],w:["\u201E"],x:["\u02DB"],y:["\xC1"],z:["\xB8"],"[":["\u201D"],"]":["\u2019"],"\\":["\xBB"],"'":["\xC6"],";":["\xDA"],",":["\xAF"],".":["\u02D8"]},Xs=un(zi);function Jn(e){return Xs[e]||ln(e)}function Xn(e){return zi[e]||[e]}var cn=function(){function e(){H(this,e)}return j(e,null,[{key:"serialize",value:function(n){var r=n.Shift,i=n.Alt,o={},a=Object.keys(n).sort();return a.forEach(function(s){var u=[];if(r)if(i){var l=Jn(s),c=Xn(s);u=[].concat(te(u),[s],te(l),te(c))}else{var f=ln(s),d=zn(s);u=[].concat(te(u),[s],te(f),te(d))}else if(i){var h=Vn(s),g=Wn(s);u=[].concat(te(u),[s],te(h),te(g))}else{u.push(s);var m=Ni[s];m&&(u=[].concat(te(u),te(m)))}var b=Object.keys(o);0<b.length?b.forEach(function(S){u.forEach(function(v){o[S+"+".concat(v)]=ue({},o[S],J({},v,!0))}),delete o[S]}):u.forEach(function(S){o[S]=J({},S,!0)})}),Object.values(o).map(function(s){return Object.keys(s).sort().join("+")})}},{key:"isValidKeySerialization",value:function(n){return 0<n.length&&!!qi.parse(n,{ensureValidKeys:!0}).combination}}]),e}(),_r={previous:0,current:1};function Qs(e){return Ni[e]||[e]}function Ys(e){if(e.Shift)return e.Alt?[Xn,Jn]:[zn,ln];if(e.Alt)return[Wn,Vn];var t=function(n){return[n]};return[t,t]}function se(e){return typeof e>"u"}var me={unseen:0,seen:1,simulated:2},Se=function(){function e(){H(this,e)}return j(e,null,[{key:"newRecord",value:function(n,r){var i=[me.unseen,me.unseen,me.unseen];if(!se(n))for(var o=0;o<=n;o++)i[o]=r;return i}},{key:"setBit",value:function(n,r,i){return n[r]=i,n}},{key:"clone",value:function(n){for(var r=this.newRecord(),i=0;i<n.length;i++)r[i]=n[i];return r}}]),e}();function xe(e){return!Array.isArray(e)&&At(e)==="object"&&e!==null}function lt(e){return xe(e)?Object.keys(e).length===0:!e||e.length===0}function Vi(e){return xe(e)?Object.keys(e).length:e.length}var Lt=function(){function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};H(this,e),this._keys=t,this._includesKeyUp=!1,this._update()}return j(e,[{key:"getIds",value:function(){return this._ids}},{key:"getKeyAliases",value:function(){return this._keyAliases}},{key:"getNormalizedKeyName",value:function(n){var r=this._keys[n];if(r)return n;var i=this._keyAliases[n];return i||n}},{key:"getNumberOfKeys",value:function(){return Vi(this._keys)}},{key:"any",value:function(){return 0<Object.keys(this._getKeyStates()).length}},{key:"isEnding",value:function(){return this._includesKeyUp}},{key:"hasEnded",value:function(){return lt(this.keysStillPressedDict())}},{key:"addKey",value:function(n,r){this._setKeyState(n,[Se.newRecord(),Se.newRecord(C.keydown,r)])}},{key:"setKeyState",value:function(n,r,i){var o=this._getKeyState(n);if(this.isKeyIncluded(n)){var a=Se.clone(o[1]),s=Se.clone(a);Se.setBit(s,r,i),this._setKeyState(n,[a,s])}else this.addKey(n,i);r===C.keyup&&(this._includesKeyUp=!0)}},{key:"forEachKey",value:function(n){return Object.keys(this._keys).forEach(n)}},{key:"some",value:function(n){return Object.keys(this._keys).some(n)}},{key:"getKeyDictionary",value:function(){return Xe(Object.keys(this._getKeyStates()),!0)}},{key:"keysStillPressedDict",value:function(){var n=this;return Object.keys(this._keys).reduce(function(r,i){return n.isKeyStillPressed(i)&&(r[i]=n._getKeyState(i)),r},{})}},{key:"isKeyIncluded",value:function(n){return!!this._getKeyState(n)}},{key:"isKeyStillPressed",value:function(n){return this.isEventTriggered(n,C.keypress)&&!this.isKeyReleased(n)}},{key:"isKeyReleased",value:function(n){return this.isEventTriggered(n,C.keyup)}},{key:"isEventTriggered",value:function(n,r){return this._getKeyStateType(n,_r.current,r)}},{key:"wasEventPreviouslyTriggered",value:function(n,r){return this._getKeyStateType(n,_r.previous,r)}},{key:"isKeyPressSimulated",value:function(n){return this._isKeyEventSimulated(n,C.keypress)}},{key:"isKeyUpSimulated",value:function(n){return this._isKeyEventSimulated(n,C.keyup)}},{key:"describe",value:function(){return this.getIds()[0]}},{key:"toJSON",value:function(){return{keys:this._getKeyStates(),ids:this.getIds(),keyAliases:this.getKeyAliases()}}},{key:"_getKeyStateType",value:function(n,r,i){var o=this._getKeyState(n);return o&&o[r][i]}},{key:"_update",value:function(){this._ids=cn.serialize(this._keys),this._keyAliases=Zs(this._keys)}},{key:"_isKeyEventSimulated",value:function(n,r){return this.isEventTriggered(n,r)===me.simulated}},{key:"_getKeyStates",value:function(){return this._keys}},{key:"_getKeyState",value:function(n){var r=this._keys[n];if(r)return r;var i=this._keyAliases[n];if(i)return this._keys[i]}},{key:"_setKeyState",value:function(n,r){var i=this.getNormalizedKeyName(n);this._keys[i]=r,this._update()}}]),e}();function Zs(e){return Object.keys(e).reduce(function(t,n){return Qs(n).forEach(function(r){Ys(e).forEach(function(i){i(r).forEach(function(o){(o!==n||n!==r)&&(t[o]=n)})})}),t},{})}var kr=function(){function e(t){var n=t.maxLength,r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;H(this,e),this._records=[],this._maxLength=n,r?this._push(r):this._push(new Lt)}return j(e,[{key:"getMostRecentCombinations",value:function(n){return this._records.slice(-n,-1)}},{key:"any",value:function(){return this._records.some(function(n){return n.any()})}},{key:"getLength",value:function(){return this._records.length}},{key:"getCurrentCombination",value:function(){return this._records[this.getLength()-1]}},{key:"addKeyToCurrentCombination",value:function(n,r,i){this._ensureInitialKeyCombination(),this.getCurrentCombination().setKeyState(n,r,i)}},{key:"setMaxLength",value:function(n){this._maxLength=n,this._trimHistory()}},{key:"startNewKeyCombination",value:function(n,r){this._ensureInitialKeyCombination();var i=new Lt(this.getCurrentCombination().keysStillPressedDict());i.addKey(n,r),this._push(i)}},{key:"toJSON",value:function(){return this._records.map(function(n){return n.toJSON()})}},{key:"_ensureInitialKeyCombination",value:function(){this.getLength()===0&&this._push(new Lt)}},{key:"_push",value:function(n){this._trimHistory(),this._records.push(n)}},{key:"_trimHistory",value:function(){for(;this.getLength()>this._maxLength;)this._shift()}},{key:"_shift",value:function(){this._records.shift()}}]),e}(),eu=function(){function e(){H(this,e),this._registry={}}return j(e,[{key:"get",value:function(n){return this._registry[n]}},{key:"set",value:function(n,r){this._registry[n]=r}},{key:"remove",value:function(n){delete this._registry[n]}},{key:"toJSON",value:function(){return this._registry}}]),e}();function yt(e){return Array.isArray(e)?e:e?[e]:[]}function tu(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},r=Xe(yt(t));return Array.isArray(e)?e.reduce(function(i,o){return r[o]&&(n.stringifyFirst||r[o].value===o)||i.push(o),i},[]):xe(e)?Object.keys(e).reduce(function(i,o){return r[o]||(i[o]=e[o]),i},{}):e}var nu=function(e){function t(){return H(this,t),ge(this,z(t).apply(this,arguments))}return ye(t,e),j(t,[{key:"add",value:function(r,i){ve(z(t.prototype),"set",this).call(this,r,{childIds:[],parentId:null,keyMap:i})}},{key:"update",value:function(r,i){var o=ve(z(t.prototype),"get",this).call(this,r);ve(z(t.prototype),"set",this).call(this,r,ue({},o,{keyMap:i}))}},{key:"setParent",value:function(r,i){this.get(r).parentId=i,this._addChildId(i,r)}},{key:"remove",value:function(r){var i=this._getParentId(r);this._removeChildId(i,r),ve(z(t.prototype),"remove",this).call(this,r)}},{key:"_getParentId",value:function(r){var i=this.get(r);return i&&i.parentId}},{key:"_addChildId",value:function(r,i){this.get(r).childIds.push(i)}},{key:"_removeChildId",value:function(r,i){var o=this.get(r);o&&(o.childIds=tu(o.childIds,i))}}]),t}(eu);function ru(e,t){return[].concat(te(e.slice(0,t)),te(e.slice(t+1)))}var iu=function(){function e(t){H(this,e),this._list=t,this._position=-1}return j(e,[{key:"getPosition",value:function(){return this._position}},{key:"getComponent",value:function(){return this._list.getAtPosition(this.getPosition())}},{key:"next",value:function(){return this.getPosition()+1<this._list.getLength()?(this._position++,this.getComponent()):null}}]),e}(),ou=function(){function e(){H(this,e),this._list=[],this._idToIndex={},this._longestSequence=1,this._longestSequenceComponentId=null,this._keyMapEventRecord=Se.newRecord()}return j(e,[{key:"getNewIterator",value:function(){return new iu(this)}},{key:"add",value:function(n,r,i,o){if(this.containsId(n))return this.update(n,r,i,o);var a=this._build(n,r,i,o);this._list.push(a);var s=this._getLastIndex();return this._idToIndex[n]=s}},{key:"containsId",value:function(n){return!!this.get(n)}},{key:"get",value:function(n){return this.getAtPosition(this.getIndexById(n))}},{key:"getIndexById",value:function(n){return this._idToIndex[n]}},{key:"update",value:function(n,r,i,o){var a=this._isUpdatingComponentWithLongestSequence(n),s=this.getLongestSequence(),u=this._build(n,r,i,o);a&&u.sequenceLength!==s&&(u.sequenceLength>s?this._longestSequence=u.sequenceLength:this._recalculateLongestSequence()),this._list[this.getIndexById(n)]=u}},{key:"remove",value:function(n){var r=this._isUpdatingComponentWithLongestSequence(n);this.removeAtPosition(this.getIndexById(n)),r&&this._recalculateLongestSequence()}},{key:"any",value:function(){return this.getLength()!==0}},{key:"isRoot",value:function(n){return this.getIndexById(n)>=this.getLength()-1}},{key:"getLongestSequence",value:function(){return this._longestSequence}},{key:"anyActionsForEventType",value:function(n){return!!this._keyMapEventRecord[n]}},{key:"getLength",value:function(){return this._list.length}},{key:"getAtPosition",value:function(n){return this._list[n]}},{key:"removeAtPosition",value:function(n){this._list=ru(this._list,n);for(var r=n;r<this.getLength();)this._idToIndex[this.getAtPosition(r).componentId]=r,r++}},{key:"toJSON",value:function(){return this._list}},{key:"_getLastIndex",value:function(){return this.getLength()-1}},{key:"_build",value:function(n,r,i,o){var a=this._applyHardSequences(r,i),s=a.keyMap,u=a.handlers,l=this._buildActionDictionary(ue({},r,s),o,n);return{actions:l,handlers:u,componentId:n,options:o}}},{key:"_isUpdatingComponentWithLongestSequence",value:function(n){return n===this._getLongestSequenceComponentId()}},{key:"_getLongestSequenceComponentId",value:function(){return this._longestSequenceComponentId}},{key:"_recalculateLongestSequence",value:function(){for(var n=this.getNewIterator();n.next();){var r=n.getComponent(),i=r.longestSequence,o=r.componentId;i>this.getLongestSequence()&&(this._longestSequenceComponentId=o,this._longestSequence=i)}}},{key:"_applyHardSequences",value:function(n,r){return F.option("enableHardSequences")?Object.keys(r).reduce(function(i,o){var a=!!n[o];return!a&&cn.isValidKeySerialization(o)&&(i.keyMap[o]=o),i.handlers[o]=r[o],i},{keyMap:{},handlers:{}}):{keyMap:n,handlers:r}}},{key:"_buildActionDictionary",value:function(n,r,i){var o=this;return Object.keys(n).reduce(function(a,s){var u=n[s],l=function(){return xe(u)&&ae(u,"sequences")?yt(u.sequences):yt(u)}();return l.forEach(function(c){var f=au(c,r),d=f.keySequence,h=f.keyEventType;o._addActionOptions(a,i,s,d,h)}),a},{})}},{key:"_addActionOptions",value:function(n,r,i,o,a){var s=qi.parse(o,{keyEventType:a}),u=s.sequence,l=s.combination;u.size>this.getLongestSequence()&&(this._longestSequence=u.size,this._longestSequenceComponentId=r),this._keyMapEventRecord[a]=me.seen,n[i]||(n[i]=[]),n[i].push(ue({prefix:u.prefix,actionName:i,sequenceLength:u.size},l))}}]),e}();function au(e,t){if(xe(e)){var n=e.sequence,r=e.action;return{keySequence:n,keyEventType:se(r)?C[t.defaultKeyEvent]:C[r]}}return{keySequence:e,keyEventType:C[t.defaultKeyEvent]}}function Sr(e,t){return e[e.length-(t+1)]}for(var Wi={Enter:!0,Backspace:!0,ArrowRight:!0,ArrowLeft:!0,ArrowUp:!0,ArrowDown:!0,CapsLock:!0},vn=1;13>vn;vn++)Wi["F".concat(vn)]=!0;function Ji(e){return e.length===1||ae(Wi,e)}var su=function(){function e(){H(this,e),this._actionConfigs={},this._order=null}return j(e,[{key:"addMatch",value:function(n,r){if(this._includesMatcherForCombination(n.id)){var i=n.keyEventType,o=n.actionName,a=n.id;this._addHandlerToActionConfig(a,{keyEventType:i,actionName:o,handler:r})}else this._addNewActionConfig(n,r)}},{key:"findMatch",value:function(n,r,i){this._order||this._setOrder();var o=!0,a=!1,s=void 0;try{for(var u,l=this._order[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value,f=this._actionConfigs[c];if(this._matchesActionConfig(n,r,i,f))return f}}catch(d){a=!0,s=d}finally{try{o||l.return==null||l.return()}finally{if(a)throw s}}return null}},{key:"toJSON",value:function(){return{actionConfigs:this._actionConfigs,order:this._order}}},{key:"_matchesActionConfig",value:function(n,r,i,o){if(!uu(n,o))return!1;var a=o.events[i];if(!a)return!1;var s=!1,u=Object.keys(o.keyDictionary).every(function(l){return!!n.isEventTriggered(l,i)&&(r&&r===n.getNormalizedKeyName(l)&&(s=!n.wasEventPreviouslyTriggered(l,i)),!0)});return u&&s}},{key:"_setOrder",value:function(){var n=Object.values(this._actionConfigs).reduce(function(r,i){var o=i.id,a=i.size;return r[a]||(r[a]=[]),r[a].push(o),r},{});this._order=Object.keys(n).sort(function(r,i){return i-r}).reduce(function(r,i){return r.concat(n[i])},[])}},{key:"_addNewActionConfig",value:function(n,r){var i=n.prefix,o=n.sequenceLength,a=n.id,s=n.keyDictionary,u=n.size,l=n.keyEventType,c=n.actionName;this._setCombinationMatcher(a,{prefix:i,sequenceLength:o,id:a,keyDictionary:s,size:u,events:{}}),this._addHandlerToActionConfig(a,{keyEventType:l,actionName:c,handler:r})}},{key:"_addHandlerToActionConfig",value:function(n,r){var i=r.keyEventType,o=r.actionName,a=r.handler,s=this._getCombinationMatcher(n);this._setCombinationMatcher(n,ue({},s,{events:ue({},s.events,J({},i,{actionName:o,handler:a}))}))}},{key:"_setCombinationMatcher",value:function(n,r){this._actionConfigs[n]=r}},{key:"_getCombinationMatcher",value:function(n){return this._actionConfigs[n]}},{key:"_includesMatcherForCombination",value:function(n){return!!this._getCombinationMatcher(n)}}]),e}();function uu(e,t){var n=Vi(t.keyDictionary);return F.option("allowCombinationSubmatches")||lu(e)?e.getNumberOfKeys()>=n:e.getNumberOfKeys()===n}function lu(e){return!!e.isKeyStillPressed("Meta")&&e.some(function(t){return Ji(t)})}var cu=function(){function e(){H(this,e),this._combinationMatchers={},this._eventRecord=Se.newRecord()}return j(e,[{key:"addMatch",value:function(n,r){var i=this._getOrCreateCombinationMatcher(n.prefix);i.addMatch(n,r),Se.setBit(this._eventRecord,n.keyEventType,me.seen),(!this._longestSequence||this._longestSequence<n.sequenceLength)&&(this._longestSequence=n.sequenceLength)}},{key:"findMatch",value:function(n,r,i){var o=this._findCombinationMatcher(n);return o?o.findMatch(n.getCurrentCombination(),n.getCurrentCombination().getNormalizedKeyName(r),i):null}},{key:"hasMatchesForEventType",value:function(n){return!!this._eventRecord[n]}},{key:"getLongestSequence",value:function(){return this._longestSequence}},{key:"toJSON",value:function(){var n=this;return Object.keys(this._combinationMatchers).reduce(function(r,i){var o=n._combinationMatchers[i];return r[i]=o.toJSON(),r},{})}},{key:"_getOrCreateCombinationMatcher",value:function(n){return this._combinationMatchers[n]||(this._combinationMatchers[n]=new su),this._combinationMatchers[n]}},{key:"_findCombinationMatcher",value:function(n){var r=n.getMostRecentCombinations(this.getLongestSequence());if(r.length===0)return this._combinationMatchers[""];for(var i=r.map(function(g){return g.getIds()}),o=i.map(function(g){return g.length}),a=Array(i.length).fill(0),s=!1;!s;){var u=a.map(function(g,m){return i[m][g]}),l=u.join(" ");if(this._combinationMatchers[l])return this._combinationMatchers[l];for(var c=0,f=!0;f&&c<a.length;){var d=Sr(a,c),h=(d+1)%(Sr(o,c)||1);a[a.length-(c+1)]=h,f=h==0,f&&c++}s=c===a.length}}}]),e}(),du=function(){function e(t){H(this,e),this._keyMapMatchers=[],this._unmatchedHandlerStatus=[],this._handlersDictionary={},this._keySequencesDictionary={};for(var n=t.getNewIterator();n.next();){var r=n.getComponent(),i=r.handlers;this._unmatchedHandlerStatus.push([Object.keys(i).length,{}]),this._keyMapMatchers.push(new cu)}this._componentList=t,this._componentListIterator=t.getNewIterator()}return j(e,[{key:"getKeyHistoryMatcher",value:function(n){if(this._componentHasUnmatchedHandlers(n))for(;this._componentListIterator.next();)this._addHandlersFromComponent(),this._addActionsFromComponent();return this._getKeyHistoryMatcher(n)}},{key:"componentHasActionsBoundToEventType",value:function(n,r){return this.getKeyHistoryMatcher(n).hasMatchesForEventType(r)}},{key:"findMatchingKeySequenceInComponent",value:function(n,r,i,o){return this.componentHasActionsBoundToEventType(n,o)?this.getKeyHistoryMatcher(n).findMatch(r,i,o):null}},{key:"_getKeyHistoryMatcher",value:function(n){return this._keyMapMatchers[n]}},{key:"_addActionsFromComponent",value:function(){var n=this,r=this._componentListIterator.getComponent(),i=r.actions;Object.keys(i).forEach(function(o){var a=n._getHandlers(o);if(a){var s=a[0],u=n._componentList.getAtPosition(s).handlers[o],l=n._getKeyHistoryMatcher(s),c=i[o];c.forEach(function(f){var d=[f.prefix,f.id].join(" ");n._isClosestHandlerFound(d,f)||(l.addMatch(f,u),n._addKeySequence(d,[s,f.keyEventType]))}),a.forEach(function(f){var d=n._getUnmatchedHandlerStatus(f);d[1][o]||(d[1][o]=!0,d[0]--)})}})}},{key:"_getHandlers",value:function(n){return this._handlersDictionary[n]}},{key:"_addHandlersFromComponent",value:function(){var n=this,r=this._componentListIterator.getComponent(),i=r.handlers;Object.keys(i).forEach(function(o){n._addHandler(o)})}},{key:"_addHandler",value:function(n){this._handlersDictionary[n]||(this._handlersDictionary[n]=[]),this._handlersDictionary[n].push(this._componentListIterator.getPosition())}},{key:"_addKeySequence",value:function(n,r){this._keySequencesDictionary[n]||(this._keySequencesDictionary[n]=[]),this._keySequencesDictionary[n].push(r)}},{key:"_componentHasUnmatchedHandlers",value:function(n){return 0<this._getUnmatchedHandlerStatus(n)[0]}},{key:"_getUnmatchedHandlerStatus",value:function(n){return this._unmatchedHandlerStatus[n]}},{key:"_isClosestHandlerFound",value:function(n,r){return this._keySequencesDictionary[n]&&this._keySequencesDictionary[n].some(function(i){return i[1]===r.keyEventType})}}]),e}();function Ct(e,t,n){return n.forEach(function(r){ae(e,r)&&(t[r]=e[r])}),t}function wr(e){switch(parseInt(e,10)){case 0:return"keydown";case 1:return"keypress";default:return"keyup"}}function fu(e){return!Ui(e)}function Pe(e){return e.simulated?me.simulated:me.seen}var xr=["sequence","action"],Cr=["name","description","group"],Xi=function(){function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;H(this,e),this.logger=t.logger||new pe("warn"),this.componentId=-1,this.keyEventManager=n,this._componentTree=new nu,this.rootComponentId=null,this._reset(),this.resetKeyHistory()}return j(e,[{key:"_reset",value:function(){this.componentList=new ou,this._initHandlerResolutionState()}},{key:"_newKeyHistory",value:function(){return new kr({maxLength:this.componentList.getLongestSequence()})}},{key:"getKeyHistory",value:function(){return this._keyHistory?this._keyHistory:(this._keyHistory=this._newKeyHistory(),this._keyHistory)}},{key:"_initHandlerResolutionState",value:function(){this._actionResolver=null}},{key:"resetKeyHistory",value:function(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this.keypressEventsToSimulate=[],this.keyupEventsToSimulate=[],this._keyHistory=this.getKeyHistory().any()&&!n.force?new kr({maxLength:this.componentList.getLongestSequence()},new Lt(this.getCurrentCombination().keysStillPressedDict())):this._newKeyHistory()}},{key:"getApplicationKeyMap",value:function(){return this.rootComponentId===null?{}:this._buildApplicationKeyMap([this.rootComponentId],{})}},{key:"_buildApplicationKeyMap",value:function(n,r){var i=this;return n.forEach(function(o){var a=i._componentTree.get(o),s=a.childIds,u=a.keyMap;u&&Object.keys(u).forEach(function(l){var c=u[l];r[l]={},xe(c)?ae(c,"sequences")?(Ct(c,r[l],Cr),r[l].sequences=i._createSequenceFromConfig(c.sequences)):(Ct(c,r[l],Cr),r[l].sequences=[Ct(c,{},xr)]):r[l].sequences=i._createSequenceFromConfig(c)}),i._buildApplicationKeyMap(s,r)}),r}},{key:"_createSequenceFromConfig",value:function(n){return yt(n).map(function(r){return xe(r)?Ct(r,{},xr):{sequence:r}})}},{key:"registerKeyMap",value:function(n){return this.componentId+=1,this._componentTree.add(this.componentId,n),this.componentId}},{key:"reregisterKeyMap",value:function(n,r){this._componentTree.update(n,r)}},{key:"registerComponentMount",value:function(n,r){se(r)?this.rootComponentId=n:this._componentTree.setParent(n,r)}},{key:"deregisterKeyMap",value:function(n){this._componentTree.remove(n),n===this.rootComponentId&&(this.rootComponentId=null)}},{key:"_addComponent",value:function(n){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},o=3<arguments.length?arguments[3]:void 0;this.componentList.add(n,r,i,o),this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence())}},{key:"_allKeysAreReleased",value:function(){return this.getCurrentCombination().hasEnded()}},{key:"getCurrentCombination",value:function(){return this.getKeyHistory().getCurrentCombination()}},{key:"_shouldSimulate",value:function(n,r){var i=fu(r),o=this.getCurrentCombination();return n===C.keypress?!i||i&&o.isKeyStillPressed("Meta"):n===C.keyup&&Ji(r)&&o.isKeyReleased("Meta")}},{key:"_cloneAndMergeEvent",value:function(n,r){var i=Object.keys(gn).reduce(function(o,a){return o[a]=n[a],o},{});return ue({},i,r)}},{key:"_callClosestMatchingHandler",value:function(n,r,i,o,a){for(this._actionResolver||(this._actionResolver=new du(this.componentList));a<=o;){this._actionResolver.getKeyHistoryMatcher(a);var s=this._actionResolver.findMatchingKeySequenceInComponent(a,this.getKeyHistory(),r,i);if(this.getCurrentCombination(),s){var u=s.events[i];return F.option("allowCombinationSubmatches")&&cn.serialize(s.keyDictionary),u.handler(n),this._stopEventPropagationAfterHandlingIfEnabled(n,a),!0}this._actionResolver.componentHasActionsBoundToEventType(a,i),a++}}},{key:"_stopEventPropagationAfterHandlingIfEnabled",value:function(n,r){return!!F.option("stopEventPropagationAfterHandling")&&(this._stopEventPropagation(n,r),!0)}},{key:"_stopEventPropagation",value:function(){throw new Error("_stopEventPropagation must be overridden by a subclass")}},{key:"_checkForModifierFlagDiscrepancies",value:function(n,r,i){var o=this;Object.keys(gn).forEach(function(a){if(r!==a||i!==C.keyup){var s=o.getCurrentCombination(),u=s.isKeyStillPressed(a);gn[a].forEach(function(l){n[l]===!1&&u&&s.setKeyState(a,C.keyup,Pe(n))})}})}},{key:"_logPrefix",value:function(){}}]),e}(),gt=function(){function e(){H(this,e)}return j(e,null,[{key:"getId",value:function(){return se(this._id)&&(this._id=0),this._id}},{key:"incrementId",value:function(){this._id=this.getId()+1}}]),e}();function hu(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}var pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"};function yu(e){if(e.key){var t=pu[e.key]||e.key;if(t!=="Unidentified")return t}if(e.type==="keypress"){var n=hu(e);return n===13?"Enter":String.fromCharCode(n)}return e.type==="keydown"||e.type==="keyup"?Hi[e.keyCode]||"Unidentified":""}function ze(e){var t=function(){var n=F.option("customKeyCodes"),r=e.keyCode||e.charCode;return ae(n,r)?n[r]:e.nativeEvent?e.key:yu(e)}();return t==="+"?"plus":t}function Wt(e){return e==="Meta"}var B={unseen:0,ignored:1,seen:2,recorded:3,handled:4},gu=function(){function e(t,n){var r=n.logger,i=n.logPrefix;H(this,e),this._componentList=t,this._previousPropagation=null,this.logger=r,this._logPrefix=i,this._reset()}return j(e,[{key:"_reset",value:function(){this._previousPosition=-1,this._position=-1,this._actionHandled=!1,this._ignoreEvent=!1,this._observeIgnoredEvents=!1,this._stopping=!1,this._componentId=null,this._key=null,this._type=null}},{key:"isFirstPropagationStep",value:function(){var n=this.getPreviousPosition();return n===-1||n>=this._position}},{key:"isForKey",value:function(n){return this._key===n}},{key:"isForEventType",value:function(n){return this._type===n}},{key:"startNewPropagationStep",value:function(n,r,i,o){return this._position=this._componentList.getIndexById(n),this._componentId=n,this.isFirstPropagationStep()&&(gt.incrementId(),this._key=r.key,this._type=o),!(r.repeat&&F.option("ignoreRepeatedEventsWhenKeyHeldDown"))||(this.ignoreEvent(r),!1)}},{key:"finishPropagationStep",value:function(){this.isStopped()||this._componentList.isRoot(this._componentId)?(this._previousPropagation=this._clone(),this._reset()):this._previousPosition=this._position}},{key:"getPreviousPropagation",value:function(){return this._previousPropagation||(this._previousPropagation=this._clone({copyState:!1})),this._previousPropagation}},{key:"getPreviousPosition",value:function(){return this._previousPosition}},{key:"observeIgnoredEvents",value:function(){this._observeIgnoredEvents=!0}},{key:"ignoreEvent",value:function(n){return this.setIgnoreEvent(!0),!!(this.isIgnoringEvent()&&F.option("stopEventPropagationAfterIgnoring"))&&(this.stop(n),this.finishPropagationStep(),!0)}},{key:"setIgnoreEvent",value:function(n){this._ignoreEvent=n}},{key:"isIgnoringEvent",value:function(){return!this._observeIgnoredEvents&&this._ignoreEvent}},{key:"isStopped",value:function(){return this._stopping}},{key:"stop",value:function(n){return!this.isStopped()&&(this._stopping=!0,n.simulated||n.stopPropagation(),!0)}},{key:"isPendingPropagation",value:function(){var n=this.getPreviousPosition();return n!==-1&&n+1<this._position}},{key:"isHandled",value:function(){return this._actionHandled}},{key:"setHandled",value:function(){this._actionHandled=!0}},{key:"_clone",value:function(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},r=n.copyState,i=new e(this._componentList,{logger:this.logger,logPrefix:this._logPrefix});return(r===void 0||r)&&Object.assign(i,this),i}}]),e}(),vu=function(e){function t(){var n,r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},i=1<arguments.length?arguments[1]:void 0;return H(this,t),n=ge(this,z(t).call(this,r,i)),n.focusTreeId=0,n}return ye(t,e),j(t,[{key:"_reset",value:function(){ve(z(t.prototype),"_reset",this).call(this),this.keypressEventsToSimulate=[],this.focusTreeId+=1,this.eventPropagator=new gu(this.componentList,{logger:this.logger,logPrefix:this._logPrefix.bind(this)})}},{key:"enableHotKeys",value:function(r){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},a=3<arguments.length?arguments[3]:void 0;if(this.resetOnNextFocus&&(this._reset(),this.resetOnNextFocus=!1),!this.componentList.containsId(r))return this._addComponent(r,i,o,a),this.focusTreeId}},{key:"updateEnabledHotKeys",value:function(r,i){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},s=4<arguments.length?arguments[4]:void 0;r===this.focusTreeId&&this.componentList.containsId(i)&&(this.componentList.update(i,o,a,s),this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence()),this._initHandlerResolutionState())}},{key:"disableHotKeys",value:function(r,i){this.resetOnNextFocus||(this.resetOnNextFocus=!0);var o=this.eventPropagator.isPendingPropagation();return o}},{key:"handleKeydown",value:function(r,i,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},s=ze(r);if(i!==this.focusTreeId)return this.eventPropagator.ignoreEvent(r),!0;var u=this.eventPropagator.startNewPropagationStep(o,r,s,C.keydown);if(u){var l=this._howToHandleKeyEvent(r,i,o,s,a,C.keydown);if(l===B.handled){var c=Pe(r),f=this.getCurrentCombination();f.isKeyIncluded(s)||f.isEnding()?this._startAndLogNewKeyCombination(s,i,o,c):this._addToAndLogCurrentKeyCombination(s,C.keydown,i,o,c),this._callHandlerIfActionNotHandled(r,s,C.keydown,o,i)}return this._simulateKeyPressForNonPrintableKeys(r,s,i,o,a),this.eventPropagator.finishPropagationStep(),!1}}},{key:"_howToHandleKeyEvent",value:function(r,i,o,a,s,u){if(this.eventPropagator.isFirstPropagationStep()){if(s.ignoreEventsCondition(r)&&this.eventPropagator.ignoreEvent(r))return this._eventIsToBeIgnored(r,o,a,u);this._checkForModifierFlagDiscrepancies(r,a,u)}else if(this.eventPropagator.isIgnoringEvent())return this._eventIsToBeIgnored(r,o,a,u);return B.handled}},{key:"_eventIsToBeIgnored",value:function(r,i,o,a){return B.ignored}},{key:"handleKeyPress",value:function(r,i,o,a){var s=ze(r),u=this.getCurrentCombination();if(u.isKeyPressSimulated(s))return this.eventPropagator.ignoreEvent(r),!0;var l=this.eventPropagator.startNewPropagationStep(o,r,s,C.keypress);if(l){var c=i!==this.focusTreeId,f=this._howToHandleKeyEvent(r,i,o,s,a,C.keypress);return this.eventPropagator.isFirstPropagationStep(o)&&u.isKeyIncluded(s)&&this._addToAndLogCurrentKeyCombination(s,C.keypress,i,o,Pe(r)),f===B.handled&&this._callHandlerIfActionNotHandled(r,s,C.keypress,o,i),this.eventPropagator.finishPropagationStep(),c}}},{key:"handleKeyUp",value:function(r,i,o,a){var s=ze(r),u=this.getCurrentCombination();if(u.isKeyUpSimulated(s))return this.eventPropagator.ignoreEvent(r),!0;var l=this.eventPropagator.startNewPropagationStep(o,r,s,C.keyup);if(l){var c=i!==this.focusTreeId,f=this._howToHandleKeyEvent(r,i,o,s,a,C.keyup);return this.eventPropagator.isFirstPropagationStep(o)&&u.isKeyIncluded(s)&&this._addToAndLogCurrentKeyCombination(s,C.keyup,i,o,Pe(r)),f===B.handled&&this._callHandlerIfActionNotHandled(r,s,C.keyup,o,i),this._simulateKeyUpEventsHiddenByCmd(r,s,i,o,a),this.eventPropagator.finishPropagationStep(),c}}},{key:"closeHangingKeyCombination",value:function(r,i){var o=this.getCurrentCombination();o.isKeyIncluded(r)&&!o.isEventTriggered(r,i)&&o.setKeyState(r,i,me.simulated)}},{key:"_simulateKeyPressForNonPrintableKeys",value:function(r,i,o,a,s){this._handleEventSimulation("keypressEventsToSimulate","simulatePendingKeyPressEvents",this._shouldSimulate(C.keypress,i),{event:r,key:i,focusTreeId:o,componentId:a,options:s})}},{key:"_simulateKeyUpEventsHiddenByCmd",value:function(r,i,o,a,s){var u=this;Wt(i)&&this.getCurrentCombination().forEachKey(function(l){Wt(l)||u._handleEventSimulation("keyupEventsToSimulate","simulatePendingKeyUpEvents",u._shouldSimulate(C.keyup,l),{event:r,key:l,focusTreeId:o,componentId:a,options:s})})}},{key:"_stopEventPropagation",value:function(r,i){this.eventPropagator.stop(r)}},{key:"getEventPropagator",value:function(){return this.eventPropagator}},{key:"_startAndLogNewKeyCombination",value:function(r,i,o,a){this.getKeyHistory().startNewKeyCombination(r,a)}},{key:"_addToAndLogCurrentKeyCombination",value:function(r,i,o,a,s){this.getKeyHistory().addKeyToCurrentCombination(r,i,s)}},{key:"_handleEventSimulation",value:function(r,i,o,a){var s=a.event,u=a.key,l=a.focusTreeId,c=a.componentId,f=a.options;if(o&&F.option("simulateMissingKeyPressEvents")){var d=this._cloneAndMergeEvent(s,{key:u,simulated:!0});this[r].push({event:d,focusTreeId:l,componentId:c,options:f})}(this.componentList.isRoot(c)||this.eventPropagator.isStopped())&&!this.keyEventManager.isGlobalListenersBound()&&this[i]()}},{key:"simulatePendingKeyPressEvents",value:function(){this._simulatePendingKeyEvents("keypressEventsToSimulate","handleKeyPress")}},{key:"simulatePendingKeyUpEvents",value:function(){this._simulatePendingKeyEvents("keyupEventsToSimulate","handleKeyUp")}},{key:"_simulatePendingKeyEvents",value:function(r,i){var o=this;0<this[r].length&&gt.incrementId(),this[r].forEach(function(a){var s=a.event,u=a.focusTreeId,l=a.componentId,c=a.options;o[i](s,u,l,c)}),this[r]=[]}},{key:"_callHandlerIfActionNotHandled",value:function(r,i,o,a,s){if(this.getCurrentCombination().describe(),!!this.componentList.anyActionsForEventType(o)&&!this.eventPropagator.isHandled()){var u=this.eventPropagator.getPreviousPosition(),l=this.componentList.getIndexById(a),c=this._callClosestMatchingHandler(r,i,o,l,u===-1?0:u);c&&this.eventPropagator.setHandled()}}},{key:"_logPrefix",value:function(r){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},o=pe.logIcons,a=pe.eventIcons,s=pe.componentIcons,u="HotKeys (";if(i.focusTreeId!==!1){var l=se(i.focusTreeId)?this.focusTreeId:i.focusTreeId;u+="F".concat(l).concat(o[l%o.length],"-")}if(i.eventId!==!1){var c=se(i.eventId)?gt.getId():i.eventId;u+="E".concat(c).concat(a[c%a.length],"-")}u+="C".concat(r).concat(s[r%s.length]);var f=this.componentList.getIndexById(r);return se(f)||(u+="-P".concat(f).concat(s[f%s.length],":")),"".concat(u,")")}}]),t}(Xi);function Tt(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};return Array.isArray(e)||Fi(e)?n.stringifyFirst?!se(e.find(function(r){return r.toString()===t.toString()})):e.indexOf(t)!==-1:xe(e)?ae(e,t):n.stringifyFirst?e.toString()===t.toString():e===t}function Tr(e){return e.replace(/\b\w/g,function(t){return t.toUpperCase()})}function mu(e){return"".concat(Tr(e.slice(0,3))).concat(Tr(e.slice(3)))}var bu=function(e){function t(){var n,r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},i=1<arguments.length?arguments[1]:void 0;return H(this,t),n=ge(this,z(t).call(this,r,i)),n.listenersBound=!1,n.eventOptions={ignoreEventsCondition:F.option("ignoreEventsCondition")},n.listeners={},n}return ye(t,e),j(t,[{key:"enableHotKeys",value:function(r){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},a=3<arguments.length?arguments[3]:void 0,s=4<arguments.length?arguments[4]:void 0;this.eventOptions=s,this._addComponent(r,i,o,a),this._updateDocumentHandlers(),this._initHandlerResolutionState()}},{key:"updateEnabledHotKeys",value:function(r){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},a=3<arguments.length?arguments[3]:void 0,s=4<arguments.length?arguments[4]:void 0;this.eventOptions=s,this.componentList.update(r,i,o,a),this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence()),this._updateDocumentHandlers(),this._initHandlerResolutionState()}},{key:"disableHotKeys",value:function(r){this.componentList.remove(r),this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence()),this._updateDocumentHandlers(),this._initHandlerResolutionState()}},{key:"_updateDocumentHandlers",value:function(){var r=this,i=this._listenersShouldBeBound();!this.listenersBound&&i?(Object.values(C).forEach(function(o){var a=wr(o);document["on".concat(a)]=function(s){r.keyEventManager["handleGlobal".concat(mu(a))](s)}}),this.listenersBound=!0):this.listenersBound&&!i&&(Object.values(C).forEach(function(o){var a=wr(o);delete document["on".concat(a)]}),this.listenersBound=!1)}},{key:"_listenersShouldBeBound",value:function(){return this.componentList.any()||this.listeners.keyCombination}},{key:"handleKeydown",value:function(r){var i=ze(r);if(r.repeat&&F.option("ignoreRepeatedEventsWhenKeyHeldDown"))return!0;this._checkForModifierFlagDiscrepancies(r,i,C.keydown);var o=this._howReactAppRespondedTo(r,i,C.keydown);if(!(o===B.unseen&&this.eventOptions.ignoreEventsCondition(r))){if(o!==B.ignored){var a=Pe(r),s=this.getCurrentCombination();s.isKeyIncluded(i)||s.isEnding()?this._startAndLogNewKeyCombination(i,a):this._addToAndLogCurrentKeyCombination(i,C.keydown,a)}Tt([B.ignored,B.handled],o)||this._callHandlerIfExists(r,i,C.keydown),this._simulateKeyPressForNonPrintableKeys(r,i)}}},{key:"_howReactAppRespondedTo",value:function(r,i,o){var a=this.keyEventManager.reactAppHistoryWithEvent(i,o);return a===B.handled||a===B.ignored||a===B.seen||gt.incrementId(),a}},{key:"handleKeyPress",value:function(r){var i=ze(r);if(r.repeat&&F.option("ignoreRepeatedEventsWhenKeyHeldDown"))return!0;var o=this.getCurrentCombination();if(o.isKeyPressSimulated(i))return!0;var a=this._howReactAppRespondedTo(r,i,C.keypress);return o.isKeyIncluded(i)&&this._addToAndLogCurrentKeyCombination(i,C.keypress,Pe(r)),a===B.unseen&&(this.keyEventManager.closeHangingKeyCombination(i,C.keypress),this.eventOptions.ignoreEventsCondition(r))?void 0:void(!Tt([B.ignored,B.handled],a)&&this._callHandlerIfExists(r,i,C.keypress))}},{key:"handleKeyUp",value:function(r){var i=ze(r),o=this.getCurrentCombination();if(o.isKeyUpSimulated(i))return!0;var a=this._howReactAppRespondedTo(r,i,C.keyup);o.isKeyIncluded(i)&&this._addToAndLogCurrentKeyCombination(i,C.keyup,Pe(r)),a===B.unseen?(this.keyEventManager.closeHangingKeyCombination(i,C.keyup),this.eventOptions.ignoreEventsCondition(r)||!Tt([B.ignored,B.handled],a)&&this._callHandlerIfExists(r,i,C.keyup)):!Tt([B.ignored,B.handled],a)&&this._callHandlerIfExists(r,i,C.keyup),this._simulateKeyUpEventsHiddenByCmd(r,i),this.listeners.keyCombination&&this._allKeysAreReleased()&&this.listeners.keyCombination({keys:o.getKeyDictionary(),id:o.describe()})}},{key:"_simulateKeyPressForNonPrintableKeys",value:function(r,i){this.keyEventManager.simulatePendingKeyPressEvents(),this._handleEventSimulation("handleKeyPress",this._shouldSimulate(C.keypress,i),{event:r,key:i})}},{key:"_simulateKeyUpEventsHiddenByCmd",value:function(r,i){var o=this;Wt(i)&&(this.keyEventManager.simulatePendingKeyUpEvents(),this.getCurrentCombination().forEachKey(function(a){Wt(a)||o._handleEventSimulation("handleKeyUp",o._shouldSimulate(C.keyup,a),{event:r,key:a})}))}},{key:"_startAndLogNewKeyCombination",value:function(r,i){this.getKeyHistory().startNewKeyCombination(r,i)}},{key:"_addToAndLogCurrentKeyCombination",value:function(r,i,o){this.getKeyHistory().addKeyToCurrentCombination(r,i,o)}},{key:"_handleEventSimulation",value:function(r,i,o){var a=o.event,s=o.key;if(i&&F.option("simulateMissingKeyPressEvents")){var u=this._cloneAndMergeEvent(a,{key:s,simulated:!0});this[r](u)}}},{key:"_callHandlerIfExists",value:function(r,i,o){return this.getCurrentCombination().describe(),this.componentList.anyActionsForEventType(o)?void this._callClosestMatchingHandler(r,i,o):void 0}},{key:"_callClosestMatchingHandler",value:function(r,i,o){for(var a,s=this.componentList.getNewIterator();s.next();)if(a=ve(z(t.prototype),"_callClosestMatchingHandler",this).call(this,r,i,o,s.getPosition(),0),a)return}},{key:"_stopEventPropagation",value:function(r,i){r.simulated||r.stopPropagation()}},{key:"addKeyCombinationListener",value:function(r){var i=this,o=function(){delete i.listeners.keyCombination};return this.listeners.keyCombination=function(a){r(a),o()},this._updateDocumentHandlers(),o}},{key:"_logPrefix",value:function(r){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},o=pe.eventIcons,a=pe.componentIcons,s="HotKeys (GLOBAL";if(i.eventId!==!1){var u=se(i.eventId)?gt.getId():i.eventId;s="".concat(s,"-E").concat(u).concat(o[u%o.length])}return se(r)?"".concat(s,"):"):"".concat(s,"-C").concat(r).concat(a[r%a.length],"):")}}]),t}(Xi);function mn(e){return!se(e)}var Z=function(){function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};H(this,e),this.logger=t.logger||new pe(F.option("logLevel")),this._focusOnlyEventStrategy=new vu({configuration:t,logger:this.logger},this),this._globalEventStrategy=new bu({configuration:t,logger:this.logger},this),this.mountedComponentsCount=0}return j(e,null,[{key:"getInstance",value:function(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return this.instance||(this.instance=new e(n)),this.instance}},{key:"clear",value:function(){delete this.instance}}]),j(e,[{key:"getApplicationKeyMap",value:function(){return Object.assign(this._globalEventStrategy.getApplicationKeyMap(),this._focusOnlyEventStrategy.getApplicationKeyMap())}},{key:"registerKeyMap",value:function(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return this._focusOnlyEventStrategy.registerKeyMap(n)}},{key:"reregisterKeyMap",value:function(n){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this._focusOnlyEventStrategy.reregisterKeyMap(n,r)}},{key:"deregisterKeyMap",value:function(n){this._focusOnlyEventStrategy.deregisterKeyMap(n)}},{key:"registerComponentMount",value:function(n,r){return this._incrementComponentCount(),this._focusOnlyEventStrategy.registerComponentMount(n,r)}},{key:"registerComponentUnmount",value:function(){this._decrementComponentCount()}},{key:"_incrementComponentCount",value:function(){var n=this,r=this.mountedComponentsCount;this.mountedComponentsCount+=1,r===0&&this.mountedComponentsCount===1&&(window.onblur=function(){return n._clearKeyHistory()})}},{key:"_decrementComponentCount",value:function(){var n=this.mountedComponentsCount;this.mountedComponentsCount-=1,n===1&&this.mountedComponentsCount===0&&delete window.onblur}},{key:"_clearKeyHistory",value:function(){this._focusOnlyEventStrategy.resetKeyHistory({force:!0}),this._globalEventStrategy.resetKeyHistory({force:!0})}},{key:"registerGlobalKeyMap",value:function(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return this._globalEventStrategy.registerKeyMap(n)}},{key:"registerGlobalComponentUnmount",value:function(){this._decrementComponentCount()}},{key:"registerGlobalComponentMount",value:function(n,r){return this._incrementComponentCount(),this._globalEventStrategy.registerComponentMount(n,r)}},{key:"reregisterGlobalKeyMap",value:function(n,r){this._globalEventStrategy.reregisterKeyMap(n,r)}},{key:"deregisterGlobalKeyMap",value:function(n){this._globalEventStrategy.deregisterKeyMap(n)}},{key:"addKeyCombinationListener",value:function(n){return this._globalEventStrategy.addKeyCombinationListener(n)}},{key:"enableHotKeys",value:function(n){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},o=3<arguments.length?arguments[3]:void 0;return this._focusOnlyEventStrategy.enableHotKeys(n,r,i,o)}},{key:"updateEnabledHotKeys",value:function(n,r){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},a=4<arguments.length?arguments[4]:void 0;return this._focusOnlyEventStrategy.updateEnabledHotKeys(n,r,i,o,a)}},{key:"disableHotKeys",value:function(n,r){return this._focusOnlyEventStrategy.disableHotKeys(n,r)}},{key:"handleKeydown",value:function(n,r,i,o){if(mn(r))return this._focusOnlyEventStrategy.handleKeydown(n,r,i,o)}},{key:"handleKeyPress",value:function(n,r,i,o){if(mn(r))return this._focusOnlyEventStrategy.handleKeyPress(n,r,i,o)}},{key:"handleKeyUp",value:function(n,r,i,o){if(mn(r))return this._focusOnlyEventStrategy.handleKeyUp(n,r,i,o)}},{key:"enableGlobalHotKeys",value:function(n){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},o=3<arguments.length?arguments[3]:void 0,a=4<arguments.length?arguments[4]:void 0;return this._globalEventStrategy.enableHotKeys(n,r,i,o,a)}},{key:"updateEnabledGlobalHotKeys",value:function(n){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},o=3<arguments.length?arguments[3]:void 0,a=4<arguments.length?arguments[4]:void 0;return this._globalEventStrategy.updateEnabledHotKeys(n,r,i,o,a)}},{key:"disableGlobalHotKeys",value:function(n){return this._globalEventStrategy.disableHotKeys(n)}},{key:"handleGlobalKeyDown",value:function(n){return this._globalEventStrategy.handleKeydown(n)}},{key:"handleGlobalKeyPress",value:function(n){return this._globalEventStrategy.handleKeyPress(n)}},{key:"handleGlobalKeyUp",value:function(n){return this._globalEventStrategy.handleKeyUp(n)}},{key:"ignoreEvent",value:function(n){this._focusOnlyEventStrategy.getEventPropagator().ignoreEvent(n)}},{key:"observeIgnoredEvents",value:function(n){this._focusOnlyEventStrategy.getEventPropagator().observeIgnoredEvents(n)}},{key:"closeHangingKeyCombination",value:function(n,r){this._focusOnlyEventStrategy.closeHangingKeyCombination(n,r)}},{key:"reactAppHistoryWithEvent",value:function(n,r){var i=this._focusOnlyEventStrategy.eventPropagator.getPreviousPropagation();return i.isForKey(n)&&i.isForEventType(r)?i.isHandled()?B.handled:i.isIgnoringEvent()?B.ignored:B.seen:B.unseen}},{key:"simulatePendingKeyPressEvents",value:function(){this._focusOnlyEventStrategy.simulatePendingKeyPressEvents()}},{key:"simulatePendingKeyUpEvents",value:function(){this._focusOnlyEventStrategy.simulatePendingKeyUpEvents()}},{key:"isGlobalListenersBound",value:function(){return this._globalEventStrategy.listenersBound}}]),e}();function Qi(e,t){var n=t.deprecatedAPI,r=n.contextTypes,i=n.childContextTypes,o=t.newAPI.contextType;if(typeof p.createContext>"u")e.contextTypes=r,e.childContextTypes=i,e.prototype.getChildContext=function(){return this._childContext};else{var a=p.createContext(o);e.contextType=a,e.prototype._originalRender=e.prototype.render,e.prototype.render=function(){var s=this._originalRender();return s?p.createElement(a.Provider,{value:this._childContext},s):null}}return e}function Yi(e){function t(a,s){return ue({},i[a]||{},s[a]||{})}function n(a){return t("handlers",a)}function r(a){return t("keyMap",a)}var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},o=function(a){function s(u){var l;return H(this,s),l=ge(this,z(s).call(this,u)),l._handleFocus=l._handleFocus.bind(V(V(l))),l._handleBlur=l._handleBlur.bind(V(V(l))),l._handleKeyDown=l._handleKeyDown.bind(V(V(l))),l._handleKeyPress=l._handleKeyPress.bind(V(V(l))),l._handleKeyUp=l._handleKeyUp.bind(V(V(l))),l._componentIsFocused=l._componentIsFocused.bind(V(V(l))),l._id=Z.getInstance().registerKeyMap(u.keyMap),l._childContext={hotKeysParentId:l._id},l}return ye(s,a),j(s,[{key:"render",value:function(){var l=this.props;l.keyMap,l.handlers,l.allowChanges,l.root;var c=bt(l,["keyMap","handlers","allowChanges","root"]),f={onFocus:this._wrapFunction("onFocus",this._handleFocus),onBlur:this._wrapFunction("onBlur",this._handleBlur),tabIndex:F.option("defaultTabIndex")};return this._shouldBindKeyListeners()&&(f.onKeyDown=this._handleKeyDown,f.onKeyPress=this._handleKeyPress,f.onKeyUp=this._handleKeyUp),p.createElement(e,Vt({hotKeys:f},c))}},{key:"_shouldBindKeyListeners",value:function(){var l=r(this.props);return!lt(l)||this.props.root||F.option("enableHardSequences")&&this._handlersIncludeHardSequences(l,n(this.props))}},{key:"_handlersIncludeHardSequences",value:function(l,c){return Object.keys(c).some(function(f){return!l[f]&&cn.isValidKeySerialization(f)})}},{key:"_wrapFunction",value:function(l,c){var f=this;return typeof this.props[l]=="function"?function(d){f.props[l](d),c(d)}:c}},{key:"_focusTreeIdsPush",value:function(l){this._focusTreeIds||(this._focusTreeIds=[]),this._focusTreeIds.push(l)}},{key:"_focusTreeIdsShift",value:function(){this._focusTreeIds&&this._focusTreeIds.shift()}},{key:"_getFocusTreeId",value:function(){if(this._focusTreeIds)return this._focusTreeIds[0]}},{key:"componentDidUpdate",value:function(){var l=Z.getInstance();if(l.reregisterKeyMap(this._id,this.props.keyMap),this._componentIsFocused()&&(this.props.allowChanges||!F.option("ignoreKeymapAndHandlerChangesByDefault"))){var c=this.props,f=c.keyMap,d=c.handlers;l.updateEnabledHotKeys(this._getFocusTreeId(),this._id,f,d,this._getComponentOptions())}}},{key:"_componentIsFocused",value:function(){return this._focused===!0}},{key:"componentDidMount",value:function(){var l=Z.getInstance(),c=this.context.hotKeysParentId;l.registerComponentMount(this._id,c)}},{key:"_handleFocus",value:function(){if(this.props.onFocus){var l;(l=this.props).onFocus.apply(l,arguments)}var c=Z.getInstance().enableHotKeys(this._id,r(this.props),n(this.props),this._getComponentOptions());se(c)||this._focusTreeIdsPush(c),this._focused=!0}},{key:"componentWillUnmount",value:function(){var l=Z.getInstance();l.deregisterKeyMap(this._id),l.registerComponentUnmount(),this._handleBlur()}},{key:"_handleBlur",value:function(){if(this.props.onBlur){var l;(l=this.props).onBlur.apply(l,arguments)}var c=Z.getInstance().disableHotKeys(this._getFocusTreeId(),this._id);c||this._focusTreeIdsShift(),this._focused=!1}},{key:"_handleKeyDown",value:function(l){var c=Z.getInstance().handleKeydown(l,this._getFocusTreeId(),this._id,this._getEventOptions());c&&this._focusTreeIdsShift()}},{key:"_handleKeyPress",value:function(l){var c=Z.getInstance().handleKeyPress(l,this._getFocusTreeId(),this._id,this._getEventOptions());c&&this._focusTreeIdsShift()}},{key:"_handleKeyUp",value:function(l){var c=Z.getInstance().handleKeyUp(l,this._getFocusTreeId(),this._id,this._getEventOptions());c&&this._focusTreeIdsShift()}},{key:"_getComponentOptions",value:function(){return{defaultKeyEvent:F.option("defaultKeyEvent")}}},{key:"_getEventOptions",value:function(){return{ignoreEventsCondition:F.option("ignoreEventsCondition")}}}]),s}(k.exports.PureComponent);return J(o,"propTypes",{keyMap:D.exports.object,handlers:D.exports.object,onFocus:D.exports.func,onBlur:D.exports.func,allowChanges:D.exports.bool,root:D.exports.bool}),Qi(o,{deprecatedAPI:{contextTypes:{hotKeysParentId:D.exports.number},childContextTypes:{hotKeysParentId:D.exports.number}},newAPI:{contextType:{hotKeysParentId:void 0}}})}var Eu=function(e){function t(){return H(this,t),ge(this,z(t).apply(this,arguments))}return ye(t,e),j(t,[{key:"render",value:function(){var r=this.props,i=r.hotKeys,o=r.innerRef,a=r.component,s=bt(r,["hotKeys","innerRef","component"]),u=a||F.option("defaultComponent");return p.createElement(u,ue({},i,{ref:o},s))}}]),t}(k.exports.Component),Zi=Yi(Eu);Zi.propTypes={innerRef:D.exports.oneOfType([D.exports.object,D.exports.func])};var eo=function(e){function t(n){var r;return H(this,t),r=ge(this,z(t).call(this,n)),r._id=Z.getInstance().registerGlobalKeyMap(n.keyMap),r._childContext={globalHotKeysParentId:r._id},r}return ye(t,e),j(t,[{key:"render",value:function(){return this.props.children||null}},{key:"componentDidUpdate",value:function(){var r=Z.getInstance();if(r.reregisterGlobalKeyMap(this._id,this.props.keyMap),this.props.allowChanges||!F.option("ignoreKeymapAndHandlerChangesByDefault")){var i=this.props,o=i.keyMap,a=i.handlers;r.updateEnabledGlobalHotKeys(this._id,o,a,this._getComponentOptions(),this._getEventOptions())}}},{key:"componentDidMount",value:function(){var r=this.props,i=r.keyMap,o=r.handlers,a=this.context.globalHotKeysParentId,s=Z.getInstance();s.registerGlobalComponentMount(this._id,a),s.enableGlobalHotKeys(this._id,i,o,this._getComponentOptions(),this._getEventOptions())}},{key:"componentWillUnmount",value:function(){var r=Z.getInstance();r.deregisterGlobalKeyMap(this._id),r.disableGlobalHotKeys(this._id),r.registerGlobalComponentUnmount()}},{key:"_getComponentOptions",value:function(){return{defaultKeyEvent:F.option("defaultKeyEvent")}}},{key:"_getEventOptions",value:function(){return{ignoreEventsCondition:F.option("ignoreEventsCondition")}}}]),t}(k.exports.Component);J(eo,"propTypes",{keyMap:D.exports.object,handlers:D.exports.object,allowChanges:D.exports.bool});var _u=Qi(eo,{deprecatedAPI:{contextTypes:{globalHotKeysParentId:D.exports.number},childContextTypes:{globalHotKeysParentId:D.exports.number}},newAPI:{contextType:{globalHotKeysParentId:void 0}}});function dn(e){var t,n,r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{only:[],except:[]},i=2<arguments.length?arguments[2]:void 0;return n=t=function(o){function a(s){var u;return H(this,a),u=ge(this,z(a).call(this,s)),u._handleKeyEvent=u._handleKeyEvent.bind(V(V(u))),u._reloadDictionaries=u._reloadDictionaries.bind(V(V(u))),u}return ye(a,o),j(a,[{key:"render",value:function(){var u=this.props;u.only,u.except;var l=bt(u,["only","except"]),c={onKeyDown:this._handleKeyEvent,onKeyPress:this._handleKeyEvent,onKeyUp:this._handleKeyEvent,onFocus:this._reloadDictionaries};return p.createElement(e,Vt({hotKeys:c},l))}},{key:"_reloadDictionaries",value:function(){var u=this.props,l=u.only,c=u.except;this._onlyDict=Or(l),this._exceptDict=Or(c)}},{key:"_shouldIgnoreEvent",value:function(u){var l=u.key;return lt(this._onlyDict)?!!lt(this._exceptDict)||!ae(this._exceptDict,l):lt(this._exceptDict)?ae(this._onlyDict,l):ae(this._onlyDict,l)&&!ae(this._exceptDict,l)}},{key:"_handleKeyEvent",value:function(u){this._shouldIgnoreEvent(u)&&Z.getInstance()[i](u)}}]),a}(k.exports.PureComponent),J(t,"propTypes",{only:D.exports.oneOfType([D.exports.string,D.exports.arrayOf(D.exports.string)]),except:D.exports.oneOfType([D.exports.string,D.exports.arrayOf(D.exports.string)])}),J(t,"defaultProps",r),n}function Or(e){return yt(e).reduce(function(t,n){var r=ji(n);if(!Bi(r))throw new $i(n);return[Xn,Jn,zn,ln,Wn,Vn].forEach(function(i){t[i(r)]=!0}),t},{})}var ku=function(e){function t(){return H(this,t),ge(this,z(t).apply(this,arguments))}return ye(t,e),j(t,[{key:"render",value:function(){var r=this.props,i=r.hotKeys,o=bt(r,["hotKeys"]),a=o.component||F.option("defaultComponent");return p.createElement(a,ue({},i,o))}}]),t}(k.exports.Component),Su=dn(ku,{},"ignoreEvent"),wu=function(e){function t(){return H(this,t),ge(this,z(t).apply(this,arguments))}return ye(t,e),j(t,[{key:"render",value:function(){var r=this.props,i=r.hotKeys,o=bt(r,["hotKeys"]),a=o.component||F.option("defaultComponent");return p.createElement(a,ue({},i,o))}}]),t}(k.exports.Component),xu=dn(wu,{},"observeIgnoredEvents");function Cu(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{only:[],except:[]};return dn(e,t,"ignoreEvent")}function Tu(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{only:[],except:[]};return dn(e,t,"observeIgnoredEvents")}function Ou(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};F.init(e)}function Ku(){return Z.getInstance().getApplicationKeyMap()}function Iu(e){var t=Z.getInstance();return t.addKeyCombinationListener(e)}const Pu=Object.freeze(Object.defineProperty({__proto__:null,HotKeys:Zi,GlobalHotKeys:_u,IgnoreKeys:Su,ObserveKeys:xu,withHotKeys:Yi,withIgnoreKeys:Cu,withObserveKeys:Tu,configure:Ou,getApplicationKeyMap:Ku,recordKeyCombination:Iu},Symbol.toStringTag,{value:"Module"})),Au=go(Pu);(function(e){e.exports=Au})(Li);const to=G.div`
  background-color: transparent;
  border: none;
  padding: 0.27rem 0.5rem 0.5rem 0;
  color: ${({theme:e})=>e.brand};
  height: 1rem;
  border: none;
  font-weight: bold;
`,Du=X(G.div`
  box-sizing: border-box;
  border-radius: 3px;
  background-color: ${({theme:e})=>e.backgroundDarker};
  box-shadow: 0 2px 25px 0 ${({theme:e})=>e.darkShadow};
  color: ${({theme:e})=>e.fontDark};
  border-radius: 2px;
  padding: 0.5rem;
  line-height: 1rem;
  margin-top: 2.5rem;
  font-weight: bold;
  position: fixed;
  width: auto;
  z-index: 802;
`),Lu=G.div`
  color: ${({theme:e})=>e.font};
  display: flex;
  padding-bottom: 0.5rem;
`,Qn=p.memo(({barRef:e,followRef:t,serviceRef:n,style:r,machine:i})=>{const o=k.exports.useContext(Qe);let a,s;i?[a,s]=i:[a,s]=Je(n);const u=k.exports.useRef(),[l,c]=k.exports.useState(null),{error:f,errorId:d}=a.context,[h,g]=oe(()=>({...t?{left:t.current.getBoundingClientRect().x,top:t.current.getBoundingClientRect().y}:{},opacity:d?1:0,from:{opacity:0},config:Yt.stiff}));return k.exports.useEffect(()=>{l&&clearTimeout(l),!d&&c(setTimeout(()=>s("CLEAR_ERROR"),1e3)),g({opacity:d?1:0})},[d]),Ln(u,()=>s("CLEAR_ERROR_ID")),Ar(e,t,g),p.createElement(Du,{ref:u,style:{...h,display:f?"block":"none",...r}},f?p.createElement(p.Fragment,null,p.createElement(Lu,null,p.createElement(Vo,{style:{color:o.error,marginRight:"0.5rem"}}),p.createElement("div",{style:{marginTop:"0.25rem"}},`Invalid ${f.name}.`)),f.error):null)}),Mu=X(G.div`
  cursor: pointer;
  margin: 0.25rem 0.25rem;
  padding: 0.1rem 0.25rem;
  font-weight: bold;
  color: ${({theme:e})=>e.fontDark};
`),Ru=p.memo(({result:e,isActive:t,send:n,highlight:r})=>{const i=k.exports.useRef(null),o=k.exports.useContext(Qe),[a,s]=oe(()=>({backgroundColor:t?o.backgroundLight:o.backgroundDark,color:t?o.font:o.fontDark}));k.exports.useEffect(()=>{s({backgroundColor:t?o.backgroundLight:o.backgroundDark,color:t?o.font:o.fontDark}),t&&i.current&&i.current.scrollIntoView()},[t,i.current]);const u=()=>s({backgroundColor:o.backgroundLight,color:o.font}),l=()=>!t&&s({backgroundColor:o.backgroundDark,color:o.fontDark}),c=f=>n({type:"COMMIT",value:f.target.dataset.result,click:!0});return p.createElement(Mu,{ref:i,onClick:c,onMouseEnter:u,onMouseLeave:l,style:a,"data-result":e},[null,void 0].includes(e)?p.createElement("code",{style:{color:r}},"None"):e)}),Nu=X(G.div`
  background-color: ${({theme:e})=>e.backgroundDark};
  border: 1px solid ${({theme:e})=>e.backgroundDarkBorder};
  border-radius: 2px;
  box-shadow: 0 2px 20px ${({theme:e})=>e.backgroundDark};
  box-sizing: border-box;
  margin-top: 2.5rem;
  position: fixed;
  width: auto;
  z-index: 801;
  max-height: 328px;
  overflow-y: scroll;
  scrollbar-width: none;

  &::-webkit-scrollbar {
    width: 0px;
    background: transparent;
    display: none;
  }
  &::-webkit-scrollbar-thumb {
    width: 0px;
    display: none;
  }
`),no=p.memo(({results:e,send:t,currentResult:n,barRef:r,followRef:i,bestMatch:o,highlight:a,...s})=>{const[u,l]=oe(()=>({...i?{left:i.current.getBoundingClientRect().x,top:i.current.getBoundingClientRect().y}:{},opacity:1,from:{opacity:0},config:Yt.stiff}));return Ar(r,i,l),e.length?p.createElement(Nu,{style:u,onMouseEnter:()=>t("MOUSEENTER"),onMouseLeave:()=>t("MOUSELEAVE"),...s},e.map((c,f)=>p.createElement(Ru,{key:c,result:c,isActive:n===f||o===c,send:t,highlight:a}))):null}),Jt=(e,t)=>{t=t||"";const n=e.filter(r=>r.toLowerCase().startsWith(t.toLowerCase()))[0];return n&&t.length?{placeholder:n.slice(t.length),value:n}:{placeholder:"",value:null}},Xt=(e,t)=>{const n=e.filter(r=>r.toLowerCase()===t.toLowerCase());return n.length===1?n[0]:null},{assign:ce}=$n,bn=e=>typeof e!="string"?String(e):e,ro=e=>e.includes("|")?["Union[",e.split("|").map(t=>ro(t)).join(", "),"]"].join(""):e==="list<str>"?"List[str]":e==="list<id>"?"List[id]":e,Ae={bool:{castFrom:e=>e?"True":"False",castTo:e=>["true","false"].indexOf(e.toLowerCase())===0,parse:e=>e.toLowerCase().charAt(0).toUpperCase()+e.toLowerCase().slice(1),validate:e=>["true","false"].indexOf(bn(e).toLowerCase())>=0},float:{castFrom:e=>String(e),castTo:e=>+e,parse:e=>{const t=e.replace(/[\s]/g,""),[n,r]=t.split(".");return n.replace(/\B(?=(\d{3})+(?!\d))/g,",")+(r?"."+r:"")},validate:e=>{const t=bn(e).replace(/[\s]/g,"");return t!==""&&!isNaN(+t)}},field:{castFrom:e=>e,castTo:e=>e,parse:(e,t)=>t.filter(n=>n.toLowerCase()===e.toLowerCase())[0],validate:(e,t)=>typeof e=="string"&&t.includes(e.toLowerCase())},dict:{castFrom:e=>JSON.stringify(e,null,2),castTo:e=>typeof e=="string"?JSON.parse(e):e,parse:e=>e,validate:e=>{try{return(typeof e=="string"?JSON.parse(e):e)instanceof Object&&!Array.isArray(e)}catch{return!1}}},id:{castFrom:e=>e,castTo:e=>e,parse:e=>e,validate:e=>/[0-9A-Fa-f]{24}/g.test(e)},int:{castFrom:e=>String(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),castTo:e=>+e.replace(/[,\s]/g,""),parse:e=>String(+e.replace(/[,\s]/g,"")).replace(/\B(?=(\d{3})+(?!\d))/g,","),validate:e=>/^\d+$/.test(bn(e).replace(/[,\s]/g,""))},json:{castFrom:e=>JSON.stringify(e,null,2),castTo:e=>typeof e=="string"?JSON.parse(e):e,parse:e=>e,validate:e=>{try{return JSON.parse(e),!0}catch{return!1}}},"list<field>":{castFrom:e=>e.join(","),castTo:e=>e.split(","),parse:e=>e.replace(/[\s\'\"\[\]]/g,""),validate:(e,t)=>{const n=e.replace(/[\s]/g,"");let r=null;try{r=JSON.parse(n)}catch{r=n.split(",")}return Array.isArray(r)&&r.every(i=>Ae.field.validate(i,t))}},"list<id>":{castFrom:e=>e.join(","),castTo:e=>e.split(","),parse:e=>e.replace(/[\s\'\"\[\]]/g,""),validate:e=>{const t=e.replace(/[\s]/g,"");let n=null;try{n=JSON.parse(t)}catch{n=t.split(",")}return Array.isArray(n)&&n.every(r=>Ae.id.validate(r))}},"list<str>":{castFrom:e=>e.join(","),castTo:e=>e.split(","),parse:e=>e.replace(/[\s\'\"\[\]]/g,""),validate:e=>{const t=e.replace(/[\s]/g,"");let n=null;try{n=JSON.parse(t)}catch{n=t.split(",")}return Array.isArray(n)&&n.every(r=>Ae.str.validate(r))}},NoneType:{castFrom:e=>e===null?"None":e,castTo:()=>null,parse:()=>"None",validate:e=>[null,"None",""].some(t=>e===t)},str:{castFrom:e=>e,castTo:e=>e,parse:e=>e,validate:e=>{if(typeof e!="string")return!1;try{return JSON.parse(e),!1}catch{return!0}}}},Kr=Gn({id:"viewStageParameter",initial:"decide",context:{id:void 0,defaultValue:void 0,parameter:void 0,stage:void 0,type:void 0,value:"",submitted:void 0,tail:void 0,focusOnInit:void 0,error:void 0,fieldNames:[]},states:{decide:{always:[{target:"editing",cond:e=>e.focusOnInit},{target:"reading.submitted",cond:e=>e.submitted},{target:"reading.pending"}]},reading:{initial:"pending",entry:"blurInput",states:{pending:{},submitted:{}},on:{EDIT:"editing"}},editing:{entry:[$e("PARAMETER.EDIT"),ce({bestMatch:({fieldNames:e,value:t,type:n})=>n==="field"?Jt(e,t):{},currentResult:null,prevValue:({value:e})=>e,focusOnInit:!1,results:({type:e,fieldNames:t,value:n})=>e==="field"?t.filter(r=>r.toLowerCase().startsWith(n.toLowerCase())):[]}),"focusInput"],initial:"notHovering",states:{hovering:{on:{MOUSELEAVE:"notHovering"}},notHovering:{on:{MOUSEENTER:"hovering"}}},on:{CHANGE:{actions:[ce({bestMatch:({fieldNames:e,type:t},{value:n})=>t==="field"?Jt(e,n):{},currentResult:null,value:(e,{value:t})=>t,errorId:void 0,results:({type:e,fieldNames:t},{value:n})=>e==="field"?t.filter(r=>r.toLowerCase().startsWith(n.toLowerCase())):[]})]},COMMIT:[{target:"decide",actions:[ce({submitted:!0,value:({type:e,value:t,defaultValue:n,fieldNames:r,bestMatch:i},{value:o})=>{const a=e==="field"?Xt(r,t):null;return t=o||t,t=a||(i.value?i.value:t),t===""&&n?n:e.split("|").reduce((s,u)=>{if(s!==void 0)return s;const l=Ae[u];return l.validate(t,r)?l.parse(t,r):s},void 0)},errorId:void 0,bestMatch:{}}),"blurInput",$e(e=>({type:"PARAMETER.COMMIT",parameter:e}))],cond:({type:e,fieldNames:t,value:n,defaultValue:r,bestMatch:i},{value:o})=>{n=o||n;const a=e==="field"?Xt(t,n):null;return n=a||(i.value?i.value:n),n===""&&r||e.split("|").some(s=>Ae[s].validate(n,t))}},{actions:[ce({error:({type:e})=>({name:"value",error:`Expected type "${ro(e)}"`}),errorId:Zt()})]}],CANCEL:{target:"reading.pending",actions:[ce({value:({prevValue:e})=>e,errorId:void 0})]},NEXT_RESULT:{actions:ce({currentResult:({currentResult:e,results:t})=>e===null?0:Math.min(e+1,t.length-1),value:({currentResult:e,results:t})=>e===null?t[0]:t[Math.min(e+1,t.length-1)],bestMatch:{}})},PREVIOUS_RESULT:{actions:ce({currentResult:({currentResult:e})=>e===0||e===null?null:e-1,value:({currentResult:e,prevValue:t,results:n})=>e===0||e===null?t:n[e-1],bestMatch:{}})}}}},on:{BLUR:[{target:"reading.pending",cond:({submitted:e,prevValue:t})=>!e&&t!=="",actions:[ce({value:({prevValue:e})=>e})]},{target:"reading.submitted",cond:({submitted:e})=>e}],FOCUS:{actions:"focusInput"},CLEAR_ERROR:{actions:[ce({error:void 0})]},CLEAR_ERROR_ID:{actions:[ce({errorId:void 0})]},UPDATE:{actions:ce({active:(e,{active:t})=>t})}}},{actions:{blurInput:()=>{},focusInput:()=>{}}}),Fu=G.div`
  display: flex;
  overflow: visible;
  z-index: 800;
`,ju=X(G.div`
  box-sizing: border-box;
  border: 1px solid ${({theme:e})=>e.brand};
  display: flex;
  overflow: visible;
  height: 100%;
`),Hu=X(G(Dr)`
  & > input {
    background-color: transparent;
    border: none;
    padding: 0.5rem 0 0.5rem 0.5rem;
    color: ${({theme:e})=>e.font};
    height: 1rem;
    font-weight: bold;
  }

  & > input:focus {
    border: none;
    outline: none;
  }

  & ::placeholder {
    color: ${({theme:e})=>e.font};
  }
`),Uu=X(G.div`
  font-weight: bold;
  position: fixed;
  line-height: 1rem;
  font-size: 14px;
  margin-left: -1px;
  overflow: visible;
  display: flex;
  border: 1px solid pink;
  border-style: solid;
  z-index: 800;
  will-change: transform;
  min-width: 2rem;
`),Bu=X(G.textarea`
  background-color: transparent;
  overflow: visible;
  line-height: 1rem;
  border: none;
  color: ${({theme:e})=>e.font};
  height: 100%;
  font-size: 14px;
  will-change: tranform;
  resize: none;

  &::-webkit-scrollbar {
    width: 0px;
    background: transparent;
    display: none;
  }
  &::-webkit-scrollbar-thumb {
    width: 0px;
    display: none;
  }

  &:focus {
    border: none;
    outline: none;
  }
`),$u=X(G.button`
  box-sizing: border-box;
  border: 1px solid ${({theme:e})=>e.brand};
  color: ${({theme:e})=>e.font};
  background-color: ${({theme:e})=>e.backgroundLight};
  border-radius: 3px;
  position: relative;
  line-height: 1rem;
  cursor: pointer;
  font-weight: bold;
  position: absolute;
  bottom: 0.5rem;
  right: 0.5rem;

  :focus {
    outline: none;
  }
`),qu=p.memo(({send:e})=>{const t=oe({opacity:1,from:{opacity:0}});return p.createElement($u,{style:t,onClick:()=>e("COMMIT")},"Submit")}),Gu=(e,t)=>Ae.dict.validate(e)?"  . . .  ":e===""?t:e,io=({placeholder:e,parameter:t})=>e!==void 0?e:t;let En;const zu=({barRef:e,parameterRef:t,followRef:n,inputRef:r,stageRef:i,onClose:o,hasExpansion:a})=>{const[s,u]=Je(t),[l]=Je(i),c=k.exports.useContext(Qe),f=k.exports.useRef(null),{active:d,value:h}=s.context,[g,m]=oe(()=>({height:s.matches("editing")?200:36,position:s.matches("editing")?"fixed":"relative",backgroundColor:s.matches("editing")?c.backgroundDark:s.matches("reading.submitted")?c.backgroundLight:c.background,borderColor:d&&l.matches("focusedViewBar.yes")?c.brand:c.fontDarkest,opacity:1,from:{opacity:0}})),b=oe({width:s.matches("editing")?400:0});Ln(f,v=>{u("BLUR"),o()}),k.exports.useEffect(()=>{m({position:s.matches("editing")?"fixed":"relative",backgroundColor:s.matches("editing")?c.backgroundDark:s.matches("reading.submitted")?c.backgroundLight:c.background,borderColor:d&&l.matches("focusedViewBar.yes")?c.brand:c.fontDarkest,height:s.matches("editing")?200:36,opacity:1})},[s.matches("editing"),d,l.matches("focusedViewBar.yes")]);const S=()=>{En&&window.cancelAnimationFrame(En),En=window.requestAnimationFrame(()=>{const{x:v,y:w}=s.matches("editing")?n.current.getBoundingClientRect():{x:0,y:0};f.current.style.top=s.matches("editing")?`${w}px`:"unset",f.current.style.left=s.matches("editing")?`${v}px`:"unset";const{x:T,width:_}=e.current.getBoundingClientRect(),K=T+_;f.current.style.width=s.matches("editing")?`${Math.min(K-v,400)}px`:"auto"})};return Yn(e.current?e.current:null,"scroll",S),Yn(window,"scroll",S),vo(f?f.current:null,S),p.createElement(p.Fragment,null,s.matches("editing")&&p.createElement(X.div,{style:{height:"100%",...b}}),p.createElement(Uu,{style:g,onClick:()=>s.matches("reading")&&u("EDIT"),ref:f},s.matches("reading")?p.createElement("div",{style:{padding:"0.5em",whiteSpace:"nowrap"}},Gu(h,io(s.context))):p.createElement(p.Fragment,null,p.createElement(Bu,{key:"textarea",autoFocus:s.matches("editing"),style:b,onChange:v=>{u({type:"CHANGE",value:v.target.value.replace(/&#13/g,`
`)})},onKeyDown:v=>{["Escape","Tab"].includes(v.key)&&(u("COMMIT"),o())},value:h,ref:r}),a&&p.createElement(Go,{style:{cursor:"pointer",color:c.font,marginTop:"0.2em",position:"absolute",right:"0.2rem"},onClick:o}),p.createElement(qu,{key:"submit",send:u})),p.createElement(Qn,{key:"error",serviceRef:t,style:{marginTop:"12.5rem",marginLeft:0}})))},Vu=p.memo(({parameterRef:e,barRef:t,stageRef:n})=>{const r=k.exports.useContext(Qe),[i,o]=Je(e),[a]=Je(n),s=k.exports.useRef(),[u,l]=k.exports.useState({}),[c,f]=k.exports.useState(!1),{type:d,value:h,active:g,currentResult:m,results:b,bestMatch:S}=i.context,v=d.split("|").some(E=>["dict","json"].includes(E)),w=d==="dict|str",T=v&&(!w||c);let _=!1;try{const E=JSON.parse(h);_=!Array.isArray(E)&&typeof E=="object"}catch{}k.exports.useEffect(()=>{!w||c||_&&f(!0)},[h]);const K=oe({backgroundColor:i.matches("editing")?r.backgroundDark:i.matches("reading.submitted")?r.backgroundLight:r.background,borderStyle:"solid",borderColor:g&&a.matches("focusedViewBar.yes")?r.brand:r.fontDarkest,height:T&&i.matches("editing")?200:36,borderWidth:T?0:1,borderRightWidth:0,opacity:1,from:{opacity:0}}),x=i.matches("editing");return k.exports.useEffect(()=>{x&&s.current&&s.current.focus(),!x&&s.current&&s.current.blur()},[x,s.current]),p.createElement(p.Fragment,null,p.createElement(Fu,{ref:E=>E&&E!==u.current&&l({current:E})},T?p.createElement(zu,{parameterRef:e,barRef:t,followRef:u,inputRef:s,stageRef:n,onClose:()=>{!w||(f(!1),_&&o("BLUR"))},hasExpansion:w}):p.createElement(ju,{style:K},p.createElement(Hu,{placeholder:io(i.context),autoFocus:i.matches("editing"),value:_?". . .":i.matches("reading")&&h.length>24?h.slice(0,25)+"...":h,onFocus:()=>!x&&o({type:"EDIT"}),onBlur:()=>i.matches("editing.notHovering")&&o({type:"COMMIT"}),onChange:E=>{o({type:"CHANGE",value:E.target.value})},onKeyPress:E=>{E.key==="Enter"&&x&&o({type:"COMMIT"})},onKeyDown:E=>{switch(E.key){case"Tab":o("COMMIT");case"Escape":o("COMMIT");break;case"ArrowDown":o("NEXT_RESULT");break;case"ArrowUp":o("PREVIOUS_RESULT");break;case"ArrowRight":E.target.selectionStart===E.target.value.length&&S.value&&o({type:"CHANGE",value:S.value});break}},ref:s}),p.createElement(to,null,S?S.placeholder:""),w&&x&&p.createElement(qo,{style:{cursor:"pointer",color:r.font,marginTop:"0.2em"},onMouseEnter:()=>o("MOUSEENTER"),onMouseLeave:()=>o("MOUSELEAVE"),onClick:()=>f(!0)}))),i.matches("editing")&&t.current&&u.current&&p.createElement(no,{results:b,send:o,currentResult:m,bestMatch:S.value,followRef:u,barRef:t}),!v&&u.current&&p.createElement(Qn,{key:"error",serviceRef:e,barRef:t,followRef:u}))}),Wu=X(G.div`
  margin: 0.5rem 0.25rem;
  display: flex;
  position: relative;
`),Ju=X(G.div`
  box-sizing: border-box;
  border: 1px solid ${({theme:e})=>e.brand};
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
  border-right-width: 0;
  position: relative;
  display: flex;
`),Xu=G(Dr)`
  & input {
    background-color: transparent;
    border: none;
    padding: 0.5rem;
    color: ${({theme:e})=>e.font};
    height: 1rem;
    border: none;
    font-weight: bold;
  }

  & input:focus {
    border: none;
    outline: none;
    font-weight: bold;
    padding-right: 0;
  }

  & ::placeholder {
    color: ${({theme:e})=>e.font};
    font-weight: bold;
  }
`,Qu=X(G.div`
  box-sizing: border-box;
  border: 1px dashed ${({theme:e})=>e.fontDarkest};
  color: ${({theme:e})=>e.fontDarkest};
  border-radius: 3px;
  position: relative;
  margin: 0.5rem;
  cursor: pointer;
  font-weight: bold;

  padding: 0 0.25rem;

  :focus {
    outline: none;
  }
`),Yu=G.div`
  width: 14px;
  height: 32px;
  display: block;
  position: relative;
  overflow: hidden;
`;X(G(Bo)`
  display: block;
  font-size: 14px;
`);X(G(zo)`
  position: absolute;
`);const Ir=p.memo(({send:e,index:t,active:n})=>{const r=k.exports.useContext(Qe),[i,o]=k.exports.useState(!1),[a,s]=oe(()=>({background:r.background,color:n?r.font:r.fontDarkest,borderColor:n?r.brand:r.fontDarkest,top:n?-3:0,opacity:1,from:{opacity:0},config:Yt.stiff}));k.exports.useEffect(()=>{s({top:n?-3:0,color:n?r.font:r.fontDarkest,borderColor:n?r.brand:r.fontDarkest}),n?d():h()},[n]);const[u,l]=oe(()=>({marginTop:n?0:31})),[c,f]=oe(()=>({marginTop:n?-31:0})),d=()=>{s({background:r.background}),l({marginTop:0}),f({marginTop:-31})},h=()=>{s({background:r.backgroundDark}),l({marginTop:31}),f({marginTop:0})};return k.exports.useEffect(()=>{(n||i)&&d(),!n&&!i&&h()},[n,i]),p.createElement(Qu,{style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onClick:()=>e({type:"STAGE.ADD",index:t})},p.createElement(Yu,null,p.createElement(X.div,{style:{...c,textAlign:"center",height:"100%",lineHeight:"2rem"}},">"),p.createElement(X.div,{style:{...u,textAlign:"center",height:"100%",lineHeight:"2rem"}},"+")))}),Zu=X(G.div`
  box-sizing: border-box;
  border: 1px solid ${({theme:e})=>e.brand};
  position: relative;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
  cursor: pointer;
`),el=X(G.button`
  background-color: ${({theme:e})=>e.backgroundLight};
  border: none;
  padding: 0.5rem;
  color: ${({theme:e})=>e.font};
  height: 1rem;
  display: block;
  height: 100%;
  border: none;
  cursor: pointer;
  font-weight: bold;
  margin: 0;

  :focus {
    outline: none;
  }
`),tl=p.memo(({send:e,spring:t})=>p.createElement(Zu,{style:t,onClick:()=>e("STAGE.DELETE")},p.createElement(el,null,p.createElement(Mn,{style:{fontSize:"14px",display:"block"}})))),nl=p.memo(({barRef:e,stageRef:t})=>{const n=k.exports.useContext(Qe),[r,i]=Je(t),o=k.exports.useRef(),[a,s]=k.exports.useState({}),{stage:u,stageInfo:l,parameters:c,results:f,currentResult:d,focusOnInit:h,active:g,bestMatch:m}=r.context,b=["input.reading.selected","input.reading.submitted"].some(r.matches),S=oe({borderColor:g&&r.matches("focusedViewBar.yes")?n.brand:n.fontDarkest,opacity:1,from:{opacity:0}}),v=oe({backgroundColor:b?n.backgroundLight:n.background,borderRightWidth:r.matches("delible.yes")&&c.length?0:1,borderColor:g&&r.matches("focusedViewBar.yes")?n.brand:n.fontDarkest,borderTopRightRadius:c.length?0:3,borderBottomRightRadius:c.length?0:3,opacity:1,from:{opacity:0}}),w=oe({top:r.matches("focusedViewBar.yes")&&r.context.active?-3:0,config:Yt.stiff}),T=r.matches("input.editing");return k.exports.useEffect(()=>{T&&o.current&&o.current.focus(),!T&&o.current&&o.current.blur()},[T,o.current]),p.createElement(p.Fragment,null,p.createElement(Wu,{style:w,ref:_=>_&&_!==a.current&&s({current:_})},p.createElement(Ju,{style:v},p.createElement(Xu,{placeholder:u.length===0?"+ add stage":"",value:u,autoFocus:h,onFocus:()=>!T&&i("EDIT"),onBlur:_=>{r.matches("input.editing.searchResults.notHovering")&&i("BLUR")},onChange:_=>i({type:"CHANGE",value:_.target.value}),onKeyPress:_=>{if(_.key==="Enter"){const K=Xt(l.map(x=>x.name),_.target.value);i({type:"COMMIT",value:K||(m.value?m.value:_.target.value)})}},onKeyDown:_=>{switch(_.key){case"Escape":i("BLUR");break;case"ArrowDown":i("NEXT_RESULT");break;case"ArrowUp":i("PREVIOUS_RESULT");break;case"ArrowRight":_.target.selectionStart===_.target.value.length&&m.value&&i({type:"CHANGE",value:m.value});break}},style:{fontSize:"1rem"},ref:o}),r.matches("input.editing")?p.createElement(to,null,m?m.placeholder:""):null,b&&p.createElement("div",{style:{width:"1rem",height:"1rem",margin:"0.4rem 0.5rem 0.5rem 0"}},p.createElement(Fr,{href:`https://voxel51.com/docs/fiftyone/api/fiftyone.core.stages.html#fiftyone.core.stages.${u}`,style:{maxHeight:"1rem",width:"1rem",display:"block"}},p.createElement(Lr,{style:{width:"1rem",height:"1rem"}})))),c.filter(_=>!_.parameter.startsWith("_")).map(_=>p.createElement(Vu,{key:_.parameter,parameterRef:_.ref,barRef:e,stageRef:t})),c.length?p.createElement(tl,{spring:S,send:i}):null,r.matches("input.editing")&&e.current&&a.current&&p.createElement(no,{results:f,send:i,currentResult:d,bestMatch:m.value,followRef:a,barRef:e}),a.current&&p.createElement(Qn,{serviceRef:t,followRef:a,barRef:e})))}),{choose:rl}=$n,oo=(e,t,n,r,i,o,a,s,u,l,c)=>({id:Zt(),defaultValue:i,parameter:n,type:r,stage:t,value:o||"",submitted:a,focusOnInit:s,inputRef:{},tail:u,currentResult:null,results:[],active:l,placeholder:c,fieldNames:e}),il=(e,t)=>e.map(n=>n.name).some(n=>n.toLowerCase()===t.toLowerCase()),ct=Gn({id:"viewStage",context:{id:void 0,stage:void 0,parameters:[],prevStage:"",stageInfo:void 0,index:void 0,focusOnInit:void 0,length:void 0,inputRef:{},fieldNames:[]},type:"parallel",states:{input:{initial:"decide",states:{hist:{type:"history"},decide:{always:[{target:"initializing",cond:e=>e.parameters.length&&!e.parameters[0].ref},{target:"waiting",cond:e=>!e.inputRef},{target:"editing",cond:({focusOnInit:e})=>e},{target:"reading"}]},initializing:{entry:N({parameters:e=>e.parameters.map(t=>({...t,ref:Ie(Kr.withContext(t))}))}),always:"decide"},waiting:{on:{FOCUS:{target:"decide",actions:N({inputRef:(e,{inputRef:t})=>t})}}},reading:{entry:"blurInput",initial:"decide",states:{decide:{always:[{target:"pending",cond:e=>!il(e.stageInfo,e.stage)},{target:"selected"}]},hist:{type:"history"},pending:{},selected:{},submitted:{}},on:{EDIT:{target:"editing",actions:$e(({index:e})=>({type:"STAGE.EDIT",index:e}))},DELETE:{target:"deleted"}}},editing:{entry:[N({prevStage:e=>e.stage,prevSubmitted:e=>e.submitted,results:({stageInfo:e,stage:t})=>e.map(n=>n.name).filter(n=>n.toLowerCase().startsWith(t.toLowerCase())),currentResult:null,focusOnInit:!0,bestMatch:({stageInfo:e,stage:t})=>Jt(e.map(n=>n.name),t)})],type:"parallel",states:{input:{initial:"focused",states:{focused:{entry:"focusInput",on:{UNFOCUS_INPUT:"unfocused"}},unfocused:{on:{FOCUS_INPUT:"focused"}}}},searchResults:{initial:"notHovering",states:{hovering:{on:{MOUSELEAVE:"notHovering"}},notHovering:{on:{MOUSEENTER:"hovering"}}}}},on:{CHANGE:{actions:N({stage:(e,t)=>t.value,results:({stageInfo:e},t)=>e.map(n=>n.name).filter(n=>n.toLowerCase().startsWith(t.value.toLowerCase())),currentResult:null,errorId:void 0,bestMatch:({stageInfo:e},{value:t})=>Jt(e.map(n=>n.name),t)})},COMMIT:[{target:"reading.selected",actions:[N({focusOnInit:!1,stage:(e,{value:t})=>e.stageInfo.filter(n=>n.name.toLowerCase().startsWith(t.toLowerCase()))[0].name,parameters:(e,{value:t})=>{const n=e.stageInfo.filter(i=>i.name.toLowerCase().startsWith(t.toLowerCase()))[0].params;return n.map((i,o)=>oo(e.fieldNames,t,i.name,i.type,i.default,i.name.startsWith("_")?i.default:"",i.name.startsWith("_"),o===0,o===n.length-1,e.active,i.placeholder)).map(i=>({...i,ref:Ie(Kr.withContext(i))}))},errorId:void 0}),Te("UPDATE_DELIBLE"),"blurInput"],cond:({stageInfo:e},{value:t})=>Xt(e.map(n=>n.name),t)},{actions:[N({submitted:()=>!1,error:(e,{value:t})=>({name:"stage",error:`${t===""?'""':t} is not a valid stage`}),errorId:Zt()})]}],BLUR:[{target:"deleted",cond:e=>e.parameters.length===0},{target:"reading.pending",actions:[N({focusOnInit:!1}),"blurInput"]}]}},deleted:{onEntry:[N({stage:"",submitted:!1,parameters:[]}),$e(e=>({type:"STAGE.DELETE",stage:e}))],always:"reading.pending"}}},delible:{initial:"decide",states:{decide:{always:[{target:"yes",cond:e=>e.length>1||e.submitted||e.stage!==""},{target:"no"}]},yes:{},no:{}}},draggable:{initial:"decide",states:{decide:{always:[{target:"yes",cond:e=>e.length===1},{target:"no"}]},yes:{},no:{}}},focusedViewBar:{initial:"decide",states:{decide:{always:[{target:"yes",cond:e=>e.focusOnInit},{target:"no"}]},yes:{},no:{}}}},on:{CLEAR_ERROR:{actions:[N({error:void 0})]},CLEAR_ERROR_ID:{actions:[N({errorId:void 0})]},NEXT_RESULT:{actions:N({currentResult:({currentResult:e,results:t})=>e===null?0:Math.min(e+1,t.length-1),stage:({currentResult:e,results:t})=>e===null?t[0]:t[Math.min(e+1,t.length-1)],bestMatch:{}})},PREVIOUS_RESULT:{actions:N({currentResult:({currentResult:e})=>e===0||e===null?null:e-1,stage:({currentResult:e,prevStage:t,results:n})=>e===0||e===null?t:n[e-1],bestMatch:{}})},BAR_FOCUS:"focusedViewBar.yes",BAR_BLUR:"focusedViewBar.no",UPDATE_DELIBLE:"delible","STAGE.UPDATE":{target:["draggable","delible","input"],actions:[N({index:(e,{index:t})=>t,length:(e,{length:t})=>t,active:(e,{active:t})=>t,fieldNames:(e,{fieldNames:t})=>t}),(e,{active:t})=>{e.parameters.forEach(n=>n.ref.send({type:"UPDATE",active:t}))}]},"STAGE.DELETE":[{target:"input.deleted"}],"PARAMETER.COMMIT":{target:"input",actions:[N({parameters:(e,t)=>e.parameters.map(n=>n.id===t.parameter.id?{...t.parameter,ref:n.ref}:n)}),rl([{cond:e=>e.parameters.reduce((t,n)=>n.submitted?t:t+1,0)>0,actions:Te("EDIT",{to:(e,t)=>{const n=(o,a,s)=>a.id===t.parameter.id?s:o,r=e.parameters.reduce(n,void 0);let i=r+1;for(;i<e.parameters.length;){if(!e.parameters[i].submitted)return e.parameters[i].ref;i+=1}for(i=r-1;i>=0;){if(!e.parameters[i].submitted)return e.parameters[i].ref;i-=1}}})},{cond:e=>e.parameters.reduce((t,n)=>n.submitted?t:t+1,0)===0,actions:[N({submitted:!0,focusOnInit:!1,active:!1}),e=>{e.parameters.forEach(t=>t.ref.send({type:"UPDATE",active:!1}))},$e(e=>({type:"STAGE.COMMIT",stage:e}))]}])]},"PARAMETER.EDIT":{actions:[$e(e=>({type:"STAGE.EDIT",index:e.index}))]}}},{actions:{focusInput:()=>{},blurInput:()=>{}}}),{choose:ol}=$n,dt=(e,t,n,r,i,o,a,s,u,l,c)=>({id:t||Zt(),stage:n,parameters:u,stageInfo:i,index:r,focusOnInit:o,length:a,active:s,inputRef:{},submitted:l,loaded:c,fieldNames:e});function al(e){return mo()("GET","/stages")}function sl(e,t,n){return{kwargs:e.parameters.map((r,i)=>[r.parameter,ao(t[e.stage][i].type,"castTo",r.value,!0,n)]),_uuid:e.id,_cls:`fiftyone.core.stages.${e.stage}`}}function ao(e,t,n,r=!0,i){return e.split("|").reduce((o,a)=>{if(o!==void 0)return o;const s=Ae[a];return s.validate(r?n:s.castFrom(n,i),i)?s[t](n,i):o},void 0)}function so(e,t,n){return e.length===1&&e[0].stage===""?[]:e.map(r=>sl(r,t,n))}function uo(e,t){const n=dt(e,null,"",0,t,!1,1,!0,[],!1);return[{...n,ref:Ie(ct.withContext(n))}]}function Pr(e,t){const n=e.view,r=Object.fromEntries(t.map(i=>[i.name,i.params]));return Mr(n,so(e.stages,r,e.fieldNames))?e.stages:n.length===0?uo(e.fieldNames,t):n.map((i,o)=>{let a=i._cls.split(".");a=a[a.length-1];const s=dt(e.fieldNames,i._uuid,a,o,t,!1,e.stages.length,o===Math.min(n.length-1,e.activeStage),i.kwargs.map((u,l)=>{const c=t.filter(f=>f.name===a)[0];return oo(e.fieldNames,a,u[0],c.params[l].type,c.params[l].default,ao(c.params[l].type,"castFrom",u[1],!1,e.fieldNames),!0,!1,l===c.params.length-1,o===Math.min(n.length-1,e.activeStage),c.params[l].placeholder)}),!0,!0);return{...s,ref:Ie(ct.withContext(s))}})}const ul=Gn({id:"stages",context:{stages:[],stageInfo:void 0,activeStage:0,view:void 0,setView:void 0,http:void 0,fieldNames:[]},initial:"initializing",states:{decide:{always:[{target:"running.hist",cond:e=>e.stageInfo&&e.view,actions:[N({stages:e=>Pr(e,e.stageInfo)})]},{target:"loading"}]},initializing:{},loading:{invoke:{src:al,onDone:{target:"running",actions:N({stageInfo:(e,t)=>t.data.stages,stages:(e,t)=>e.view.length===0?uo(e.fieldNames,t.data.stages):Pr(e,t.data.stages)})}}},running:{type:"parallel",states:{focus:{initial:"blurred",states:{focused:{entry:[({stages:e})=>e.forEach(t=>t.ref.send({type:"BAR_FOCUS"}))],exit:[({stages:e})=>e.forEach(t=>t.ref.send({type:"BAR_BLUR"}))],on:{TOGGLE_FOCUS:{target:"blurred"},NEXT:{actions:[N({activeStage:({stages:e,activeStage:t})=>{const n=t;return n===e.length-.5?n:n%1!==0?Math.ceil(n):e[n].submitted&&(n===e.length-1||e[n+1].submitted)?n+.5:Math.min(e.length-1,n+1)}}),"sendStagesUpdate"]},PREVIOUS:{actions:[N({activeStage:({stages:e,activeStage:t})=>{const n=t;return n===-.5?n:n%1!==0?Math.floor(n):e[n].submitted&&(n===0||e[n-1].submitted)?n-.5:Math.max(0,n-1)}}),"sendStagesUpdate"]},NEXT_STAGE:{actions:[N({activeStage:({stages:e,activeStage:t})=>Math.min(Math.floor(t+1),e.length-1)}),"sendStagesUpdate"]},PREVIOUS_STAGE:{actions:[N({activeStage:({stages:e,activeStage:t})=>Math.max(Math.ceil(t-1),0)}),"sendStagesUpdate"]},NEXT_RESULT:{actions:Te(({stages:e,activeStage:t})=>({type:"NEXT_RESULT",to:e[t].ref}))},PREVIOUS_RESULT:{actions:Te(({stages:e,activeStage:t})=>({type:"PREVIOUS_RESULT",to:e[t].ref}))},DELETE_ACTIVE_STAGE:{actions:Te(({activeStage:e,stages:t})=>({type:"STAGE.DELETE",stage:t[e]}))},ENTER:{actions:[ol([{actions:Te(({activeStage:e})=>({type:"STAGE.ADD",index:Math.ceil(e)})),cond:({activeStage:e})=>Math.abs(e%1)===.5},{actions:Te(({stages:e,activeStage:t})=>{e[t].ref.send({type:"EDIT"})})}])]}}},blurred:{on:{TOGGLE_FOCUS:{target:"focused"}}}}},hovering:{initial:"no",states:{yes:{on:{MOUSELEAVE:"no"}},no:{on:{MOUSEENTER:"yes"}}}},hist:{type:"history",history:"deep"}}}},on:{"STAGE.EDIT":{actions:[N({activeStage:(e,t)=>t.index}),"sendStagesUpdate"]},"STAGE.ADD":{actions:[N({activeStage:(e,{index:t})=>t,stages:(e,{index:t})=>{const n=dt(e.fieldNames,null,"",t,e.stageInfo,!0,e.stages.length+1,!0,[],!1);return n.added=!0,[...e.stages.slice(0,t),{...n,ref:Ie(ct.withContext(n))},...e.stages.slice(t)].map((r,i)=>({...r,index:i,active:i===i,length:e.stages.length+1}))}}),"sendStagesUpdate"]},"STAGE.COMMIT":{actions:[N({stages:({stages:e},t)=>(e[t.stage.index]={...t.stage,ref:e[t.stage.index].ref},e),activeStage:({activeStage:e})=>e+.5}),"submit"]},CLEAR:{actions:[N({stages:e=>{const t=dt(e.fieldNames,null,"",0,e.stageInfo,!1,0,!0,[],!1);return[{...t,ref:Ie(ct.withContext(t))}]}}),"submit"]},"STAGE.DELETE":{actions:[N({activeStage:({activeStage:e})=>Math.max(e-1,0),stages:({fieldNames:e,stages:t,stageInfo:n},r)=>{if(t.length===1&&t[0].id===r.stage.id){const i=dt(e,null,"",0,n,!1,0,!0,[],!1);return[{...i,ref:Ie(ct.withContext(i))}]}else return t.filter(i=>i.id!==r.stage.id||t.length===1).map((i,o)=>{const a=i.id===r.stage.id?r.stage:i;return a.index=o,a.length=Math.max(t.length-1,1),a})}}),"submit"]},UPDATE:{target:"decide",actions:[N({http:(e,{http:t})=>t,view:(e,{view:t})=>t,setView:(e,{setView:t})=>t,fieldNames:(e,{fieldNames:t})=>t}),"sendStagesUpdate"]}}},{actions:{sendStagesUpdate:e=>{e.stages.forEach(t=>t.ref.send({type:"STAGE.UPDATE",index:t.index,length:e.stages.length,active:t.index===e.activeStage,stage:t.stage,fieldNames:e.fieldNames}))},submit:({stages:e,stageInfo:t,fieldNames:n,setView:r,view:i})=>{const o=Object.fromEntries(t.map(s=>[s.name,s.params])),a=so(e,o,n);Mr(a,i)||r(a)}}}),ll=G.div`
  position: relative;
  background-color: ${({theme:e})=>e.backgroundDark};
  border-radius: 3px;
  border: 1px solid ${({theme:e})=>e.backgroundDarkBorder};
  box-sizing: border-box;
  height: 52px;
  width: 100%;
  display: flex;
  overflow-x: scroll;
  scrollbar-width: none;
  min-width: 200px;

  &::-webkit-scrollbar {
    width: 0px;
    background: transparent;
    display: none;
  }
  &::-webkit-scrollbar-thumb {
    width: 0px;
    display: none;
  }
`,cl=G.div`
  display: flex;
  align-items: center;
  position: absolute;
  z-index: 1;
  height: 100%;
  border-radius: 3px;
  top 0;
  height: 52px;
  right: 0;
  background-image: linear-gradient(
    to right,
    rgba(0, 0, 0, 0),
    30%,
    ${({theme:e})=>e.backgroundDark}
  );
  column-gap: 0.5rem;
  padding: 0 0.5rem;
  z-index: 801;
`,dl={VIEW_BAR_NEXT:"right",VIEW_BAR_PREVIOUS:"left",VIEW_BAR_NEXT_STAGE:"shift+right",VIEW_BAR_PREVIOUS_STAGE:"shift+left",VIEW_BAR_DELETE:["del","backspace"],VIEW_BAR_ENTER:"enter"},fl=p.memo(()=>{const[e,t]=Os(ul),n=Mt(bo),r=Eo(),i=Mt(_o({}));k.exports.useEffect(()=>{t({type:"UPDATE",view:n,setView:r,fieldNames:i})},[n]);const{stages:o,activeStage:a}=e.context,s=k.exports.useRef(null),u={VIEW_BAR_NEXT:k.exports.useCallback(()=>t("NEXT"),[]),VIEW_BAR_PREVIOUS:k.exports.useCallback(()=>t("PREVIOUS"),[]),VIEW_BAR_NEXT_STAGE:k.exports.useCallback(()=>t("NEXT_STAGE"),[]),VIEW_BAR_PREVIOUS_STAGE:k.exports.useCallback(()=>t("PREVIOUS_STAGE"),[]),VIEW_BAR_DELETE:k.exports.useCallback(()=>t("DELETE_ACTIVE_STAGE"),[]),VIEW_BAR_ENTER:k.exports.useCallback(l=>{l.preventDefault(),t("ENTER")},[])};return Ln(s,()=>e.matches("running.focus.focused")&&t("TOGGLE_FOCUS")),p.createElement("div",{style:{position:"relative",flex:"1",marginRight:"0.5rem",overflow:"hidden"}},p.createElement(Li.exports.GlobalHotKeys,{handlers:u,keyMap:dl}),p.createElement(ll,{onClick:()=>e.matches("running.focus.blurred")&&t("TOGGLE_FOCUS"),ref:s},e.matches("running")?o.map((l,c)=>p.createElement(p.Fragment,{key:l.id},l.submitted&&(c===0||o[c-1].submitted)?p.createElement(Ir,{key:`insert-button-${l.id}`,send:t,index:c,active:a===c-.5&&e.matches("running.focus.focused")}):null,p.createElement(nl,{key:l.id,stageRef:l.ref,barRef:s}))):null,e.matches("running")&&o[o.length-1].submitted?p.createElement(Ir,{key:"insert-button-tail",send:t,index:o.length,active:a===o.length-.5&&e.matches("running.focus.focused")}):null,p.createElement("div",{style:{display:"block",minWidth:64,maxWidth:64,height:"100%"}})),p.createElement(cl,null,p.createElement(Mn,{onClick:()=>t("CLEAR"),style:{cursor:"pointer"}}),p.createElement(Fr,{href:"https://voxel51.com/docs/fiftyone/user_guide/app.html#using-the-view-bar",style:{display:"flex"}},p.createElement(Lr,null))))}),lo=function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"storeTeamsSubmission",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TeamsStoreTeamsSubmissionMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"TeamsStoreTeamsSubmissionMutation",selections:e},params:{cacheID:"65a385a73975d2daf14d156ff5b7ed6a",id:null,metadata:{},name:"TeamsStoreTeamsSubmissionMutation",operationKind:"mutation",text:`mutation TeamsStoreTeamsSubmissionMutation {
  storeTeamsSubmission
}
`}}}();lo.hash="75deb5f0c490b3073749a77128b435e4";const hl="_form_1rpft_1",pl="_header_1rpft_20",yl="_text_1rpft_27";const gl=()=>{var h,g,m,b,S,v,w,T;const[e,t]=k.exports.useState({email:"",firstname:"",lastname:"",company:"",role:""}),[n,r]=k.exports.useState("Submit"),[i,o]=Rr(ko),a=So(Nr),l=`https://api.hsforms.com/submissions/v3/integration/submit/${4972700}/87aa5367-a8f1-4ed4-9e23-1fdf8448d807`,[c]=be.exports.useMutation(lo),f=_=>K=>t({...e,[_]:K.target.value}),d=()=>{r("Submitting...");const _=new Headers;_.append("Content-Type","application/json"),fetch(l,{method:"post",headers:_,mode:"cors",body:JSON.stringify({submittedAt:Date.now(),fields:[{name:"firstname",value:e.firstname},{name:"lastname",value:e.lastname},{name:"email",value:e.email},{name:"company",value:e.company},{name:"role",value:e.role}],context:{pageName:"FiftyOne App"}})}).then(K=>{if(K.status!==200)throw new Error("Failed submission");return K.json()}).then(()=>{r("Submitted. Thank you!"),o(K=>({...K,submitted:!0})),c({variables:{}}),setTimeout(()=>a(!1),2e3)}).catch(K=>{r("Something went wrong")})};return p.createElement("div",{className:hl},p.createElement("div",{className:pl},p.createElement("h3",null,"Get FiftyOne for your team"),p.createElement(_n,{onClick:()=>a(!1),style:{display:"flex",alignItems:"center",padding:0}},p.createElement(Mn,null))),p.createElement("div",{className:yl},"FiftyOne is and will always be open source software that is freely available to individual users, all 35,000 and counting. However, if you\u2019re part of a team, you may need more. That\u2019s why we\u2019ve begun deploying team-based versions of FiftyOne with multi-user collaboration features to early adopters.",p.createElement("br",null),p.createElement("br",null),"Are you interested in a team-based deployment of FiftyOne? Let us know how to contact you and our founders will reach out to make it happen!"),p.createElement("input",{key:"firstname",placeholder:"First name*",value:(h=e.firstname)!=null?h:"",maxLength:40,onChange:f("firstname")}),p.createElement("input",{key:"lastname",placeholder:"Last name*",value:(g=e.lastname)!=null?g:"",maxLength:40,onChange:f("lastname")}),p.createElement("input",{key:"email",placeholder:"Email*",type:"email",value:(m=e.email)!=null?m:"",onChange:f("email")}),p.createElement("input",{key:"company",placeholder:"Company",value:(b=e.company)!=null?b:"",maxLength:100,onChange:f("company")}),p.createElement("input",{key:"role",placeholder:"Role",value:(S=e.role)!=null?S:"",maxLength:100,onChange:f("role")}),p.createElement(_n,{key:"submit",onClick:d,disabled:!(((v=e.email)==null?void 0:v.length)&&((w=e.firstname)==null?void 0:w.length)&&((T=e.lastname)==null?void 0:T.length))||i.submitted},n))},vl=({className:e,value:t})=>p.createElement(To,{title:t,className:e},t),ml=({useSearch:e})=>{const t=wo(),n=Mt(xo);return p.createElement(Co,{component:vl,placeholder:"Select dataset",inputStyle:{height:40,maxWidth:300},containerStyle:{position:"relative"},onSelect:r=>{r!==n&&t(r)},overflow:!0,useSearch:e,value:n||""})},fn=ho,bl=e=>{const t=Mt(Ho);return n=>{const r=be.exports.usePreloadedQuery(fn,e),{data:i,refetch:o}=be.exports.usePaginationFragment($r,r);return $o(()=>{o({search:n})},200,[n,t]),k.exports.useMemo(()=>({total:i.datasets.total===null?void 0:i.datasets.total,values:i.datasets.edges.map(a=>a.node.name)}),[i])}},El=e=>{const t=be.exports.usePreloadedQuery(fn,e),n=be.exports.useFragment(Ur,t);k.exports.useEffect(()=>{if(n.doNotTrack)return;const r=n.dev,i=r?"dev":"prod";pn.initialize(_t.app_ids[i],{debug:r,gaOptions:{storage:"none",cookieDomain:"none",clientId:n.uid}}),pn.set({userId:n.uid,checkProtocolTask:null,[_t.dimensions.dev]:i,[_t.dimensions.version]:`${n.version}`,[_t.dimensions.context]:n.context+(Uo()?"-DESKTOP":"")}),pn.pageview("/")},[])},_l=({prepared:e})=>{El(e);const t=bl(e),n=be.exports.usePreloadedQuery(fn,e),{teamsSubmission:r}=be.exports.useFragment(Hr,n),[i,o]=Rr(Nr),a=Ko(),s=k.exports.useContext(Io),u=Po(s);return p.createElement(p.Fragment,null,p.createElement(Ao,{title:"FiftyOne",onRefresh:a,navChildren:p.createElement(ml,{useSearch:t})},u&&p.createElement(fl,null),!u&&p.createElement("div",{style:{flex:1}}),p.createElement("div",{className:Do},!r&&p.createElement(_n,{onClick:()=>{o(!0)}},"Have a Team?"),p.createElement(Lo,null),p.createElement(Mo,null),p.createElement(Ro,null))),No.createPortal(p.createElement(Fo,null,i&&p.createElement(jo.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},key:"teams"},p.createElement(gl,null))),document.getElementById("teams")))},kl=({children:e,prepared:t})=>{const n=be.exports.usePreloadedQuery(fn,t),r=be.exports.useFragment(jr,n),i=Oo();return k.exports.useEffect(()=>{i({colorscale:Zn(r.colorscale),config:Zn(r.config)})},[r]),p.createElement(p.Fragment,null,p.createElement(_l,{prepared:t}),p.createElement("div",{className:Oa.page},p.createElement(k.exports.Suspense,{fallback:null},e)))},Cl=kl;export{Cl as default};
